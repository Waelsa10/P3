{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/P3/pages/index.jsx"],"sourcesContent":["// components/ChatScreen/index.jsx\r\nimport React, { useRef, useState, useEffect, useContext } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { auth, db } from \"../../firebase\";\r\nimport { \r\n  addDoc, \r\n  collection, \r\n  doc, \r\n  setDoc, \r\n  deleteDoc, \r\n  serverTimestamp, \r\n  enableNetwork, \r\n  disableNetwork,\r\n} from \"firebase/firestore\";\r\nimport { DarkModeContext } from \"../DarkModeProvider\";\r\n\r\n// Hooks\r\nimport { useEmojiPicker } from \"./hooks/useEmojiPicker\";\r\nimport { useFileUpload } from \"./hooks/useFileUpload\";\r\nimport { useVoiceRecording } from \"./hooks/useVoiceRecording\";\r\nimport { useCamera } from \"./hooks/useCamera\";\r\nimport { useLocation } from \"./hooks/useLocation\";\r\nimport { usePolls } from \"./hooks/usePolls\";\r\nimport { useRecipientData } from \"./hooks/useRecipientData\";\r\nimport { useMessages } from \"./hooks/useMessages\";\r\nimport { useMessageStatus } from \"./hooks/useMessageStatus\";\r\nimport { useDisplayName } from \"./hooks/useDisplayName\";\r\n\r\n// Components\r\nimport ChatHeader from \"./components/ChatHeader\";\r\nimport MessageList from \"./components/MessageList\";\r\nimport ChatInput from \"./components/ChatInput\";\r\nimport EmojiPicker from \"./components/EmojiPicker\";\r\nimport AttachMenu from \"./components/AttachMenu\";\r\nimport FileUploadDialog from \"./components/FileUploadDialog\";\r\nimport CameraDialog from \"./components/CameraDialog\";\r\nimport LocationPreviewDialog from \"./components/LocationPreviewDialog\";\r\nimport VoiceRecordingDialog from \"./components/VoiceRecordingDialog\";\r\nimport ChatInfoDialog from \"./components/ChatInfoDialog\";\r\nimport ReplyPreview from \"./components/ReplyPreview\";\r\nimport PollCreationDialog from \"./components/PollCreationDialog\";\r\n\r\n// Styled Components\r\nimport { Container, OfflineMessage, ErrorMessage } from \"./ChatScreen.styles\";\r\n\r\n// Utils\r\nimport { checkIfBlocked, buildReplyData } from \"./utils\";\r\nimport { MESSAGE_STATUS } from \"./constants\";\r\n\r\nfunction ChatScreen({ \r\n  chat, \r\n  messages, \r\n  isMobile = false, \r\n  onToggleSidebar = () => {} \r\n}) {\r\n  const [user] = useAuthState(auth);\r\n  const router = useRouter();\r\n  const endOfMessagesRef = useRef(null);\r\n  const inputRef = useRef(null);\r\n  \r\n  const [input, setInput] = useState(\"\");\r\n  const [isOnline, setIsOnline] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [sendingError, setSendingError] = useState(null);\r\n  const [showProfile, setShowProfile] = useState(false);\r\n  const [replyingTo, setReplyingTo] = useState(null);\r\n  const [attachMenuAnchor, setAttachMenuAnchor] = useState(null);\r\n\r\n  // Get dark mode context\r\n  const darkModeContext = useContext(DarkModeContext);\r\n  const { darkMode } = darkModeContext || { darkMode: false };\r\n  \r\n  const chatId = router?.query?.id || null;\r\n\r\n  // Custom Hooks\r\n  const { recipientEmail, recipient, recipientSnapshot, isSelfChat, isLoading } = useRecipientData(user, chat);\r\n  const { messagesSnapshot } = useMessages(chatId);\r\n  \r\n  // Fetch custom display name\r\n  const { displayName: customDisplayName, loading: displayNameLoading } = useDisplayName(\r\n    user?.uid,\r\n    recipientEmail\r\n  );\r\n  \r\n  useMessageStatus(\r\n    chatId, \r\n    isLoading ? null : recipientEmail,\r\n    user?.email,\r\n    isSelfChat\r\n  );\r\n  \r\n  const emojiPicker = useEmojiPicker();\r\n  const fileUpload = useFileUpload(chatId, user, recipientEmail);\r\n  const voiceRecording = useVoiceRecording(chatId, user, recipientEmail);\r\n  const camera = useCamera(chatId, user, recipientEmail);\r\n  const location = useLocation(chatId, user, recipientEmail);\r\n  const polls = usePolls(chatId, user, recipientEmail);\r\n\r\n  // Debug logging\r\n  useEffect(() => {\r\n    if (user) {\r\n      console.log(\"üîç Current authenticated user:\", {\r\n        uid: user.uid,\r\n        email: user.email,\r\n      });\r\n    }\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"üìõ Custom display name:\", customDisplayName);\r\n  }, [customDisplayName]);\r\n\r\n  // Monitor online status\r\n  useEffect(() => {\r\n    const handleOnline = () => {\r\n      setIsOnline(true);\r\n      enableNetwork(db);\r\n    };\r\n\r\n    const handleOffline = () => {\r\n      setIsOnline(false);\r\n      disableNetwork(db);\r\n    };\r\n\r\n    window.addEventListener(\"online\", handleOnline);\r\n    window.addEventListener(\"offline\", handleOffline);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"online\", handleOnline);\r\n      window.removeEventListener(\"offline\", handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  // Scroll to bottom\r\n  const scrollToBottom = () => {\r\n    if (endOfMessagesRef?.current) {\r\n      endOfMessagesRef.current.scrollIntoView({\r\n        behavior: \"smooth\",\r\n        block: \"start\",\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messagesSnapshot]);\r\n\r\n  // Handle attach menu\r\n  const handlePlusClick = (event) => {\r\n    setAttachMenuAnchor(event.currentTarget);\r\n  };\r\n\r\n  const handleAttachMenuClose = () => {\r\n    setAttachMenuAnchor(null);\r\n  };\r\n\r\n  // Handle display name update\r\n  const handleUpdateDisplayName = async (newDisplayName) => {\r\n    if (!recipientEmail || isSelfChat || !user) {\r\n      console.error(\"‚ùå Cannot update display name:\", { recipientEmail, isSelfChat, hasUser: !!user });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      console.log(`üìù Updating display name for ${recipientEmail} to \"${newDisplayName}\"`);\r\n      console.log(`üë§ Current user:`, { uid: user.uid, email: user.email });\r\n      \r\n      const contactRef = doc(db, \"users\", user.uid, \"contacts\", recipientEmail);\r\n      \r\n      console.log(`üìç Document path: users/${user.uid}/contacts/${recipientEmail}`);\r\n      \r\n      await setDoc(contactRef, {\r\n        email: recipientEmail,\r\n        displayName: newDisplayName,\r\n        updatedAt: serverTimestamp(),\r\n      }, { merge: true });\r\n\r\n      console.log(\"‚úÖ Display name updated successfully\");\r\n      \r\n      // Show success message\r\n      setSendingError(null);\r\n    } catch (error) {\r\n      console.error(\"‚ùå Error updating display name:\", error);\r\n      console.error(\"Error code:\", error.code);\r\n      console.error(\"Error message:\", error.message);\r\n      setSendingError(`Failed to update display name: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  // Handle emoji selection\r\n  const handleEmojiClick = (emoji) => {\r\n    const cursorPosition = inputRef.current?.selectionStart || input.length;\r\n    const textBeforeCursor = input.slice(0, cursorPosition);\r\n    const textAfterCursor = input.slice(cursorPosition);\r\n    \r\n    setInput(textBeforeCursor + emoji + textAfterCursor);\r\n    emojiPicker.saveRecentEmoji(emoji);\r\n    \r\n    setTimeout(() => {\r\n      if (inputRef.current) {\r\n        inputRef.current.focus();\r\n        const newPosition = cursorPosition + emoji.length;\r\n        inputRef.current.setSelectionRange(newPosition, newPosition);\r\n      }\r\n    }, 0);\r\n  };\r\n\r\n  // Delete message\r\n  const deleteMessage = async (messageId) => {\r\n    if (!chatId || !messageId) return;\r\n    \r\n    try {\r\n      console.log(`üóëÔ∏è [Chat: ${chatId}] Deleting message ${messageId}`);\r\n      await deleteDoc(doc(db, \"chats\", chatId, \"messages\", messageId));\r\n      console.log(`‚úÖ [Chat: ${chatId}] Message deleted successfully`);\r\n    } catch (error) {\r\n      console.error(`‚ùå [Chat: ${chatId}] Error deleting message:`, error);\r\n      setSendingError(\"Failed to delete message. Please try again.\");\r\n    }\r\n  };\r\n\r\n  // Set reply\r\n  const handleReply = (messageData) => {\r\n    setReplyingTo(messageData);\r\n    inputRef.current?.focus();\r\n  };\r\n\r\n  // Cancel reply\r\n  const cancelReply = () => {\r\n    setReplyingTo(null);\r\n  };\r\n\r\n  // Send text message\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault();\r\n    setSendingError(null);\r\n\r\n    if (!input?.trim() || !chatId || !user || !recipientEmail) {\r\n      console.warn(\"‚ö†Ô∏è Cannot send message - missing required data\");\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      console.log(`üì§ [Chat: ${chatId}] Preparing to send message to ${recipientEmail}`);\r\n      \r\n      if (!isSelfChat) {\r\n        const isBlocked = await checkIfBlocked(user.email, recipientEmail);\r\n        if (isBlocked) {\r\n          setSendingError(\"You cannot send messages to this user. You have been blocked.\");\r\n          return;\r\n        }\r\n      }\r\n\r\n      const userRef = doc(db, \"users\", user.uid);\r\n      await setDoc(\r\n        userRef,\r\n        {\r\n          lastSeen: serverTimestamp(),\r\n          email: user.email,\r\n        },\r\n        { merge: true }\r\n      );\r\n\r\n      const messageData = {\r\n        timestamp: serverTimestamp(),\r\n        message: input,\r\n        user: user.email,\r\n        photoURL: user.photoURL,\r\n        status: MESSAGE_STATUS.SENT,\r\n      };\r\n\r\n      const replyData = buildReplyData(replyingTo);\r\n      if (replyData) {\r\n        messageData.replyTo = replyData;\r\n      }\r\n\r\n      await addDoc(collection(db, \"chats\", chatId, \"messages\"), messageData);\r\n\r\n      setInput(\"\");\r\n      setReplyingTo(null);\r\n      scrollToBottom();\r\n    } catch (error) {\r\n      console.error(`‚ùå [Chat: ${chatId}] Error sending message:`, error);\r\n      setSendingError(\"Failed to send message. Please try again.\");\r\n    }\r\n  };\r\n\r\n  if (!isOnline) {\r\n    return (\r\n      <Container darkMode={darkMode}>\r\n        <OfflineMessage darkMode={darkMode}>\r\n          You are currently offline. Please check your internet connection.\r\n        </OfflineMessage>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Container darkMode={darkMode}>\r\n        <ErrorMessage darkMode={darkMode}>{error}</ErrorMessage>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container darkMode={darkMode}>\r\n      <ChatHeader\r\n        recipient={recipient}\r\n        recipientEmail={recipientEmail}\r\n        recipientSnapshot={recipientSnapshot}\r\n        isSelfChat={isSelfChat}\r\n        customDisplayName={customDisplayName}\r\n        onMoreClick={() => setShowProfile(true)}\r\n        darkMode={darkMode}\r\n        isMobile={isMobile}\r\n        onToggleSidebar={onToggleSidebar}\r\n      />\r\n\r\n      <input\r\n        ref={fileUpload.fileInputRef}\r\n        type=\"file\"\r\n        hidden\r\n        onChange={fileUpload.handleFileSelect}\r\n        accept=\"*/*\"\r\n      />\r\n\r\n      <MessageList\r\n        ref={endOfMessagesRef}\r\n        messagesSnapshot={messagesSnapshot}\r\n        messages={messages}\r\n        sendingError={sendingError}\r\n        onDelete={deleteMessage}\r\n        onReply={handleReply}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <AttachMenu\r\n        anchorEl={attachMenuAnchor}\r\n        open={Boolean(attachMenuAnchor)}\r\n        onClose={handleAttachMenuClose}\r\n        onAttachFile={fileUpload.handleAttachClick}\r\n        onTakePhoto={camera.startCamera}\r\n        onShareLocation={location.getLocation}\r\n        onCreatePoll={polls.openPollDialog}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <EmojiPicker\r\n        open={emojiPicker.openEmojiPicker}\r\n        anchorEl={emojiPicker.emojiAnchorEl}\r\n        onClose={emojiPicker.handleEmojiPickerClose}\r\n        selectedCategory={emojiPicker.selectedEmojiCategory}\r\n        onCategoryChange={emojiPicker.setSelectedEmojiCategory}\r\n        searchTerm={emojiPicker.emojiSearchTerm}\r\n        onSearchChange={emojiPicker.setEmojiSearchTerm}\r\n        emojis={emojiPicker.getFilteredEmojis()}\r\n        onEmojiSelect={handleEmojiClick}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <FileUploadDialog\r\n        open={fileUpload.showFileConfirmation}\r\n        onClose={fileUpload.cancelFileSelection}\r\n        file={fileUpload.selectedFile}\r\n        filePreview={fileUpload.filePreview}\r\n        input={input}\r\n        onInputChange={setInput}\r\n        uploadProgress={fileUpload.uploadProgress}\r\n        isUploading={fileUpload.isUploading}\r\n        onSend={() => fileUpload.sendFileMessage(\r\n          input,\r\n          replyingTo,\r\n          setSendingError,\r\n          setInput,\r\n          setReplyingTo,\r\n          scrollToBottom,\r\n          isSelfChat,\r\n        )}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <CameraDialog\r\n        open={camera.showCamera || camera.capturedImage !== null}\r\n        showCamera={camera.showCamera}\r\n        capturedImage={camera.capturedImage}\r\n        videoRef={camera.videoRef}\r\n        input={input}\r\n        onInputChange={setInput}\r\n        uploadProgress={camera.uploadProgress}\r\n        isUploading={camera.isUploading}\r\n        onCapture={camera.capturePhoto}\r\n        onRetake={camera.retakePhoto}\r\n        onCancel={camera.cancelPhoto}\r\n        onSend={() => camera.sendPhoto(\r\n          input,\r\n          replyingTo,\r\n          setSendingError,\r\n          setInput,\r\n          setReplyingTo,\r\n          scrollToBottom,\r\n          isSelfChat,\r\n        )}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <LocationPreviewDialog\r\n        open={location.showLocationPreview}\r\n        locationData={location.locationData}\r\n        input={input}\r\n        onInputChange={setInput}\r\n        onCancel={location.cancelLocation}\r\n        onSend={() => location.sendLocation(\r\n          input,\r\n          replyingTo,\r\n          setSendingError,\r\n          setInput,\r\n          setReplyingTo,\r\n          scrollToBottom,\r\n          isSelfChat,\r\n        )}\r\n        isGettingLocation={location.isGettingLocation}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <VoiceRecordingDialog\r\n        open={voiceRecording.audioBlob !== null}\r\n        audioBlob={voiceRecording.audioBlob}\r\n        recordingTime={voiceRecording.recordingTime}\r\n        uploadProgress={voiceRecording.uploadProgress}\r\n        isUploading={voiceRecording.isUploading}\r\n        onCancel={voiceRecording.cancelRecording}\r\n        onSend={() => voiceRecording.sendVoiceMessage(\r\n          replyingTo,\r\n          setSendingError,\r\n          setReplyingTo,\r\n          scrollToBottom,\r\n          isSelfChat,\r\n        )}\r\n        onError={setSendingError}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <PollCreationDialog\r\n        open={polls.showPollDialog}\r\n        onClose={polls.closePollDialog}\r\n        question={polls.pollQuestion}\r\n        onQuestionChange={polls.setPollQuestion}\r\n        options={polls.pollOptions}\r\n        onOptionChange={polls.handleOptionChange}\r\n        onRemoveOption={polls.removeOption}\r\n        allowMultipleAnswers={polls.allowMultipleAnswers}\r\n        onAllowMultipleChange={polls.setAllowMultipleAnswers}\r\n        onSend={() => polls.sendPoll(\r\n          replyingTo,\r\n          setSendingError,\r\n          setReplyingTo,\r\n          scrollToBottom,\r\n          isSelfChat,\r\n        )}\r\n        isSending={polls.isSendingPoll}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <ChatInfoDialog\r\n        open={showProfile}\r\n        onClose={() => setShowProfile(false)}\r\n        recipient={{ ...recipient, displayName: customDisplayName }}\r\n        recipientEmail={recipientEmail}\r\n        isSelfChat={isSelfChat}\r\n        messages={messagesSnapshot?.docs.map(doc => ({ \r\n          id: doc.id, \r\n          ...doc.data(),\r\n          timestamp: doc.data().timestamp?.toDate?.() || doc.data().timestamp\r\n        })) || []}\r\n        onUpdateDisplayName={handleUpdateDisplayName}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <ReplyPreview\r\n        replyingTo={replyingTo}\r\n        userEmail={user?.email}\r\n        onCancel={cancelReply}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <ChatInput\r\n        input={input}\r\n        setInput={setInput}\r\n        inputRef={inputRef}\r\n        isRecording={voiceRecording.isRecording}\r\n        recordingTime={voiceRecording.recordingTime}\r\n        onSubmit={sendMessage}\r\n        onEmojiClick={emojiPicker.handleEmojiPickerOpen}\r\n        onPlusClick={handlePlusClick}\r\n        onStartRecording={() => voiceRecording.startRecording(setSendingError)}\r\n        onStopRecording={voiceRecording.stopRecording}\r\n        darkMode={darkMode}\r\n      />\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default ChatScreen;"],"names":[],"mappings":"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","debugId":null}}]
}