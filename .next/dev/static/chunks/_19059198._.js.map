{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/utils/getRecipientEmail.js"],"sourcesContent":["// utils/getRecipientEmail.js\r\n\r\n/**\r\n * Get the recipient email for a chat (WhatsApp-style)\r\n * @param {string[]} users - Array of user emails in the chat\r\n * @param {Object} userLoggedIn - Current logged-in user\r\n * @returns {string|null} Recipient email or null\r\n */\r\nconst getRecipientEmail = (users, userLoggedIn) => {\r\n  // ===================================\r\n  // 1Ô∏è‚É£ VALIDATION\r\n  // ===================================\r\n  if (!users || !Array.isArray(users) || !userLoggedIn?.email) {\r\n    return null;\r\n  }\r\n\r\n  const currentUserEmail = userLoggedIn.email.toLowerCase().trim();\r\n  \r\n  // Clean and normalize all emails\r\n  const cleanedUsers = users\r\n    .filter(email => email && typeof email === 'string')\r\n    .map(email => email.toLowerCase().trim());\r\n\r\n  // Chat must have at least 1 user\r\n  if (cleanedUsers.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  // ===================================\r\n  // 2Ô∏è‚É£ SELF-CHAT DETECTION (Saved Messages)\r\n  // ===================================\r\n  // Get unique participants\r\n  const uniqueParticipants = [...new Set(cleanedUsers)];\r\n\r\n  // If there's only ONE unique participant and it's ME ‚Üí Self-chat\r\n  if (uniqueParticipants.length === 1 && uniqueParticipants[0] === currentUserEmail) {\r\n    return currentUserEmail;\r\n  }\r\n\r\n  // ===================================\r\n  // 3Ô∏è‚É£ REGULAR CHAT - Find Other Person\r\n  // ===================================\r\n  // Find the first person who is NOT me\r\n  const recipient = cleanedUsers.find(email => email !== currentUserEmail);\r\n\r\n  if (recipient) {\r\n    return recipient;\r\n  }\r\n\r\n  // No valid recipient found\r\n  return null;\r\n};\r\n\r\nexport default getRecipientEmail;"],"names":[],"mappings":"AAAA,6BAA6B;AAE7B;;;;;CAKC;;;;AACD,MAAM,oBAAoB,CAAC,OAAO;IAChC,sCAAsC;IACtC,iBAAiB;IACjB,sCAAsC;IACtC,IAAI,CAAC,SAAS,CAAC,MAAM,OAAO,CAAC,UAAU,CAAC,cAAc,OAAO;QAC3D,OAAO;IACT;IAEA,MAAM,mBAAmB,aAAa,KAAK,CAAC,WAAW,GAAG,IAAI;IAE9D,iCAAiC;IACjC,MAAM,eAAe,MAClB,MAAM,CAAC,CAAA,QAAS,SAAS,OAAO,UAAU,UAC1C,GAAG,CAAC,CAAA,QAAS,MAAM,WAAW,GAAG,IAAI;IAExC,iCAAiC;IACjC,IAAI,aAAa,MAAM,KAAK,GAAG;QAC7B,OAAO;IACT;IAEA,sCAAsC;IACtC,2CAA2C;IAC3C,sCAAsC;IACtC,0BAA0B;IAC1B,MAAM,qBAAqB;WAAI,IAAI,IAAI;KAAc;IAErD,iEAAiE;IACjE,IAAI,mBAAmB,MAAM,KAAK,KAAK,kBAAkB,CAAC,EAAE,KAAK,kBAAkB;QACjF,OAAO;IACT;IAEA,sCAAsC;IACtC,uCAAuC;IACvC,sCAAsC;IACtC,sCAAsC;IACtC,MAAM,YAAY,aAAa,IAAI,CAAC,CAAA,QAAS,UAAU;IAEvD,IAAI,WAAW;QACb,OAAO;IACT;IAEA,2BAA2B;IAC3B,OAAO;AACT;uCAEe","debugId":null}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/components/ChatHeader.jsx"],"sourcesContent":["// components/ChatScreen/components/ChatHeader.jsx\r\nimport React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Avatar, IconButton } from \"@mui/material\";\r\nimport AttachFileIcon from \"@mui/icons-material/AttachFile\";\r\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\r\nimport MenuIcon from \"@mui/icons-material/Menu\";\r\nimport TimeAgo from \"timeago-react\";\r\n\r\nfunction ChatHeader({\r\n  recipient,\r\n  recipientEmail,\r\n  recipientSnapshot,\r\n  isSelfChat,\r\n  onAttachFile,\r\n  onMoreClick,\r\n  darkMode,\r\n  isMobile,\r\n  onToggleSidebar,\r\n}) {\r\n  const getHeaderTitle = () => {\r\n    if (isSelfChat) {\r\n      return `${recipientEmail} (You)`;\r\n    }\r\n    return recipientEmail;\r\n  };\r\n\r\n  const getStatusText = () => {\r\n    if (isSelfChat) {\r\n      return \"Message yourself\";\r\n    }\r\n    \r\n    if (recipient?.lastSeen?.toDate) {\r\n      return (\r\n        <>\r\n          Last active: <TimeAgo datetime={recipient.lastSeen.toDate()} />\r\n        </>\r\n      );\r\n    }\r\n    \r\n    return \"Loading...\";\r\n  };\r\n\r\n  return (\r\n    <Header darkMode={darkMode}>\r\n      <HeaderLeft>\r\n        {isMobile && (\r\n          <IconButton onClick={onToggleSidebar} style={{ marginRight: '10px' }}>\r\n            <MenuIcon />\r\n          </IconButton>\r\n        )}\r\n        {recipient ? (\r\n          <UserAvatar src={recipientSnapshot?.docs?.[0]?.data()?.photoURL} />\r\n        ) : (\r\n          <UserAvatar>{recipientEmail?.[0]?.toUpperCase()}</UserAvatar>\r\n        )}\r\n        <HeaderInformation darkMode={darkMode}>\r\n          <h3>{getHeaderTitle()}</h3>\r\n          <p>{getStatusText()}</p>\r\n        </HeaderInformation>\r\n      </HeaderLeft>\r\n      <HeaderActions>\r\n        <IconButton onClick={onAttachFile}>\r\n          <AttachFileIcon />\r\n        </IconButton>\r\n        <IconButton onClick={onMoreClick}>\r\n          <MoreVertIcon />\r\n        </IconButton>\r\n      </HeaderActions>\r\n    </Header>\r\n  );\r\n}\r\n\r\nexport default ChatHeader;\r\n\r\n// Styled Components\r\nconst Header = styled.div`\r\n  position: sticky;\r\n  background-color: ${(props) => (props.darkMode ? \"#1e1e1e\" : \"white\")};\r\n  z-index: 100;\r\n  top: 0;\r\n  display: flex;\r\n  padding: 11px;\r\n  height: 80px;\r\n  align-items: center;\r\n  border-bottom: 1px solid ${(props) => (props.darkMode ? \"#333\" : \"whitesmoke\")};\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst HeaderLeft = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  flex: 1;\r\n  min-width: 0;\r\n`;\r\n\r\nconst UserAvatar = styled(Avatar)`\r\n  margin: 5px;\r\n  margin-right: 15px;\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst HeaderInformation = styled.div`\r\n  margin-left: 15px;\r\n  flex: 1;\r\n  min-width: 0;\r\n\r\n  > h3 {\r\n    margin: 0;\r\n    margin-bottom: 3px;\r\n    color: ${(props) => (props.darkMode ? \"#e0e0e0\" : \"#000\")};\r\n    font-size: 16px;\r\n    font-weight: 500;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n\r\n  > p {\r\n    font-size: 13px;\r\n    color: ${(props) => (props.darkMode ? \"#888\" : \"gray\")};\r\n    margin: 0;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    margin-left: 10px;\r\n\r\n    > h3 {\r\n      font-size: 15px;\r\n    }\r\n\r\n    > p {\r\n      font-size: 12px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst HeaderActions = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  flex-shrink: 0;\r\n`;"],"names":[],"mappings":"AAAA,kDAAkD;;;;;;AAClD;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,cAAc,EACd,iBAAiB,EACjB,UAAU,EACV,YAAY,EACZ,WAAW,EACX,QAAQ,EACR,QAAQ,EACR,eAAe,EAChB;IACC,MAAM,iBAAiB;QACrB,IAAI,YAAY;YACd,OAAO,GAAG,eAAe,MAAM,CAAC;QAClC;QACA,OAAO;IACT;IAEA,MAAM,gBAAgB;QACpB,IAAI,YAAY;YACd,OAAO;QACT;QAEA,IAAI,WAAW,UAAU,QAAQ;YAC/B,qBACE;;oBAAE;kCACa,0JAAC,kKAAO;wBAAC,UAAU,UAAU,QAAQ,CAAC,MAAM;;;;;;;;QAG/D;QAEA,OAAO;IACT;IAEA,qBACE,0JAAC;QAAO,UAAU;;0BAChB,0JAAC;;oBACE,0BACC,0JAAC,gNAAU;wBAAC,SAAS;wBAAiB,OAAO;4BAAE,aAAa;wBAAO;kCACjE,cAAA,0JAAC,yJAAQ;;;;;;;;;;oBAGZ,0BACC,0JAAC;wBAAW,KAAK,mBAAmB,MAAM,CAAC,EAAE,EAAE,QAAQ;;;;;6CAEvD,0JAAC;kCAAY,gBAAgB,CAAC,EAAE,EAAE;;;;;;kCAEpC,0JAAC;wBAAkB,UAAU;;0CAC3B,0JAAC;0CAAI;;;;;;0CACL,0JAAC;0CAAG;;;;;;;;;;;;;;;;;;0BAGR,0JAAC;;kCACC,0JAAC,gNAAU;wBAAC,SAAS;kCACnB,cAAA,0JAAC,+JAAc;;;;;;;;;;kCAEjB,0JAAC,gNAAU;wBAAC,SAAS;kCACnB,cAAA,0JAAC,6JAAY;;;;;;;;;;;;;;;;;;;;;;AAKvB;KA9DS;uCAgEM;AAEf,oBAAoB;AACpB,MAAM,SAAS,6LAAM,CAAC,GAAG,CAAC;;oBAEN,EAAE,CAAC,QAAW,MAAM,QAAQ,GAAG,YAAY,QAAS;;;;;;;2BAO7C,EAAE,CAAC,QAAW,MAAM,QAAQ,GAAG,SAAS,aAAc;;AAEjF,CAAC;MAXK;AAaN,MAAM,aAAa,6LAAM,CAAC,GAAG,CAAC;;;;;AAK9B,CAAC;MALK;AAON,MAAM,aAAa,IAAA,6LAAM,EAAC,gMAAM,CAAC,CAAC;;;;AAIlC,CAAC;MAJK;AAMN,MAAM,oBAAoB,6LAAM,CAAC,GAAG,CAAC;;;;;;;;WAQ1B,EAAE,CAAC,QAAW,MAAM,QAAQ,GAAG,YAAY,OAAQ;;;;;;;;;;WAUnD,EAAE,CAAC,QAAW,MAAM,QAAQ,GAAG,SAAS,OAAQ;;;;;;;;;;;;;;;;;;AAkB3D,CAAC;MApCK;AAsCN,MAAM,gBAAgB,6LAAM,CAAC,GAAG,CAAC;;;;AAIjC,CAAC;MAJK","debugId":null}},
    {"offset": {"line": 295, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/index.jsx"],"sourcesContent":["// components/ChatScreen/index.jsx\r\nimport React, { useEffect, useState, useRef, useContext } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { auth, db } from \"../../firebase\";\r\nimport {\r\n  collection,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  onSnapshot,\r\n  addDoc,\r\n  serverTimestamp,\r\n  doc,\r\n  updateDoc,\r\n  getDocs,\r\n} from \"firebase/firestore\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport styled from \"styled-components\";\r\nimport { DarkModeContext } from \"../DarkModeProvider\";\r\nimport getRecipientEmail from \"../../utils/getRecipientEmail\";\r\nimport { MESSAGE_STATUS } from \"./constants\";\r\nimport ChatHeader from \"./components/ChatHeader\";\r\n\r\nfunction ChatScreen({ chat, isMobile, onToggleSidebar }) {\r\n  const [user] = useAuthState(auth);\r\n  const [input, setInput] = useState(\"\");\r\n  const [messages, setMessages] = useState([]);\r\n  const messagesEndRef = useRef(null);\r\n  const router = useRouter();\r\n  const { id: chatId } = router.query;\r\n\r\n  // Get dark mode context\r\n  const darkModeContext = useContext(DarkModeContext);\r\n  const { darkMode } = darkModeContext || { darkMode: false };\r\n\r\n  // Get recipient email\r\n  const recipientEmail = chat?.users ? getRecipientEmail(chat.users, user) : null;\r\n\r\n  // Check if self-chat\r\n  const isSelfChat = recipientEmail === user?.email;\r\n\r\n  console.log(`üîç [Chat: ${chatId}] Chat initialized:`, {\r\n    currentUser: user?.email,\r\n    recipient: recipientEmail,\r\n    isSelfChat,\r\n  });\r\n\r\n  // Get recipient info\r\n  const recipientQuery =\r\n    recipientEmail && !isSelfChat\r\n      ? query(collection(db, \"users\"), where(\"email\", \"==\", recipientEmail))\r\n      : null;\r\n  const [recipientSnapshot] = useCollection(recipientQuery);\r\n  const recipient = recipientSnapshot?.docs?.[0]?.data();\r\n\r\n  // Load messages\r\n  useEffect(() => {\r\n    if (!chatId) return;\r\n\r\n    const messagesRef = collection(db, \"chats\", chatId, \"messages\");\r\n    const q = query(messagesRef, orderBy(\"timestamp\", \"asc\"));\r\n\r\n    const unsubscribe = onSnapshot(\r\n      q,\r\n      (snapshot) => {\r\n        const msgs = snapshot.docs.map((doc) => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n        setMessages(msgs);\r\n\r\n        // Auto-scroll to bottom\r\n        setTimeout(() => {\r\n          messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n        }, 100);\r\n      },\r\n      (error) => {\r\n        console.error(`‚ùå [Chat: ${chatId}] Error loading messages:`, error);\r\n      }\r\n    );\r\n\r\n    return () => unsubscribe();\r\n  }, [chatId]);\r\n\r\n  // ‚úÖ Mark received messages as read when viewing chat\r\n  useEffect(() => {\r\n    if (!chatId || !user?.email || isSelfChat) return;\r\n\r\n    let isActive = true;\r\n\r\n    const markReceivedMessagesAsRead = async () => {\r\n      try {\r\n        const messagesRef = collection(db, \"chats\", chatId, \"messages\");\r\n        const snapshot = await getDocs(messagesRef);\r\n\r\n        if (snapshot.empty || !isActive) return;\r\n\r\n        const updates = [];\r\n\r\n        snapshot.docs.forEach((messageDoc) => {\r\n          const data = messageDoc.data();\r\n\r\n          // Only update messages FROM other users\r\n          if (data.user === user.email) return;\r\n\r\n          // Mark as read if not already\r\n          if (\r\n            data.status === MESSAGE_STATUS.SENT ||\r\n            data.status === MESSAGE_STATUS.DELIVERED\r\n          ) {\r\n            updates.push(\r\n              updateDoc(messageDoc.ref, {\r\n                status: MESSAGE_STATUS.READ,\r\n                readAt: serverTimestamp(),\r\n              })\r\n            );\r\n          }\r\n        });\r\n\r\n        if (updates.length > 0 && isActive) {\r\n          await Promise.all(updates);\r\n          console.log(`‚úÖ [Chat: ${chatId}] Marked ${updates.length} messages as read`);\r\n        }\r\n      } catch (error) {\r\n        console.error(`‚ùå [Chat: ${chatId}] Error marking as read:`, error);\r\n      }\r\n    };\r\n\r\n    // Mark on load\r\n    markReceivedMessagesAsRead();\r\n\r\n    // Mark on window focus\r\n    const handleFocus = () => {\r\n      if (isActive) markReceivedMessagesAsRead();\r\n    };\r\n\r\n    window.addEventListener(\"focus\", handleFocus);\r\n\r\n    return () => {\r\n      isActive = false;\r\n      window.removeEventListener(\"focus\", handleFocus);\r\n    };\r\n  }, [chatId, user, isSelfChat]);\r\n\r\n  // ‚úÖ Send message with correct status\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!input.trim() || !user || !chatId) return;\r\n\r\n    const messageText = input.trim();\r\n    setInput(\"\");\r\n\r\n    console.log(`üì§ [Chat: ${chatId}] Preparing to send message to ${recipientEmail}`);\r\n\r\n    try {\r\n      const messagesRef = collection(db, \"chats\", chatId, \"messages\");\r\n\r\n      // ‚úÖ Self-chat = \"read\", Normal chat = \"sent\"\r\n      const initialStatus = isSelfChat ? MESSAGE_STATUS.READ : MESSAGE_STATUS.SENT;\r\n\r\n      const messageData = {\r\n        message: messageText,\r\n        user: user.email,\r\n        timestamp: serverTimestamp(),\r\n        status: initialStatus,\r\n      };\r\n\r\n      if (isSelfChat) {\r\n        messageData.readAt = serverTimestamp();\r\n      }\r\n\r\n      console.log(`üì§ [Chat: ${chatId}] Sending message with status: ${initialStatus}`);\r\n\r\n      await addDoc(messagesRef, messageData);\r\n\r\n      // Update chat's lastMessage\r\n      const chatRef = doc(db, \"chats\", chatId);\r\n      await updateDoc(chatRef, {\r\n        lastMessage: messageText,\r\n        lastMessageTime: serverTimestamp(),\r\n      });\r\n\r\n      console.log(`‚úÖ [Chat: ${chatId}] Message sent successfully`);\r\n\r\n      // Auto-scroll\r\n      setTimeout(() => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n      }, 100);\r\n    } catch (error) {\r\n      console.error(`‚ùå [Chat: ${chatId}] Error sending message:`, error);\r\n      setInput(messageText);\r\n    }\r\n  };\r\n\r\n  if (!chat || !recipientEmail) {\r\n    return (\r\n      <Container darkMode={darkMode}>\r\n        <p>Loading chat...</p>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container darkMode={darkMode}>\r\n      <ChatHeader\r\n        recipientEmail={recipientEmail}\r\n        recipient={recipient}\r\n        isSelfChat={isSelfChat}\r\n        isMobile={isMobile}\r\n        onToggleSidebar={onToggleSidebar}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <MessagesContainer darkMode={darkMode}>\r\n        {messages.map((msg) => (\r\n          <Message\r\n            key={msg.id}\r\n            message={msg}\r\n            isOwnMessage={msg.user === user?.email}\r\n            darkMode={darkMode}\r\n          />\r\n        ))}\r\n        <div ref={messagesEndRef} />\r\n      </MessagesContainer>\r\n\r\n      <InputContainer darkMode={darkMode} onSubmit={sendMessage}>\r\n        <Input\r\n          darkMode={darkMode}\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          placeholder={isSelfChat ? \"Message yourself...\" : \"Type a message...\"}\r\n        />\r\n        <SendButton type=\"submit\" disabled={!input.trim()}>\r\n          Send\r\n        </SendButton>\r\n      </InputContainer>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default ChatScreen;\r\n\r\n// Styled Components\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  background-color: ${(props) => (props.darkMode ? \"#0d1418\" : \"#e5ddd5\")};\r\n`;\r\n\r\nconst MessagesContainer = styled.div`\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 20px;\r\n  background-color: ${(props) => (props.darkMode ? \"#0d1418\" : \"#e5ddd5\")};\r\n\r\n  ::-webkit-scrollbar {\r\n    width: 8px;\r\n  }\r\n\r\n  ::-webkit-scrollbar-track {\r\n    background: ${(props) => (props.darkMode ? \"#1e1e1e\" : \"#f1f1f1\")};\r\n  }\r\n\r\n  ::-webkit-scrollbar-thumb {\r\n    background: ${(props) => (props.darkMode ? \"#555\" : \"#888\")};\r\n    border-radius: 4px;\r\n  }\r\n\r\n  ::-webkit-scrollbar-thumb:hover {\r\n    background: ${(props) => (props.darkMode ? \"#777\" : \"#555\")};\r\n  }\r\n`;\r\n\r\nconst InputContainer = styled.form`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 10px;\r\n  background-color: ${(props) => (props.darkMode ? \"#1e1e1e\" : \"#f0f0f0\")};\r\n  border-top: 1px solid ${(props) => (props.darkMode ? \"#333\" : \"#ddd\")};\r\n`;\r\n\r\nconst Input = styled.input`\r\n  flex: 1;\r\n  padding: 12px 15px;\r\n  border: none;\r\n  border-radius: 25px;\r\n  outline: none;\r\n  background-color: ${(props) => (props.darkMode ? \"#2a2a2a\" : \"white\")};\r\n  color: ${(props) => (props.darkMode ? \"#e0e0e0\" : \"#000\")};\r\n  font-size: 15px;\r\n\r\n  ::placeholder {\r\n    color: ${(props) => (props.darkMode ? \"#888\" : \"#999\")};\r\n  }\r\n`;\r\n\r\nconst SendButton = styled.button`\r\n  margin-left: 10px;\r\n  padding: 10px 20px;\r\n  background-color: #25d366;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 25px;\r\n  cursor: pointer;\r\n  font-weight: 600;\r\n  transition: background-color 0.2s;\r\n\r\n  &:hover:not(:disabled) {\r\n    background-color: #20ba5a;\r\n  }\r\n\r\n  &:disabled {\r\n    background-color: #ccc;\r\n    cursor: not-allowed;\r\n  }\r\n\r\n  &:active:not(:disabled) {\r\n    transform: scale(0.98);\r\n  }\r\n`;"],"names":[],"mappings":"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","debugId":null}}]
}