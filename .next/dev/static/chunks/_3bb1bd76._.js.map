{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/utils/getRecipientEmail.js"],"sourcesContent":["// utils/getRecipientEmail.js\r\n\r\n/**\r\n * Get the recipient email for a chat (WhatsApp-style)\r\n * @param {string[]} users - Array of user emails in the chat\r\n * @param {Object} userLoggedIn - Current logged-in user\r\n * @returns {string|null} Recipient email or null\r\n */\r\nconst getRecipientEmail = (users, userLoggedIn) => {\r\n  // ===================================\r\n  // 1ï¸âƒ£ VALIDATION\r\n  // ===================================\r\n  if (!users || !Array.isArray(users) || !userLoggedIn?.email) {\r\n    return null;\r\n  }\r\n\r\n  const currentUserEmail = userLoggedIn.email.toLowerCase().trim();\r\n  \r\n  // Clean and normalize all emails\r\n  const cleanedUsers = users\r\n    .filter(email => email && typeof email === 'string')\r\n    .map(email => email.toLowerCase().trim());\r\n\r\n  // Chat must have at least 1 user\r\n  if (cleanedUsers.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  // ===================================\r\n  // 2ï¸âƒ£ SELF-CHAT DETECTION (Saved Messages)\r\n  // ===================================\r\n  // Get unique participants\r\n  const uniqueParticipants = [...new Set(cleanedUsers)];\r\n\r\n  // If there's only ONE unique participant and it's ME â†’ Self-chat\r\n  if (uniqueParticipants.length === 1 && uniqueParticipants[0] === currentUserEmail) {\r\n    return currentUserEmail;\r\n  }\r\n\r\n  // ===================================\r\n  // 3ï¸âƒ£ REGULAR CHAT - Find Other Person\r\n  // ===================================\r\n  // Find the first person who is NOT me\r\n  const recipient = cleanedUsers.find(email => email !== currentUserEmail);\r\n\r\n  if (recipient) {\r\n    return recipient;\r\n  }\r\n\r\n  // No valid recipient found\r\n  return null;\r\n};\r\n\r\nexport default getRecipientEmail;"],"names":[],"mappings":"AAAA,6BAA6B;AAE7B;;;;;CAKC;;;;AACD,MAAM,oBAAoB,CAAC,OAAO;IAChC,sCAAsC;IACtC,iBAAiB;IACjB,sCAAsC;IACtC,IAAI,CAAC,SAAS,CAAC,MAAM,OAAO,CAAC,UAAU,CAAC,cAAc,OAAO;QAC3D,OAAO;IACT;IAEA,MAAM,mBAAmB,aAAa,KAAK,CAAC,WAAW,GAAG,IAAI;IAE9D,iCAAiC;IACjC,MAAM,eAAe,MAClB,MAAM,CAAC,CAAA,QAAS,SAAS,OAAO,UAAU,UAC1C,GAAG,CAAC,CAAA,QAAS,MAAM,WAAW,GAAG,IAAI;IAExC,iCAAiC;IACjC,IAAI,aAAa,MAAM,KAAK,GAAG;QAC7B,OAAO;IACT;IAEA,sCAAsC;IACtC,2CAA2C;IAC3C,sCAAsC;IACtC,0BAA0B;IAC1B,MAAM,qBAAqB;WAAI,IAAI,IAAI;KAAc;IAErD,iEAAiE;IACjE,IAAI,mBAAmB,MAAM,KAAK,KAAK,kBAAkB,CAAC,EAAE,KAAK,kBAAkB;QACjF,OAAO;IACT;IAEA,sCAAsC;IACtC,uCAAuC;IACvC,sCAAsC;IACtC,sCAAsC;IACtC,MAAM,YAAY,aAAa,IAAI,CAAC,CAAA,QAAS,UAAU;IAEvD,IAAI,WAAW;QACb,OAAO;IACT;IAEA,2BAA2B;IAC3B,OAAO;AACT;uCAEe","debugId":null}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/components/MessageStatus.jsx"],"sourcesContent":["// components/ChatScreen/components/MessageStatus.jsx\r\n\r\nimport React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport DoneIcon from \"@mui/icons-material/Done\";\r\nimport DoneAllIcon from \"@mui/icons-material/DoneAll\";\r\nimport AccessTimeIcon from \"@mui/icons-material/AccessTime\";\r\nimport { MESSAGE_STATUS } from \"../constants\";\r\n\r\nfunction MessageStatus({ status, darkMode }) {\r\n  if (!status || status === MESSAGE_STATUS.SENT) {\r\n    // Single gray checkmark for sent\r\n    return (\r\n      <StatusIcon darkMode={darkMode}>\r\n        <DoneIcon style={{ fontSize: 16 }} />\r\n      </StatusIcon>\r\n    );\r\n  }\r\n\r\n  if (status === MESSAGE_STATUS.DELIVERED) {\r\n    // Double gray checkmarks for delivered\r\n    return (\r\n      <StatusIcon darkMode={darkMode}>\r\n        <DoneAllIcon style={{ fontSize: 16 }} />\r\n      </StatusIcon>\r\n    );\r\n  }\r\n\r\n  if (status === MESSAGE_STATUS.READ) {\r\n    // Double blue checkmarks for read\r\n    return (\r\n      <StatusIcon darkMode={darkMode} isRead={true}>\r\n        <DoneAllIcon style={{ fontSize: 16 }} />\r\n      </StatusIcon>\r\n    );\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport default MessageStatus;\r\n\r\nconst StatusIcon = styled.span`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  color: ${props => props.isRead ? '#53bdeb' : (props.darkMode ? '#8696a0' : '#667781')};\r\n  margin-left: 4px;\r\n`;\r\n\r\n// Styled Components\r\nconst StatusContainer = styled.span`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  margin-left: 4px;\r\n  vertical-align: middle;\r\n`;\r\n\r\nconst SingleCheck = styled(DoneIcon)`\r\n  font-size: 16px !important;\r\n  color: ${props => props.darkMode ? '#8696a0' : '#667781'};\r\n`;\r\n\r\nconst DoubleCheckGray = styled(DoneAllIcon)`\r\n  font-size: 16px !important;\r\n  color: ${props => props.darkMode ? '#8696a0' : '#667781'};\r\n`;\r\n\r\nconst DoubleCheckBlue = styled(DoneAllIcon)`\r\n  font-size: 16px !important;\r\n  color: #53bdeb;\r\n`;\r\n\r\nconst PendingIcon = styled(AccessTimeIcon)`\r\n  font-size: 14px !important;\r\n  color: ${props => props.darkMode ? '#8696a0' : '#667781'};\r\n  opacity: 0.6;\r\n`;"],"names":[],"mappings":"AAAA,qDAAqD;;;;;;AAErD;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAEA,SAAS,cAAc,EAAE,MAAM,EAAE,QAAQ,EAAE;IACzC,IAAI,CAAC,UAAU,WAAW,mJAAc,CAAC,IAAI,EAAE;QAC7C,iCAAiC;QACjC,qBACE,0JAAC;YAAW,UAAU;sBACpB,cAAA,0JAAC,yJAAQ;gBAAC,OAAO;oBAAE,UAAU;gBAAG;;;;;;;;;;;IAGtC;IAEA,IAAI,WAAW,mJAAc,CAAC,SAAS,EAAE;QACvC,uCAAuC;QACvC,qBACE,0JAAC;YAAW,UAAU;sBACpB,cAAA,0JAAC,4JAAW;gBAAC,OAAO;oBAAE,UAAU;gBAAG;;;;;;;;;;;IAGzC;IAEA,IAAI,WAAW,mJAAc,CAAC,IAAI,EAAE;QAClC,kCAAkC;QAClC,qBACE,0JAAC;YAAW,UAAU;YAAU,QAAQ;sBACtC,cAAA,0JAAC,4JAAW;gBAAC,OAAO;oBAAE,UAAU;gBAAG;;;;;;;;;;;IAGzC;IAEA,OAAO;AACT;KA7BS;uCA+BM;AAEf,MAAM,aAAa,6LAAM,CAAC,IAAI,CAAC;;;SAGtB,EAAE,CAAA,QAAS,MAAM,MAAM,GAAG,YAAa,MAAM,QAAQ,GAAG,YAAY,UAAW;;AAExF,CAAC;MALK;AAON,oBAAoB;AACpB,MAAM,kBAAkB,6LAAM,CAAC,IAAI,CAAC;;;;;AAKpC,CAAC;AAED,MAAM,cAAc,IAAA,6LAAM,EAAC,yJAAQ,CAAC,CAAC;;SAE5B,EAAE,CAAA,QAAS,MAAM,QAAQ,GAAG,YAAY,UAAU;AAC3D,CAAC;AAED,MAAM,kBAAkB,IAAA,6LAAM,EAAC,4JAAW,CAAC,CAAC;;SAEnC,EAAE,CAAA,QAAS,MAAM,QAAQ,GAAG,YAAY,UAAU;AAC3D,CAAC;AAED,MAAM,kBAAkB,IAAA,6LAAM,EAAC,4JAAW,CAAC,CAAC;;;AAG5C,CAAC;AAED,MAAM,cAAc,IAAA,6LAAM,EAAC,+JAAc,CAAC,CAAC;;SAElC,EAAE,CAAA,QAAS,MAAM,QAAQ,GAAG,YAAY,UAAU;;AAE3D,CAAC","debugId":null}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/Chat.js"],"sourcesContent":["// components/Chat.jsx\r\nimport React, { useEffect, useState, useContext, useMemo } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Avatar } from \"@mui/material\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { auth, db } from \"../firebase\";\r\nimport getRecipientEmail from \"../utils/getRecipientEmail\";\r\nimport { useRouter } from \"next/router\";\r\nimport { \r\n  collection, \r\n  query, \r\n  where, \r\n  orderBy, \r\n  limit,\r\n  onSnapshot \r\n} from \"firebase/firestore\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport MessageStatus from \"./ChatScreen/components/MessageStatus\";\r\nimport { MESSAGE_STATUS } from \"./ChatScreen/constants\";\r\nimport { DarkModeContext } from \"./DarkModeProvider\";\r\n\r\nconst Chat = React.memo(({ id, users, latestMessage: propLatestMessage, customDisplayName }) => {\r\n  const router = useRouter();\r\n  const [user] = useAuthState(auth);\r\n  const [latestMessage, setLatestMessage] = useState(propLatestMessage || null);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n\r\n  // Get dark mode context\r\n  const darkModeContext = useContext(DarkModeContext);\r\n  const { darkMode } = darkModeContext || { darkMode: false };\r\n\r\n  // âœ… MEMOIZED: Calculate recipient email\r\n  const recipientEmail = useMemo(() => {\r\n    if (!users || !user) return null;\r\n    return getRecipientEmail(users, user);\r\n  }, [users, user]);\r\n\r\n  // âœ… MEMOIZED: Check if self-chat\r\n  const isSelfChat = useMemo(() => {\r\n    if (!users || !user) return false;\r\n    const cleanUsers = [...new Set(users.filter(Boolean).map(e => e.toLowerCase()))];\r\n    return cleanUsers.length === 1 && cleanUsers[0] === user.email.toLowerCase();\r\n  }, [users, user]);\r\n\r\n  // âœ… MEMOIZED: Get display name (custom name or email)\r\n  const displayName = useMemo(() => {\r\n    if (isSelfChat) {\r\n      return customDisplayName || recipientEmail || user?.email;\r\n    }\r\n    return customDisplayName || recipientEmail;\r\n  }, [customDisplayName, recipientEmail, isSelfChat, user?.email]);\r\n\r\n  // Get recipient info - only query if recipientEmail exists\r\n  const recipientQuery = recipientEmail && !isSelfChat\r\n    ? query(collection(db, \"users\"), where(\"email\", \"==\", recipientEmail))\r\n    : null;\r\n  const [recipientSnapshot] = useCollection(recipientQuery);\r\n  const recipient = recipientSnapshot?.docs?.[0]?.data();\r\n\r\n  // Real-time listener for latest message and unread count\r\n  useEffect(() => {\r\n    // Exit early if required data is missing\r\n    if (!id || !user || !recipientEmail) {\r\n      return;\r\n    }\r\n\r\n    // Real-time listener for latest message\r\n    const messagesRef = collection(db, \"chats\", id, \"messages\");\r\n    const q = query(messagesRef, orderBy(\"timestamp\", \"desc\"), limit(1));\r\n    \r\n    const unsubscribeMessages = onSnapshot(\r\n      q, \r\n      (snapshot) => {\r\n        if (!snapshot.empty) {\r\n          const messageData = snapshot.docs[0].data();\r\n          setLatestMessage({\r\n            id: snapshot.docs[0].id,\r\n            ...messageData,\r\n            timestamp: messageData.timestamp?.toMillis(),\r\n          });\r\n        } else {\r\n          setLatestMessage(null);\r\n        }\r\n      }, \r\n      (error) => {\r\n        console.error(\"Error listening to messages:\", error);\r\n      }\r\n    );\r\n\r\n    // Real-time listener for unread count (skip for self-chat)\r\n    let unsubscribeUnread = () => {};\r\n    \r\n    if (!isSelfChat && recipientEmail) {\r\n      const unreadQuery = query(\r\n        messagesRef,\r\n        where(\"user\", \"==\", recipientEmail),\r\n        where(\"status\", \"in\", [MESSAGE_STATUS.SENT, MESSAGE_STATUS.DELIVERED])\r\n      );\r\n      \r\n      unsubscribeUnread = onSnapshot(\r\n        unreadQuery, \r\n        (snapshot) => {\r\n          setUnreadCount(snapshot.docs.length);\r\n        }, \r\n        (error) => {\r\n          console.error(\"Error listening to unread count:\", error);\r\n          setUnreadCount(0);\r\n        }\r\n      );\r\n    }\r\n\r\n    return () => {\r\n      unsubscribeMessages();\r\n      unsubscribeUnread();\r\n    };\r\n  }, [id, user, recipientEmail, isSelfChat]);\r\n\r\n  const enterChat = () => {\r\n    router.push(`/chat/${id}`);\r\n  };\r\n\r\n  // âœ… MEMOIZED: Format timestamp\r\n  const formatTimestamp = useMemo(() => {\r\n    return (timestamp) => {\r\n      if (!timestamp) return \"\";\r\n      \r\n      const messageDate = new Date(timestamp);\r\n      const today = new Date();\r\n      const yesterday = new Date(today);\r\n      yesterday.setDate(yesterday.getDate() - 1);\r\n\r\n      // Check if today\r\n      if (messageDate.toDateString() === today.toDateString()) {\r\n        return messageDate.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n      }\r\n      \r\n      // Check if yesterday\r\n      if (messageDate.toDateString() === yesterday.toDateString()) {\r\n        return \"Yesterday\";\r\n      }\r\n      \r\n      // Check if within this week\r\n      const weekAgo = new Date(today);\r\n      weekAgo.setDate(weekAgo.getDate() - 7);\r\n      if (messageDate > weekAgo) {\r\n        return messageDate.toLocaleDateString([], { weekday: 'short' });\r\n      }\r\n      \r\n      // Older messages\r\n      return messageDate.toLocaleDateString([], { month: 'short', day: 'numeric' });\r\n    };\r\n  }, []);\r\n\r\n  // âœ… MEMOIZED: Truncate message\r\n  const truncateMessage = useMemo(() => {\r\n    return (message, maxLength = 35) => {\r\n      if (!message) return \"\";\r\n      if (message.length <= maxLength) return message;\r\n      return message.substring(0, maxLength) + \"...\";\r\n    };\r\n  }, []);\r\n\r\n  // âœ… MEMOIZED: Get message preview\r\n  const messagePreview = useMemo(() => {\r\n    if (!latestMessage) return \"No messages yet\";\r\n\r\n    // Location message\r\n    if (latestMessage.location) {\r\n      return \"ðŸ“ Location\";\r\n    }\r\n\r\n    // Voice message\r\n    if (latestMessage.voiceURL) {\r\n      return \"ðŸŽ¤ Voice message\";\r\n    }\r\n\r\n    // File attachment\r\n    if (latestMessage.fileURL) {\r\n      if (latestMessage.fileType?.startsWith('image/')) {\r\n        return \"ðŸ“· Photo\";\r\n      }\r\n      if (latestMessage.fileType?.startsWith('video/')) {\r\n        return \"ðŸŽ¥ Video\";\r\n      }\r\n      if (latestMessage.fileType?.startsWith('audio/')) {\r\n        return \"ðŸŽµ Audio\";\r\n      }\r\n      return `ðŸ“Ž ${truncateMessage(latestMessage.fileName || 'File', 25)}`;\r\n    }\r\n\r\n    // Regular text message\r\n    return truncateMessage(latestMessage.message);\r\n  }, [latestMessage, truncateMessage]);\r\n\r\n  const isOwnMessage = latestMessage?.user === user?.email;\r\n  const hasUnread = unreadCount > 0 && !isOwnMessage;\r\n\r\n  // Don't render if missing essential data\r\n  if (!recipientEmail) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Container onClick={enterChat} darkMode={darkMode}>\r\n      {isSelfChat ? (\r\n        <UserAvatar src={user?.photoURL}>{user?.email?.[0]?.toUpperCase()}</UserAvatar>\r\n      ) : recipient ? (\r\n        <UserAvatar src={recipient?.photoURL} />\r\n      ) : (\r\n        <UserAvatar>{recipientEmail?.[0]?.toUpperCase()}</UserAvatar>\r\n      )}\r\n      <ChatContent>\r\n        <ChatHeader>\r\n          <RecipientName darkMode={darkMode}>\r\n            {isSelfChat ? `${displayName} (You)` : displayName}\r\n          </RecipientName>\r\n          {latestMessage && (\r\n            <MessageTime darkMode={darkMode}>\r\n              {formatTimestamp(latestMessage.timestamp)}\r\n            </MessageTime>\r\n          )}\r\n        </ChatHeader>\r\n        <LastMessageContainer>\r\n          <LastMessage isOwnMessage={isOwnMessage}>\r\n            {isOwnMessage && latestMessage && (\r\n              <StatusWrapper>\r\n                <MessageStatus \r\n                  status={latestMessage.status || MESSAGE_STATUS.SENT}\r\n                  darkMode={darkMode}\r\n                />\r\n              </StatusWrapper>\r\n            )}\r\n            <MessageText hasUnread={hasUnread} darkMode={darkMode}>\r\n              {messagePreview}\r\n            </MessageText>\r\n          </LastMessage>\r\n          {hasUnread && (\r\n            <UnreadBadge darkMode={darkMode}>{unreadCount}</UnreadBadge>\r\n          )}\r\n        </LastMessageContainer>\r\n      </ChatContent>\r\n    </Container>\r\n  );\r\n}, (prevProps, nextProps) => {\r\n  // âœ… Custom comparison - only re-render if these change\r\n  return (\r\n    prevProps.id === nextProps.id &&\r\n    JSON.stringify(prevProps.users) === JSON.stringify(nextProps.users) &&\r\n    prevProps.latestMessage?.timestamp === nextProps.latestMessage?.timestamp &&\r\n    prevProps.latestMessage?.message === nextProps.latestMessage?.message &&\r\n    prevProps.customDisplayName === nextProps.customDisplayName\r\n  );\r\n});\r\n\r\nChat.displayName = 'Chat';\r\n\r\nexport default Chat;\r\n\r\n// Styled Components\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  padding: 15px;\r\n  word-break: break-word;\r\n  transition: background-color 0.2s;\r\n\r\n  :hover {\r\n    background-color: ${props => props.darkMode ? '#2a2a2a' : '#f5f5f5'};\r\n  }\r\n`;\r\n\r\nconst UserAvatar = styled(Avatar)`\r\n  margin: 5px;\r\n  margin-right: 15px;\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst ChatContent = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  min-width: 0;\r\n`;\r\n\r\nconst ChatHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 4px;\r\n`;\r\n\r\nconst RecipientName = styled.p`\r\n  margin: 0;\r\n  font-weight: 600;\r\n  font-size: 15px;\r\n  color: ${props => props.darkMode ? '#e0e0e0' : '#000'};\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  flex: 1;\r\n`;\r\n\r\nconst MessageTime = styled.span`\r\n  font-size: 12px;\r\n  color: ${props => props.darkMode ? '#8696a0' : '#667781'};\r\n  margin-left: 8px;\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst LastMessageContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  gap: 8px;\r\n`;\r\n\r\nconst LastMessage = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  flex: 1;\r\n  min-width: 0;\r\n`;\r\n\r\nconst StatusWrapper = styled.span`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst MessageText = styled.span`\r\n  font-size: 14px;\r\n  color: ${props => {\r\n    if (props.hasUnread) {\r\n      return props.darkMode ? '#e0e0e0' : '#000';\r\n    }\r\n    return props.darkMode ? '#8696a0' : '#667781';\r\n  }};\r\n  font-weight: ${props => props.hasUnread ? '600' : '400'};\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  flex: 1;\r\n`;\r\n\r\nconst UnreadBadge = styled.div`\r\n  background-color: ${props => props.darkMode ? '#00a884' : '#25d366'};\r\n  color: white;\r\n  border-radius: 50%;\r\n  min-width: 20px;\r\n  height: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n  padding: 0 6px;\r\n  flex-shrink: 0;\r\n`;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 674, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/Sidebar.js"],"sourcesContent":["// components/Sidebar.jsx\r\nimport React, { useState, useContext, useEffect, useMemo, useCallback } from \"react\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { auth, db } from \"../firebase\";\r\nimport styled from \"styled-components\";\r\nimport Avatar from \"@mui/material/Avatar\";\r\nimport Button from \"@mui/material/Button\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport ChatIcon from \"@mui/icons-material/Chat\";\r\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\r\nimport SearchIcon from \"@mui/icons-material/Search\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport ArchiveIcon from \"@mui/icons-material/Archive\";\r\nimport UnarchiveIcon from \"@mui/icons-material/Unarchive\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport BlockIcon from \"@mui/icons-material/Block\";\r\nimport PersonOffIcon from \"@mui/icons-material/PersonOff\";\r\nimport SettingsIcon from \"@mui/icons-material/Settings\";\r\nimport InfoIcon from \"@mui/icons-material/Info\";\r\nimport Chat from \"./Chat\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport * as EmailValidator from \"email-validator\";\r\nimport { \r\n  collection, \r\n  query, \r\n  where, \r\n  addDoc, \r\n  doc, \r\n  updateDoc,\r\n  arrayUnion,\r\n  arrayRemove,\r\n  setDoc,\r\n  orderBy,\r\n  limit,\r\n  getDocs,\r\n  getDoc,\r\n} from \"firebase/firestore\";\r\nimport Menu from \"@mui/material/Menu\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport DialogTitle from \"@mui/material/DialogTitle\";\r\nimport DialogContent from \"@mui/material/DialogContent\";\r\nimport DialogActions from \"@mui/material/DialogActions\";\r\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\r\nimport Switch from \"@mui/material/Switch\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport List from \"@mui/material/List\";\r\nimport ListItem from \"@mui/material/ListItem\";\r\nimport ListItemText from \"@mui/material/ListItemText\";\r\nimport ListItemSecondaryAction from \"@mui/material/ListItemSecondaryAction\";\r\nimport { DarkModeContext } from \"./DarkModeProvider\";\r\n\r\nconst Sidebar = React.memo(({ isMobile, sidebarOpen, setSidebarOpen }) => {\r\n  const [user] = useAuthState(auth);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [headerAnchorEl, setHeaderAnchorEl] = useState(null);\r\n  const [selectedChatId, setSelectedChatId] = useState(null);\r\n  const [selectedChatUsers, setSelectedChatUsers] = useState(null);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [settingsOpen, setSettingsOpen] = useState(false);\r\n  const [aboutOpen, setAboutOpen] = useState(false);\r\n  const [blockedUsersOpen, setBlockedUsersOpen] = useState(false);\r\n  const [chatsList, setChatsList] = useState([]);\r\n  const [displayNames, setDisplayNames] = useState({});\r\n  const [showArchived, setShowArchived] = useState(false);\r\n  \r\n  // Get dark mode context\r\n  const darkModeContext = useContext(DarkModeContext);\r\n  const { darkMode, toggleDarkMode } = darkModeContext || { darkMode: false, toggleDarkMode: () => {} };\r\n\r\n  const userChatsRef = user\r\n    ? query(\r\n        collection(db, \"chats\"),\r\n        where(\"users\", \"array-contains\", user.email)\r\n      )\r\n    : null;\r\n\r\n  const [chatsSnapshot, loading, error] = useCollection(userChatsRef);\r\n\r\n  // Get current user document to check blocked users\r\n  const userDocRef = user ? doc(db, \"users\", user.uid) : null;\r\n  const [userDocSnapshot] = useCollection(userDocRef ? query(collection(db, \"users\"), where(\"__name__\", \"==\", user.uid)) : null);\r\n  const currentUserData = userDocSnapshot?.docs?.[0]?.data();\r\n  const blockedUsers = currentUserData?.blockedUsers || [];\r\n\r\n  // âœ… Fetch display names for all contacts\r\n  useEffect(() => {\r\n    if (!user || !chatsSnapshot) return;\r\n\r\n    const fetchDisplayNames = async () => {\r\n      const names = {};\r\n      \r\n      // Get all unique recipient emails\r\n      const recipientEmails = new Set();\r\n      chatsSnapshot.docs.forEach((chat) => {\r\n        const chatUsers = chat.data().users || [];\r\n        chatUsers.forEach((email) => {\r\n          if (email !== user.email) {\r\n            recipientEmails.add(email);\r\n          }\r\n        });\r\n      });\r\n\r\n      // Fetch display names for each recipient\r\n      await Promise.all(\r\n        Array.from(recipientEmails).map(async (recipientEmail) => {\r\n          try {\r\n            const contactRef = doc(db, \"users\", user.uid, \"contacts\", recipientEmail);\r\n            const contactSnap = await getDoc(contactRef);\r\n            \r\n            if (contactSnap.exists()) {\r\n              names[recipientEmail] = contactSnap.data().displayName;\r\n            }\r\n          } catch (error) {\r\n            console.error(`Error fetching display name for ${recipientEmail}:`, error);\r\n          }\r\n        })\r\n      );\r\n\r\n      setDisplayNames(names);\r\n    };\r\n\r\n    fetchDisplayNames();\r\n  }, [user, chatsSnapshot]);\r\n\r\n  // âœ… OPTIMIZED: Load and sort chats with cleaned users array\r\n  useEffect(() => {\r\n    if (!chatsSnapshot || !user) {\r\n      setChatsList([]);\r\n      return;\r\n    }\r\n\r\n    const loadChatsWithLatestMessage = async () => {\r\n      const chatsWithMessages = await Promise.all(\r\n        chatsSnapshot.docs\r\n          .filter((chat) => {\r\n            const deletedBy = chat.data().deletedBy || [];\r\n            const archivedBy = chat.data().archivedBy || [];\r\n            \r\n            // Don't show deleted chats\r\n            if (deletedBy.includes(user.email)) {\r\n              return false;\r\n            }\r\n            \r\n            // Filter based on archive view\r\n            const isArchived = archivedBy.includes(user.email);\r\n            return showArchived ? isArchived : !isArchived;\r\n          })\r\n          .map(async (chat) => {\r\n            try {\r\n              const chatData = chat.data();\r\n              \r\n              // âœ… FIXED: Validate and clean users array\r\n              if (!chatData.users || !Array.isArray(chatData.users)) {\r\n                console.error(`âŒ Invalid users array for chat ${chat.id}:`, chatData.users);\r\n                return null;\r\n              }\r\n              \r\n              // âœ… FIXED: Remove duplicates for display (but keep original for self-chat detection)\r\n              const cleanUsers = chatData.users.filter(email => email && typeof email === 'string');\r\n              \r\n              const messagesRef = collection(db, \"chats\", chat.id, \"messages\");\r\n              const q = query(messagesRef, orderBy(\"timestamp\", \"desc\"), limit(1));\r\n              const snapshot = await getDocs(q);\r\n              \r\n              const latestMessage = snapshot.empty \r\n                ? null \r\n                : {\r\n                    ...snapshot.docs[0].data(),\r\n                    timestamp: snapshot.docs[0].data().timestamp?.toMillis() || 0\r\n                  };\r\n\r\n              return {\r\n                id: chat.id,\r\n                data: {\r\n                  ...chatData,\r\n                  users: cleanUsers, // âœ… Clean users array\r\n                },\r\n                latestMessage,\r\n                latestTimestamp: latestMessage?.timestamp || 0,\r\n              };\r\n            } catch (error) {\r\n              console.error(\"Error loading message for chat:\", chat.id, error);\r\n              return {\r\n                id: chat.id,\r\n                data: chat.data(),\r\n                latestMessage: null,\r\n                latestTimestamp: 0,\r\n              };\r\n            }\r\n          })\r\n      );\r\n\r\n      // âœ… Filter out any null entries\r\n      const validChats = chatsWithMessages.filter(Boolean);\r\n\r\n      // Sort by latest message timestamp (newest first)\r\n      const sortedChats = validChats.sort((a, b) => {\r\n        return b.latestTimestamp - a.latestTimestamp;\r\n      });\r\n\r\n      setChatsList(sortedChats);\r\n    };\r\n\r\n    loadChatsWithLatestMessage();\r\n  }, [chatsSnapshot, user, showArchived]);\r\n\r\n  // âœ… Toggle archive view\r\n  const toggleArchiveView = useCallback(() => {\r\n    setShowArchived(prev => !prev);\r\n  }, []);\r\n\r\n  // âœ… MEMOIZED: Check if chat already exists\r\n  const chatAlreadyExist = useCallback((recipientEmail) => {\r\n    if (!chatsSnapshot) return false;\r\n    \r\n    if (recipientEmail === user.email) {\r\n      return !!chatsSnapshot.docs.find((chat) => {\r\n        const users = chat.data().users;\r\n        return users.length === 2 && users[0] === user.email && users[1] === user.email;\r\n      });\r\n    }\r\n    \r\n    return !!chatsSnapshot.docs.find((chat) => {\r\n      const users = chat.data().users;\r\n      return users.includes(recipientEmail) && users.includes(user.email);\r\n    });\r\n  }, [chatsSnapshot, user]);\r\n\r\n  // âœ… MEMOIZED: Create chat function\r\n  const createChat = useCallback(async () => {\r\n    if (!user) {\r\n      console.error(\"No user logged in\");\r\n      return;\r\n    }\r\n\r\n    const input = prompt(\r\n      \"Please enter an email address for the user you wish to chat with\"\r\n    );\r\n    \r\n    if (!input) {\r\n      return;\r\n    }\r\n\r\n    if (!EmailValidator.validate(input)) {\r\n      alert(\"Please enter a valid email address\");\r\n      return;\r\n    }\r\n\r\n    if (chatAlreadyExist(input)) {\r\n      alert(\"Chat already exists with this user\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await addDoc(collection(db, \"chats\"), {\r\n        users: [user.email, input],\r\n        deletedBy: [],\r\n        archivedBy: [],\r\n        createdAt: new Date(),\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error creating chat:\", error);\r\n      alert(`Failed to create chat: ${error.message}`);\r\n    }\r\n  }, [user, chatAlreadyExist]);\r\n\r\n  // âœ… MEMOIZED: Menu handlers\r\n  const handleMenuOpen = useCallback((event, chatId, chatUsers) => {\r\n    setAnchorEl(event.currentTarget);\r\n    setSelectedChatId(chatId);\r\n    setSelectedChatUsers(chatUsers);\r\n  }, []);\r\n\r\n  const handleMenuClose = useCallback(() => {\r\n    setAnchorEl(null);\r\n    setSelectedChatId(null);\r\n    setSelectedChatUsers(null);\r\n  }, []);\r\n\r\n  const handleHeaderMenuOpen = useCallback((event) => {\r\n    setHeaderAnchorEl(event.currentTarget);\r\n  }, []);\r\n\r\n  const handleHeaderMenuClose = useCallback(() => {\r\n    setHeaderAnchorEl(null);\r\n  }, []);\r\n\r\n  const handleSettingsOpen = useCallback(() => {\r\n    setSettingsOpen(true);\r\n    handleHeaderMenuClose();\r\n  }, [handleHeaderMenuClose]);\r\n\r\n  const handleSettingsClose = useCallback(() => {\r\n    setSettingsOpen(false);\r\n  }, []);\r\n\r\n  const handleAboutOpen = useCallback(() => {\r\n    setAboutOpen(true);\r\n    handleHeaderMenuClose();\r\n  }, [handleHeaderMenuClose]);\r\n\r\n  const handleAboutClose = useCallback(() => {\r\n    setAboutOpen(false);\r\n  }, []);\r\n\r\n  const handleBlockedUsersOpen = useCallback(() => {\r\n    setBlockedUsersOpen(true);\r\n    handleHeaderMenuClose();\r\n  }, [handleHeaderMenuClose]);\r\n\r\n  const handleBlockedUsersClose = useCallback(() => {\r\n    setBlockedUsersOpen(false);\r\n  }, []);\r\n\r\n  // âœ… MEMOIZED: Archive chat\r\n  const archiveChat = useCallback(async () => {\r\n    if (!selectedChatId || !user) return;\r\n    try {\r\n      const chatRef = doc(db, \"chats\", selectedChatId);\r\n      const chatDoc = await getDoc(chatRef);\r\n      const archivedBy = chatDoc.data()?.archivedBy || [];\r\n      const isArchived = archivedBy.includes(user.email);\r\n\r\n      if (isArchived) {\r\n        // Unarchive\r\n        await updateDoc(chatRef, {\r\n          archivedBy: arrayRemove(user.email),\r\n        });\r\n        alert(\"Chat unarchived\");\r\n      } else {\r\n        // Archive\r\n        await updateDoc(chatRef, {\r\n          archivedBy: arrayUnion(user.email),\r\n        });\r\n        alert(\"Chat archived\");\r\n      }\r\n      \r\n      handleMenuClose();\r\n    } catch (error) {\r\n      console.error(\"Error archiving/unarchiving chat:\", error);\r\n      alert(\"Failed to archive/unarchive chat\");\r\n    }\r\n  }, [selectedChatId, user, handleMenuClose]);\r\n\r\n  // âœ… MEMOIZED: Delete chat\r\n  const deleteChat = useCallback(async () => {\r\n    if (!selectedChatId || !user) return;\r\n    try {\r\n      const chatRef = doc(db, \"chats\", selectedChatId);\r\n      await updateDoc(chatRef, {\r\n        deletedBy: arrayUnion(user.email),\r\n      });\r\n      handleMenuClose();\r\n      alert(\"Chat deleted\");\r\n    } catch (error) {\r\n      console.error(\"Error deleting chat:\", error);\r\n      alert(\"Failed to delete chat\");\r\n    }\r\n  }, [selectedChatId, user, handleMenuClose]);\r\n\r\n  // âœ… MEMOIZED: Block user\r\n  const blockUser = useCallback(async () => {\r\n    if (!selectedChatUsers || !user) return;\r\n    \r\n    const recipientEmail = selectedChatUsers.find((email) => email !== user.email);\r\n    \r\n    if (!recipientEmail || recipientEmail === user.email) {\r\n      alert(\"You cannot block yourself\");\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const userDocRef = doc(db, \"users\", user.uid);\r\n      \r\n      await setDoc(userDocRef, {\r\n        email: user.email,\r\n        blockedUsers: arrayUnion(recipientEmail),\r\n      }, { merge: true });\r\n      \r\n      handleMenuClose();\r\n      alert(`${recipientEmail} has been blocked. They can no longer send you messages.`);\r\n    } catch (error) {\r\n      console.error(\"Error blocking user:\", error);\r\n      alert(\"Failed to block user\");\r\n    }\r\n  }, [selectedChatUsers, user, handleMenuClose]);\r\n\r\n  // âœ… MEMOIZED: Unblock user\r\n  const unblockUser = useCallback(async (emailToUnblock) => {\r\n    if (!user) return;\r\n    \r\n    try {\r\n      const userDocRef = doc(db, \"users\", user.uid);\r\n      \r\n      await updateDoc(userDocRef, {\r\n        blockedUsers: arrayRemove(emailToUnblock),\r\n      });\r\n      \r\n      alert(`${emailToUnblock} has been unblocked`);\r\n    } catch (error) {\r\n      console.error(\"Error unblocking user:\", error);\r\n      alert(\"Failed to unblock user\");\r\n    }\r\n  }, [user]);\r\n\r\n  // âœ… MEMOIZED: Check if user is blocked\r\n  const isUserBlocked = useCallback(() => {\r\n    if (!selectedChatUsers || !user) return false;\r\n    const recipientEmail = selectedChatUsers.find((email) => email !== user.email);\r\n    if (!recipientEmail) return false;\r\n    return blockedUsers.includes(recipientEmail);\r\n  }, [selectedChatUsers, user, blockedUsers]);\r\n\r\n  // âœ… Check if selected chat is archived\r\n  const isSelectedChatArchived = useCallback(() => {\r\n    if (!selectedChatId || !chatsSnapshot) return false;\r\n    const chat = chatsSnapshot.docs.find(doc => doc.id === selectedChatId);\r\n    if (!chat) return false;\r\n    const archivedBy = chat.data()?.archivedBy || [];\r\n    return archivedBy.includes(user.email);\r\n  }, [selectedChatId, chatsSnapshot, user]);\r\n\r\n  // âœ… Get display name for a recipient\r\n  const getDisplayName = useCallback((recipientEmail) => {\r\n    return displayNames[recipientEmail] || null;\r\n  }, [displayNames]);\r\n\r\n  // âœ… MEMOIZED: Filter chats by search term\r\n  const filteredChats = useMemo(() => {\r\n    if (!searchTerm.trim()) return chatsList;\r\n    \r\n    const searchLower = searchTerm.toLowerCase();\r\n    return chatsList.filter((chat) => {\r\n      const chatUsers = chat.data.users || [];\r\n      const otherUser = chatUsers.find((email) => email !== user.email);\r\n      \r\n      if (!otherUser) {\r\n        return user.email?.toLowerCase().includes(searchLower);\r\n      }\r\n      \r\n      // Search by both email and display name\r\n      const displayName = getDisplayName(otherUser);\r\n      return otherUser?.toLowerCase().includes(searchLower) ||\r\n             displayName?.toLowerCase().includes(searchLower);\r\n    });\r\n  }, [chatsList, searchTerm, user, getDisplayName]);\r\n\r\n  // âœ… Count archived chats\r\n  const archivedCount = useMemo(() => {\r\n    if (!chatsSnapshot || !user) return 0;\r\n    return chatsSnapshot.docs.filter(chat => {\r\n      const archivedBy = chat.data()?.archivedBy || [];\r\n      const deletedBy = chat.data()?.deletedBy || [];\r\n      return archivedBy.includes(user.email) && !deletedBy.includes(user.email);\r\n    }).length;\r\n  }, [chatsSnapshot, user]);\r\n\r\n  if (!user) return <Container darkMode={darkMode}>Loading...</Container>;\r\n\r\n  return (\r\n    <>\r\n      {/* Overlay for mobile */}\r\n      {isMobile && sidebarOpen && (\r\n        <Overlay onClick={() => setSidebarOpen(false)} />\r\n      )}\r\n\r\n      <Container \r\n        darkMode={darkMode} \r\n        isMobile={isMobile}\r\n        sidebarOpen={sidebarOpen}\r\n      >\r\n        <Header darkMode={darkMode}>\r\n          <UserAvatar onClick={() => auth.signOut()} src={user.photoURL} />\r\n          <IconsContainer>\r\n            <IconButton onClick={toggleArchiveView} title={showArchived ? \"Show active chats\" : \"Show archived chats\"}>\r\n              {showArchived ? (\r\n                <UnarchiveIcon style={{ color: darkMode ? '#25D366' : '#128C7E' }}/>\r\n              ) : (\r\n                <ChatIcon style={{ color: darkMode ? 'gray' : 'inherit' }}/>\r\n              )}\r\n            </IconButton>\r\n            {!showArchived && archivedCount > 0 && (\r\n              <ArchiveBadge darkMode={darkMode}>{archivedCount}</ArchiveBadge>\r\n            )}\r\n            <IconButton onClick={handleHeaderMenuOpen}>\r\n              <MoreVertIcon style={{ color: darkMode ? 'gray' : 'inherit' }}/>\r\n            </IconButton>\r\n            {isMobile && (\r\n              <IconButton onClick={() => setSidebarOpen(false)}>\r\n                <CloseIcon style={{ color: darkMode ? 'gray' : 'inherit' }}/>\r\n              </IconButton>\r\n            )}\r\n          </IconsContainer>\r\n        </Header>\r\n\r\n        {showArchived && (\r\n          <ArchiveHeader darkMode={darkMode}>\r\n            <ArchiveIcon style={{ fontSize: 20, marginRight: 8 }} />\r\n            <span>Archived Chats ({archivedCount})</span>\r\n          </ArchiveHeader>\r\n        )}\r\n\r\n        <Search darkMode={darkMode}>\r\n          <SearchIcon />\r\n          <SearchInput \r\n            darkMode={darkMode}\r\n            placeholder={showArchived ? \"Search archived chats\" : \"Search in chats\"}\r\n            type=\"text\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n          />\r\n        </Search>\r\n\r\n        {!showArchived && (\r\n          <SidebarButton onClick={createChat} disabled={loading}>\r\n            Start a new chat\r\n          </SidebarButton>\r\n        )}\r\n\r\n        {loading ? (\r\n          <LoadingContainer darkMode={darkMode}>\r\n            <Typography>Loading chats...</Typography>\r\n          </LoadingContainer>\r\n        ) : filteredChats.length === 0 ? (\r\n          <EmptyState darkMode={darkMode}>\r\n            <Typography variant=\"body2\">\r\n              {showArchived ? \"No archived chats\" : \"No chats yet\"}\r\n            </Typography>\r\n          </EmptyState>\r\n        ) : (\r\n          filteredChats.map((chat) => {\r\n            const chatUsers = chat.data.users || [];\r\n            const otherUser = chatUsers.find((email) => email !== user.email);\r\n            const customDisplayName = otherUser ? getDisplayName(otherUser) : null;\r\n            \r\n            return (\r\n              <ChatWrapper key={chat.id} darkMode={darkMode}>\r\n                <Chat \r\n                  id={chat.id} \r\n                  users={chat.data.users} \r\n                  latestMessage={chat.latestMessage}\r\n                  customDisplayName={customDisplayName}\r\n                />\r\n                <OptionsButton\r\n                  onClick={(e) => handleMenuOpen(e, chat.id, chat.data.users)}\r\n                >\r\n                  <MoreVertIcon fontSize=\"small\" />\r\n                </OptionsButton>\r\n              </ChatWrapper>\r\n            );\r\n          })\r\n        )}\r\n\r\n        {/* Header Menu */}\r\n        <Menu\r\n          anchorEl={headerAnchorEl}\r\n          open={Boolean(headerAnchorEl)}\r\n          onClose={handleHeaderMenuClose}\r\n          PaperProps={{\r\n            style: {\r\n              backgroundColor: darkMode ? '#2a2a2a' : 'white',\r\n              color: darkMode ? '#e0e0e0' : 'black',\r\n            },\r\n          }}\r\n        >\r\n          <MenuItem onClick={handleSettingsOpen}>\r\n            <SettingsIcon fontSize=\"small\" style={{ marginRight: 8, color: darkMode ? '#64b5f6' : '#1976d2' }} />\r\n            Settings\r\n          </MenuItem>\r\n          <MenuItem onClick={handleBlockedUsersOpen}>\r\n            <PersonOffIcon fontSize=\"small\" style={{ marginRight: 8, color: darkMode ? '#ff9800' : '#f57c00' }} />\r\n            Blocked Users\r\n          </MenuItem>\r\n          <MenuItem onClick={handleAboutOpen}>\r\n            <InfoIcon fontSize=\"small\" style={{ marginRight: 8, color: darkMode ? '#4caf50' : '#2e7d32' }} />\r\n            About\r\n          </MenuItem>\r\n        </Menu>\r\n\r\n        {/* Chat Context Menu */}\r\n        <Menu\r\n          anchorEl={anchorEl}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleMenuClose}\r\n          PaperProps={{\r\n            style: {\r\n              backgroundColor: darkMode ? '#2a2a2a' : 'white',\r\n              color: darkMode ? '#e0e0e0' : 'black',\r\n            },\r\n          }}\r\n        >\r\n          <MenuItem onClick={archiveChat}>\r\n            {isSelectedChatArchived() ? (\r\n              <>\r\n                <UnarchiveIcon fontSize=\"small\" style={{ marginRight: 8, color: darkMode ? '#64b5f6' : '#1976d2' }} />\r\n                Unarchive Chat\r\n              </>\r\n            ) : (\r\n              <>\r\n                <ArchiveIcon fontSize=\"small\" style={{ marginRight: 8, color: darkMode ? '#64b5f6' : '#1976d2' }} />\r\n                Archive Chat\r\n              </>\r\n            )}\r\n          </MenuItem>\r\n          \r\n          {selectedChatUsers && selectedChatUsers.find((email) => email !== user.email) && (\r\n            <>\r\n              {isUserBlocked() ? (\r\n                <MenuItem onClick={() => {\r\n                  const recipientEmail = selectedChatUsers.find((email) => email !== user.email);\r\n                  unblockUser(recipientEmail);\r\n                  handleMenuClose();\r\n                }}>\r\n                  <PersonOffIcon fontSize=\"small\" style={{ marginRight: 8, color: darkMode ? '#4caf50' : '#2e7d32' }} />\r\n                  Unblock User\r\n                </MenuItem>\r\n              ) : (\r\n                <MenuItem onClick={blockUser}>\r\n                  <BlockIcon fontSize=\"small\" style={{ marginRight: 8, color: darkMode ? '#ff9800' : '#f57c00' }} />\r\n                  Block User\r\n                </MenuItem>\r\n              )}\r\n            </>\r\n          )}\r\n          \r\n          <MenuItem onClick={deleteChat}>\r\n            <DeleteIcon fontSize=\"small\" style={{ marginRight: 8, color: '#f44336' }} />\r\n            Delete Chat\r\n          </MenuItem>\r\n        </Menu>\r\n\r\n        <Dialog \r\n          open={settingsOpen} \r\n          onClose={handleSettingsClose} \r\n          maxWidth=\"sm\" \r\n          fullWidth\r\n          PaperProps={{\r\n            style: {\r\n              backgroundColor: darkMode ? '#1e1e1e' : 'white',\r\n              color: darkMode ? '#e0e0e0' : 'black',\r\n            },\r\n          }}\r\n        >\r\n          <DialogTitle>\r\n            <DialogTitleContainer>\r\n              <SettingsIcon style={{ marginRight: 8, color: darkMode ? '#64b5f6' : '#1976d2' }} />\r\n              Settings\r\n            </DialogTitleContainer>\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={darkMode}\r\n                  onChange={toggleDarkMode}\r\n                  color=\"primary\"\r\n                />\r\n              }\r\n              label=\"Dark Mode\"\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={handleSettingsClose}>Close</Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n\r\n        <Dialog \r\n          open={blockedUsersOpen} \r\n          onClose={handleBlockedUsersClose} \r\n          maxWidth=\"sm\" \r\n          fullWidth\r\n          PaperProps={{\r\n            style: {\r\n              backgroundColor: darkMode ? '#1e1e1e' : 'white',\r\n              color: darkMode ? '#e0e0e0' : 'black',\r\n            },\r\n          }}\r\n        >\r\n          <DialogTitle>\r\n            <DialogTitleContainer>\r\n              <PersonOffIcon style={{ marginRight: 8, color: darkMode ? '#ff9800' : '#f57c00' }} />\r\n              Blocked Users\r\n            </DialogTitleContainer>\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            {blockedUsers.length === 0 ? (\r\n              <Typography variant=\"body2\" color=\"textSecondary\">\r\n                No blocked users\r\n              </Typography>\r\n            ) : (\r\n              <List>\r\n                {blockedUsers.map((blockedEmail) => (\r\n                  <ListItem key={blockedEmail}>\r\n                    <ListItemText \r\n                      primary={getDisplayName(blockedEmail) || blockedEmail}\r\n                      secondary={getDisplayName(blockedEmail) ? blockedEmail : null}\r\n                      primaryTypographyProps={{\r\n                        style: { color: darkMode ? '#e0e0e0' : 'black' }\r\n                      }}\r\n                      secondaryTypographyProps={{\r\n                        style: { color: darkMode ? '#888' : '#666' }\r\n                      }}\r\n                    />\r\n                    <ListItemSecondaryAction>\r\n                      <Button \r\n                        variant=\"outlined\" \r\n                        size=\"small\"\r\n                        onClick={() => unblockUser(blockedEmail)}\r\n                      >\r\n                        Unblock\r\n                      </Button>\r\n                    </ListItemSecondaryAction>\r\n                  </ListItem>\r\n                ))}\r\n              </List>\r\n            )}\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={handleBlockedUsersClose}>Close</Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n\r\n        <Dialog \r\n          open={aboutOpen} \r\n          onClose={handleAboutClose} \r\n          maxWidth=\"sm\" \r\n          fullWidth\r\n          PaperProps={{\r\n            style: {\r\n              backgroundColor: darkMode ? '#1e1e1e' : 'white',\r\n              color: darkMode ? '#e0e0e0' : 'black',\r\n            },\r\n          }}\r\n        >\r\n          <DialogTitle>\r\n            <DialogTitleContainer>\r\n              <InfoIcon style={{ marginRight: 8, color: darkMode ? '#4caf50' : '#2e7d32' }} />\r\n              About\r\n            </DialogTitleContainer>\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              Chat Application\r\n            </Typography>\r\n            <Typography variant=\"body1\" paragraph>\r\n              Version: 1.0.0\r\n            </Typography>\r\n            <Typography variant=\"body2\" paragraph>\r\n              A real-time messaging application built with React and Firebase.\r\n              Connect with friends and family through instant messaging.\r\n            </Typography>\r\n            <Typography variant=\"body2\" paragraph>\r\n              <strong>Features:</strong>\r\n            </Typography>\r\n            <Typography variant=\"body2\" component=\"div\">\r\n              <ul>\r\n                <li>Real-time messaging</li>\r\n                <li>User authentication</li>\r\n                <li>Search chats</li>\r\n                <li>Block/Unblock users</li>\r\n                <li>Archive/Unarchive chats</li>\r\n                <li>Delete conversations</li>\r\n                <li>Dark mode support</li>\r\n                <li>Chat with yourself (like WhatsApp)</li>\r\n                <li>Sorted by latest message</li>\r\n                <li>File sharing support</li>\r\n                <li>Voice messages</li>\r\n                <li>Custom display names</li>\r\n                <li>Location sharing</li>\r\n                <li>Camera photo capture</li>\r\n                <li>Message status indicators</li>\r\n                <li>Reply to messages</li>\r\n              </ul>\r\n            </Typography>\r\n            <Typography variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 20 }}>\r\n              Â© 2024 Chat App. All rights reserved.\r\n            </Typography>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={handleAboutClose}>Close</Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </Container>\r\n    </>\r\n  );\r\n});\r\n\r\nSidebar.displayName = 'Sidebar';\r\n\r\nexport default Sidebar;\r\n\r\n// Styled Components\r\nconst Overlay = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  z-index: 998;\r\n  \r\n  @media (min-width: 1025px) {\r\n    display: none;\r\n  }\r\n`;\r\n\r\nconst Container = styled.div`\r\n  flex: 0.45;\r\n  border-right: 1px solid ${props => props.darkMode ? '#333' : 'whitesmoke'};\r\n  height: 100vh;\r\n  min-width: 300px;\r\n  max-width: 350px;\r\n  overflow-y: scroll;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: ${props => props.darkMode ? '#1e1e1e' : 'white'};\r\n  color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n\r\n  ::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n\r\n  -ms-overflow-style: none;\r\n  scrollbar-width: none;\r\n\r\n  @media (max-width: 1024px) {\r\n    ${props => props.sidebarOpen ? `\r\n      position: fixed;\r\n      left: 0;\r\n      top: 0;\r\n      bottom: 0;\r\n      right: 0;\r\n      z-index: 999;\r\n      max-width: 100%;\r\n      width: 100%;\r\n      transform: translateX(0);\r\n    ` : `\r\n      position: fixed;\r\n      left: 0;\r\n      top: 0;\r\n      bottom: 0;\r\n      z-index: 999;\r\n      max-width: 85%;\r\n      width: 85%;\r\n      transform: translateX(-100%);\r\n    `}\r\n    transition: transform 0.3s ease-in-out;\r\n    box-shadow: ${props => props.sidebarOpen ? '2px 0 10px rgba(0,0,0,0.3)' : 'none'};\r\n  }\r\n`;\r\n\r\nconst UserAvatar = styled(Avatar)`\r\n  cursor: pointer;\r\n\r\n  :hover {\r\n    opacity: 0.8;\r\n  }\r\n`;\r\n\r\nconst SidebarButton = styled(Button)`\r\n  width: 100%;\r\n  &&& {\r\n    border-top: 1px solid whitesmoke;\r\n    border-bottom: 1px solid whitesmoke;\r\n  }\r\n`;\r\n\r\nconst Search = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 5px;\r\n  border-radius: 2px;\r\n  padding: 20px;\r\n  background-color: ${props => props.darkMode ? '#2a2a2a' : 'white'};\r\n`;\r\n\r\nconst SearchInput = styled.input`\r\n  outline-width: 0;\r\n  border: none;\r\n  flex: 1;\r\n  background-color: ${props => props.darkMode ? '#2a2a2a' : 'white'};\r\n  color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n  \r\n  ::placeholder {\r\n    color: ${props => props.darkMode ? '#888' : '#999'};\r\n  }\r\n`;\r\n\r\nconst Header = styled.div`\r\n  display: flex;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: ${props => props.darkMode ? '#1e1e1e' : 'white'};\r\n  z-index: 1;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 15px;\r\n  height: 80px;\r\n  border-bottom: 1px solid ${props => props.darkMode ? '#333' : 'whitesmoke'};\r\n`;\r\n\r\nconst IconsContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  position: relative;\r\n`;\r\n\r\nconst ArchiveBadge = styled.div`\r\n  position: absolute;\r\n  top: 8px;\r\n  left: 28px;\r\n  background-color: ${props => props.darkMode ? '#00a884' : '#25d366'};\r\n  color: white;\r\n  border-radius: 50%;\r\n  min-width: 18px;\r\n  height: 18px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 10px;\r\n  font-weight: 600;\r\n  padding: 0 4px;\r\n`;\r\n\r\nconst ArchiveHeader = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 12px 20px;\r\n  background-color: ${props => props.darkMode ? '#2a2a2a' : '#f0f0f0'};\r\n  color: ${props => props.darkMode ? '#25D366' : '#128C7E'};\r\n  font-weight: 500;\r\n  font-size: 14px;\r\n  border-bottom: 1px solid ${props => props.darkMode ? '#333' : '#e0e0e0'};\r\n`;\r\n\r\nconst ChatWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 10px;\r\n  \r\n  &:hover {\r\n    background-color: ${props => props.darkMode ? '#2a2a2a' : '#f5f5f5'};\r\n  }\r\n`;\r\n\r\nconst OptionsButton = styled(IconButton)`\r\n  visibility: hidden;\r\n  \r\n  ${ChatWrapper}:hover & {\r\n    visibility: visible;\r\n  }\r\n`;\r\n\r\nconst LoadingContainer = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 20px;\r\n  color: ${props => props.darkMode ? '#888' : '#666'};\r\n`;\r\n\r\nconst EmptyState = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 40px 20px;\r\n  color: ${props => props.darkMode ? '#888' : '#666'};\r\n`;\r\n\r\nconst DialogTitleContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;"],"names":[],"mappings":"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","debugId":null}}]
}