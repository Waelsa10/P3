{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/hooks/useEmojiPicker.js"],"sourcesContent":["// components/ChatScreen/hooks/useEmojiPicker.js\r\nimport { useState, useEffect } from \"react\";\r\nimport { EMOJIS } from \"../constants\";\r\n\r\nexport const useEmojiPicker = () => {\r\n  const [emojiAnchorEl, setEmojiAnchorEl] = useState(null);\r\n  const [selectedEmojiCategory, setSelectedEmojiCategory] = useState(\"recent\");\r\n  const [recentEmojis, setRecentEmojis] = useState([]);\r\n  const [emojiSearchTerm, setEmojiSearchTerm] = useState(\"\");\r\n\r\n  // Load recent emojis from localStorage\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem(\"recentEmojis\");\r\n    if (stored) {\r\n      setRecentEmojis(JSON.parse(stored));\r\n    }\r\n  }, []);\r\n\r\n  const saveRecentEmoji = (emoji) => {\r\n    const updated = [emoji, ...recentEmojis.filter((e) => e !== emoji)].slice(0, 30);\r\n    setRecentEmojis(updated);\r\n    localStorage.setItem(\"recentEmojis\", JSON.stringify(updated));\r\n  };\r\n\r\n  const handleEmojiPickerOpen = (event) => {\r\n    setEmojiAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleEmojiPickerClose = () => {\r\n    setEmojiAnchorEl(null);\r\n    setEmojiSearchTerm(\"\");\r\n  };\r\n\r\n  const getFilteredEmojis = () => {\r\n    if (selectedEmojiCategory === \"recent\") {\r\n      return recentEmojis;\r\n    }\r\n\r\n    const categoryEmojis = EMOJIS[selectedEmojiCategory] || [];\r\n    return categoryEmojis;\r\n  };\r\n\r\n  return {\r\n    emojiAnchorEl,\r\n    selectedEmojiCategory,\r\n    setSelectedEmojiCategory,\r\n    emojiSearchTerm,\r\n    setEmojiSearchTerm,\r\n    recentEmojis,\r\n    handleEmojiPickerOpen,\r\n    handleEmojiPickerClose,\r\n    saveRecentEmoji,\r\n    getFilteredEmojis,\r\n    openEmojiPicker: Boolean(emojiAnchorEl),\r\n  };\r\n};"],"names":[],"mappings":"AAAA,gDAAgD;;;;;AAChD;AACA;;;;AAEO,MAAM,iBAAiB;;IAC5B,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,sIAAQ,EAAC;IACnD,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,sIAAQ,EAAC;IACnE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,sIAAQ,EAAC,EAAE;IACnD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,sIAAQ,EAAC;IAEvD,uCAAuC;IACvC,IAAA,uIAAS;oCAAC;YACR,MAAM,SAAS,aAAa,OAAO,CAAC;YACpC,IAAI,QAAQ;gBACV,gBAAgB,KAAK,KAAK,CAAC;YAC7B;QACF;mCAAG,EAAE;IAEL,MAAM,kBAAkB,CAAC;QACvB,MAAM,UAAU;YAAC;eAAU,aAAa,MAAM,CAAC,CAAC,IAAM,MAAM;SAAO,CAAC,KAAK,CAAC,GAAG;QAC7E,gBAAgB;QAChB,aAAa,OAAO,CAAC,gBAAgB,KAAK,SAAS,CAAC;IACtD;IAEA,MAAM,wBAAwB,CAAC;QAC7B,iBAAiB,MAAM,aAAa;IACtC;IAEA,MAAM,yBAAyB;QAC7B,iBAAiB;QACjB,mBAAmB;IACrB;IAEA,MAAM,oBAAoB;QACxB,IAAI,0BAA0B,UAAU;YACtC,OAAO;QACT;QAEA,MAAM,iBAAiB,2IAAM,CAAC,sBAAsB,IAAI,EAAE;QAC1D,OAAO;IACT;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB,QAAQ;IAC3B;AACF;GAnDa","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/lib/cloudinary.js"],"sourcesContent":["// lib/cloudinary.js\r\n\r\nconst CLOUDINARY_CLOUD_NAME = process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME;\r\nconst CLOUDINARY_UPLOAD_PRESET = process.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET;\r\n\r\n// Validate environment variables\r\nif (!CLOUDINARY_CLOUD_NAME) {\r\n  console.error('‚ùå NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME is not set in .env.local');\r\n}\r\n\r\nif (!CLOUDINARY_UPLOAD_PRESET) {\r\n  console.error('‚ùå NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET is not set in .env.local');\r\n}\r\n\r\nconst CLOUDINARY_URL = `https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD_NAME}/auto/upload`;\r\n\r\n/**\r\n * Upload file to Cloudinary\r\n * @param {Blob|File} file - The file to upload\r\n * @param {Function} onProgress - Progress callback (0-100)\r\n * @returns {Promise<string>} - Download URL\r\n */\r\nexport const uploadToCloudinary = async (file, onProgress = null) => {\r\n  return new Promise((resolve, reject) => {\r\n    // Validation\r\n    if (!CLOUDINARY_CLOUD_NAME || !CLOUDINARY_UPLOAD_PRESET) {\r\n      reject(new Error('Cloudinary configuration is missing. Check your .env.local file.'));\r\n      return;\r\n    }\r\n\r\n    if (!file) {\r\n      reject(new Error('No file provided'));\r\n      return;\r\n    }\r\n\r\n    console.log('üîÑ Starting Cloudinary upload...');\r\n    console.log('üì¶ File size:', file.size, 'bytes');\r\n    console.log('üì¶ File type:', file.type);\r\n    console.log('‚òÅÔ∏è Cloud name:', CLOUDINARY_CLOUD_NAME);\r\n    console.log('üîë Upload preset:', CLOUDINARY_UPLOAD_PRESET);\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);\r\n    formData.append('folder', 'chat-app');\r\n\r\n    const xhr = new XMLHttpRequest();\r\n\r\n    // Track upload progress\r\n    if (onProgress) {\r\n      xhr.upload.addEventListener('progress', (e) => {\r\n        if (e.lengthComputable) {\r\n          const percentComplete = (e.loaded / e.total) * 100;\r\n          console.log(`üì§ Upload progress: ${Math.round(percentComplete)}%`);\r\n          onProgress(percentComplete);\r\n        }\r\n      });\r\n    }\r\n\r\n    xhr.addEventListener('load', () => {\r\n      if (xhr.status === 200) {\r\n        try {\r\n          const response = JSON.parse(xhr.responseText);\r\n          console.log('‚úÖ Upload successful!');\r\n          console.log('üîó URL:', response.secure_url);\r\n          resolve(response.secure_url);\r\n        } catch (parseError) {\r\n          console.error('‚ùå Failed to parse response:', parseError);\r\n          reject(new Error('Failed to parse Cloudinary response'));\r\n        }\r\n      } else {\r\n        console.error('‚ùå Upload failed with status:', xhr.status);\r\n        console.error('üìÑ Response:', xhr.responseText);\r\n        \r\n        let errorMessage = `Upload failed (${xhr.status})`;\r\n        try {\r\n          const errorResponse = JSON.parse(xhr.responseText);\r\n          errorMessage = errorResponse.error?.message || errorMessage;\r\n        } catch (e) {\r\n          // Ignore parsing error\r\n        }\r\n        \r\n        reject(new Error(errorMessage));\r\n      }\r\n    });\r\n\r\n    xhr.addEventListener('error', () => {\r\n      console.error('‚ùå Network error during upload');\r\n      reject(new Error('Network error during upload'));\r\n    });\r\n\r\n    xhr.addEventListener('abort', () => {\r\n      console.log('‚ö†Ô∏è Upload cancelled');\r\n      reject(new Error('Upload cancelled'));\r\n    });\r\n\r\n    console.log('üöÄ Sending request to:', CLOUDINARY_URL);\r\n    xhr.open('POST', CLOUDINARY_URL);\r\n    xhr.send(formData);\r\n  });\r\n};\r\n\r\n/**\r\n * Test Cloudinary configuration\r\n */\r\nexport const testCloudinaryConfig = () => {\r\n  console.log('üß™ Testing Cloudinary Configuration:');\r\n  console.log('Cloud Name:', CLOUDINARY_CLOUD_NAME || '‚ùå NOT SET');\r\n  console.log('Upload Preset:', CLOUDINARY_UPLOAD_PRESET || '‚ùå NOT SET');\r\n  console.log('URL:', CLOUDINARY_URL);\r\n  \r\n  if (!CLOUDINARY_CLOUD_NAME || !CLOUDINARY_UPLOAD_PRESET) {\r\n    console.error('‚ùå Cloudinary is not configured properly!');\r\n    console.error('üí° Make sure you have created .env.local file in your project root');\r\n    console.error('üí° The file should contain:');\r\n    console.error('   NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=your_cloud_name');\r\n    console.error('   NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET=your_preset_name');\r\n    return false;\r\n  }\r\n  \r\n  console.log('‚úÖ Cloudinary configuration looks good!');\r\n  return true;\r\n};"],"names":[],"mappings":"AAAA,oBAAoB;;;;;;;AAEU;AAA9B,MAAM;AACN,MAAM;AAEN,iCAAiC;AACjC;;AAIA;;AAIA,MAAM,iBAAiB,CAAC,gCAAgC,EAAE,sBAAsB,YAAY,CAAC;AAQtF,MAAM,qBAAqB,OAAO,MAAM,aAAa,IAAI;IAC9D,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,aAAa;QACb;;QAKA,IAAI,CAAC,MAAM;YACT,OAAO,IAAI,MAAM;YACjB;QACF;QAEA,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,iBAAiB,KAAK,IAAI,EAAE;QACxC,QAAQ,GAAG,CAAC,iBAAiB,KAAK,IAAI;QACtC,QAAQ,GAAG,CAAC,kBAAkB;QAC9B,QAAQ,GAAG,CAAC,qBAAqB;QAEjC,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,QAAQ;QACxB,SAAS,MAAM,CAAC,iBAAiB;QACjC,SAAS,MAAM,CAAC,UAAU;QAE1B,MAAM,MAAM,IAAI;QAEhB,wBAAwB;QACxB,IAAI,YAAY;YACd,IAAI,MAAM,CAAC,gBAAgB,CAAC,YAAY,CAAC;gBACvC,IAAI,EAAE,gBAAgB,EAAE;oBACtB,MAAM,kBAAkB,AAAC,EAAE,MAAM,GAAG,EAAE,KAAK,GAAI;oBAC/C,QAAQ,GAAG,CAAC,CAAC,oBAAoB,EAAE,KAAK,KAAK,CAAC,iBAAiB,CAAC,CAAC;oBACjE,WAAW;gBACb;YACF;QACF;QAEA,IAAI,gBAAgB,CAAC,QAAQ;YAC3B,IAAI,IAAI,MAAM,KAAK,KAAK;gBACtB,IAAI;oBACF,MAAM,WAAW,KAAK,KAAK,CAAC,IAAI,YAAY;oBAC5C,QAAQ,GAAG,CAAC;oBACZ,QAAQ,GAAG,CAAC,WAAW,SAAS,UAAU;oBAC1C,QAAQ,SAAS,UAAU;gBAC7B,EAAE,OAAO,YAAY;oBACnB,QAAQ,KAAK,CAAC,+BAA+B;oBAC7C,OAAO,IAAI,MAAM;gBACnB;YACF,OAAO;gBACL,QAAQ,KAAK,CAAC,gCAAgC,IAAI,MAAM;gBACxD,QAAQ,KAAK,CAAC,gBAAgB,IAAI,YAAY;gBAE9C,IAAI,eAAe,CAAC,eAAe,EAAE,IAAI,MAAM,CAAC,CAAC,CAAC;gBAClD,IAAI;oBACF,MAAM,gBAAgB,KAAK,KAAK,CAAC,IAAI,YAAY;oBACjD,eAAe,cAAc,KAAK,EAAE,WAAW;gBACjD,EAAE,OAAO,GAAG;gBACV,uBAAuB;gBACzB;gBAEA,OAAO,IAAI,MAAM;YACnB;QACF;QAEA,IAAI,gBAAgB,CAAC,SAAS;YAC5B,QAAQ,KAAK,CAAC;YACd,OAAO,IAAI,MAAM;QACnB;QAEA,IAAI,gBAAgB,CAAC,SAAS;YAC5B,QAAQ,GAAG,CAAC;YACZ,OAAO,IAAI,MAAM;QACnB;QAEA,QAAQ,GAAG,CAAC,0BAA0B;QACtC,IAAI,IAAI,CAAC,QAAQ;QACjB,IAAI,IAAI,CAAC;IACX;AACF;AAKO,MAAM,uBAAuB;IAClC,QAAQ,GAAG,CAAC;IACZ,QAAQ,GAAG,CAAC,eAAe,yBAAyB;IACpD,QAAQ,GAAG,CAAC,kBAAkB,4BAA4B;IAC1D,QAAQ,GAAG,CAAC,QAAQ;IAEpB;;IASA,QAAQ,GAAG,CAAC;IACZ,OAAO;AACT","debugId":null}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/utils.js"],"sourcesContent":["import { db } from \"../../firebase\";\r\nimport { collection, query, where, getDocs } from \"firebase/firestore\";\r\n\r\nexport const checkIfBlocked = async (currentUserEmail, recipientEmail) => {\r\n  try {\r\n    // Don't check blocking for self-chat\r\n    if (currentUserEmail === recipientEmail) {\r\n      return false;\r\n    }\r\n\r\n    // Check if current user is blocked by recipient\r\n    const usersRef = collection(db, \"users\");\r\n    const q = query(usersRef, where(\"email\", \"==\", recipientEmail));\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    if (!querySnapshot.empty) {\r\n      const recipientData = querySnapshot.docs[0].data();\r\n      const blockedUsers = recipientData.blockedUsers || [];\r\n      \r\n      if (blockedUsers.includes(currentUserEmail)) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  } catch (error) {\r\n    console.error(\"Error checking if blocked:\", error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const buildReplyData = (replyingTo) => {\r\n  if (!replyingTo) return null;\r\n\r\n  const replyData = {\r\n    messageId: replyingTo.id,\r\n    user: replyingTo.user,\r\n    message: replyingTo.message,\r\n  };\r\n\r\n  if (replyingTo.fileURL) {\r\n    replyData.fileURL = replyingTo.fileURL;\r\n    replyData.fileName = replyingTo.fileName;\r\n    replyData.fileType = replyingTo.fileType;\r\n  }\r\n\r\n  if (replyingTo.voiceURL) {\r\n    replyData.voiceURL = replyingTo.voiceURL;\r\n    replyData.duration = replyingTo.duration;\r\n  }\r\n\r\n  return replyData;\r\n};\r\n\r\nexport const formatFileSize = (bytes) => {\r\n  if (bytes === 0) return \"0 Bytes\";\r\n  const k = 1024;\r\n  const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  return Math.round(bytes / Math.pow(k, i) * 100) / 100 + \" \" + sizes[i];\r\n};\r\n\r\nexport const formatTime = (seconds) => {\r\n  if (!seconds || seconds < 0) return \"0:00\";\r\n  \r\n  const mins = Math.floor(seconds / 60);\r\n  const secs = Math.floor(seconds % 60);\r\n  \r\n  return `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n};\r\n\r\nexport const getFileIcon = (fileType) => {\r\n  if (fileType?.startsWith(\"image/\")) return \"üñºÔ∏è\";\r\n  if (fileType?.startsWith(\"video/\")) return \"üé•\";\r\n  if (fileType?.startsWith(\"audio/\")) return \"üéµ\";\r\n  if (fileType?.includes(\"pdf\")) return \"üìÑ\";\r\n  if (fileType?.includes(\"word\") || fileType?.includes(\"document\")) return \"üìù\";\r\n  if (fileType?.includes(\"sheet\") || fileType?.includes(\"excel\")) return \"üìä\";\r\n  if (fileType?.includes(\"zip\") || fileType?.includes(\"rar\")) return \"üì¶\";\r\n  return \"üìé\";\r\n};"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;AAAA;;;AAEO,MAAM,iBAAiB,OAAO,kBAAkB;IACrD,IAAI;QACF,qCAAqC;QACrC,IAAI,qBAAqB,gBAAgB;YACvC,OAAO;QACT;QAEA,gDAAgD;QAChD,MAAM,WAAW,IAAA,6KAAU,EAAC,0HAAE,EAAE;QAChC,MAAM,IAAI,IAAA,wKAAK,EAAC,UAAU,IAAA,wKAAK,EAAC,SAAS,MAAM;QAC/C,MAAM,gBAAgB,MAAM,IAAA,0KAAO,EAAC;QAEpC,IAAI,CAAC,cAAc,KAAK,EAAE;YACxB,MAAM,gBAAgB,cAAc,IAAI,CAAC,EAAE,CAAC,IAAI;YAChD,MAAM,eAAe,cAAc,YAAY,IAAI,EAAE;YAErD,IAAI,aAAa,QAAQ,CAAC,mBAAmB;gBAC3C,OAAO;YACT;QACF;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO;IACT;AACF;AAEO,MAAM,iBAAiB,CAAC;IAC7B,IAAI,CAAC,YAAY,OAAO;IAExB,MAAM,YAAY;QAChB,WAAW,WAAW,EAAE;QACxB,MAAM,WAAW,IAAI;QACrB,SAAS,WAAW,OAAO;IAC7B;IAEA,IAAI,WAAW,OAAO,EAAE;QACtB,UAAU,OAAO,GAAG,WAAW,OAAO;QACtC,UAAU,QAAQ,GAAG,WAAW,QAAQ;QACxC,UAAU,QAAQ,GAAG,WAAW,QAAQ;IAC1C;IAEA,IAAI,WAAW,QAAQ,EAAE;QACvB,UAAU,QAAQ,GAAG,WAAW,QAAQ;QACxC,UAAU,QAAQ,GAAG,WAAW,QAAQ;IAC1C;IAEA,OAAO;AACT;AAEO,MAAM,iBAAiB,CAAC;IAC7B,IAAI,UAAU,GAAG,OAAO;IACxB,MAAM,IAAI;IACV,MAAM,QAAQ;QAAC;QAAS;QAAM;QAAM;KAAK;IACzC,MAAM,IAAI,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,SAAS,KAAK,GAAG,CAAC;IAChD,OAAO,KAAK,KAAK,CAAC,QAAQ,KAAK,GAAG,CAAC,GAAG,KAAK,OAAO,MAAM,MAAM,KAAK,CAAC,EAAE;AACxE;AAEO,MAAM,aAAa,CAAC;IACzB,IAAI,CAAC,WAAW,UAAU,GAAG,OAAO;IAEpC,MAAM,OAAO,KAAK,KAAK,CAAC,UAAU;IAClC,MAAM,OAAO,KAAK,KAAK,CAAC,UAAU;IAElC,OAAO,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;AACtD;AAEO,MAAM,cAAc,CAAC;IAC1B,IAAI,UAAU,WAAW,WAAW,OAAO;IAC3C,IAAI,UAAU,WAAW,WAAW,OAAO;IAC3C,IAAI,UAAU,WAAW,WAAW,OAAO;IAC3C,IAAI,UAAU,SAAS,QAAQ,OAAO;IACtC,IAAI,UAAU,SAAS,WAAW,UAAU,SAAS,aAAa,OAAO;IACzE,IAAI,UAAU,SAAS,YAAY,UAAU,SAAS,UAAU,OAAO;IACvE,IAAI,UAAU,SAAS,UAAU,UAAU,SAAS,QAAQ,OAAO;IACnE,OAAO;AACT","debugId":null}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/hooks/useFileUpload.js"],"sourcesContent":["// components/ChatScreen/hooks/useFileUpload.js\r\nimport { useState, useRef } from \"react\";\r\nimport { addDoc, collection, doc, setDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { db } from \"../../../firebase\";\r\nimport { uploadToCloudinary } from \"../../../lib/cloudinary\";\r\nimport { checkIfBlocked, buildReplyData } from \"../utils\";\r\nimport { MESSAGE_STATUS } from \"../constants\";\r\n\r\nexport const useFileUpload = (chatId, user, recipientEmail) => {\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [filePreview, setFilePreview] = useState(null);\r\n  const [showFileConfirmation, setShowFileConfirmation] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const fileInputRef = useRef(null);\r\n\r\n  const handleAttachClick = () => {\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.click();\r\n    }\r\n  };\r\n\r\n  const handleFileSelect = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setSelectedFile(file);\r\n      \r\n      // Create preview for images\r\n      if (file.type.startsWith(\"image/\")) {\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => {\r\n          setFilePreview(reader.result);\r\n        };\r\n        reader.readAsDataURL(file);\r\n      } else {\r\n        setFilePreview(null);\r\n      }\r\n      \r\n      setShowFileConfirmation(true);\r\n    }\r\n    \r\n    // Reset the input value so the same file can be selected again\r\n    e.target.value = '';\r\n  };\r\n\r\n  const cancelFileSelection = () => {\r\n    setSelectedFile(null);\r\n    setFilePreview(null);\r\n    setShowFileConfirmation(false);\r\n    setUploadProgress(0);\r\n  };\r\n\r\n  const sendFileMessage = async (input, replyingTo, setSendingError, setInput, setReplyingTo, scrollToBottom, isSelfChat = false) => {\r\n    if (!selectedFile || !chatId || !user || !recipientEmail) return;\r\n\r\n    setIsUploading(true);\r\n    setSendingError(null);\r\n\r\n    try {\r\n      // Skip blocking check for self-chat\r\n      if (!isSelfChat) {\r\n        const isBlocked = await checkIfBlocked(user.email, recipientEmail);\r\n        if (isBlocked) {\r\n          setSendingError(\"You cannot send messages to this user. You have been blocked.\");\r\n          setIsUploading(false);\r\n          return;\r\n        }\r\n      }\r\n\r\n      // Upload to Cloudinary with progress tracking\r\n      const fileURL = await uploadToCloudinary(selectedFile, (progress) => {\r\n        setUploadProgress(progress);\r\n      });\r\n\r\n      // Update user's last seen\r\n      const userRef = doc(db, \"users\", user.uid);\r\n      await setDoc(\r\n        userRef,\r\n        {\r\n          lastSeen: serverTimestamp(),\r\n        },\r\n        { merge: true }\r\n      );\r\n\r\n      // Build message data\r\n      const messageData = {\r\n        timestamp: serverTimestamp(),\r\n        message: input || \"\",\r\n        user: user.email,\r\n        photoURL: user.photoURL,\r\n        fileURL: fileURL,\r\n        fileName: selectedFile.name,\r\n        fileType: selectedFile.type,\r\n        fileSize: selectedFile.size,\r\n        status: MESSAGE_STATUS.SENT, // Initial status is SENT (1 gray check)\r\n      };\r\n\r\n      // Add reply data if replying\r\n      const replyData = buildReplyData(replyingTo);\r\n      if (replyData) {\r\n        messageData.replyTo = replyData;\r\n      }\r\n\r\n      // Send the message\r\n      await addDoc(collection(db, \"chats\", chatId, \"messages\"), messageData);\r\n\r\n      // Reset states\r\n      setInput(\"\");\r\n      setSelectedFile(null);\r\n      setFilePreview(null);\r\n      setShowFileConfirmation(false);\r\n      setUploadProgress(0);\r\n      setReplyingTo(null);\r\n      scrollToBottom();\r\n    } catch (error) {\r\n      console.error(\"Error sending file:\", error);\r\n      setSendingError(`Failed to send file: ${error.message}`);\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    selectedFile,\r\n    filePreview,\r\n    showFileConfirmation,\r\n    uploadProgress,\r\n    isUploading,\r\n    fileInputRef,\r\n    handleAttachClick,\r\n    handleFileSelect,\r\n    cancelFileSelection,\r\n    sendFileMessage,\r\n  };\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 402, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/hooks/useVoiceRecording.js"],"sourcesContent":["// components/ChatScreen/hooks/useVoiceRecording.js\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { addDoc, collection, doc, setDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { db } from \"../../../firebase\";\r\nimport { uploadToCloudinary } from \"../../../lib/cloudinary\";\r\nimport { checkIfBlocked, buildReplyData } from \"../utils\";\r\nimport { MESSAGE_STATUS } from \"../constants\";\r\n\r\nexport const useVoiceRecording = (chatId, user, recipientEmail) => {\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [recordingTime, setRecordingTime] = useState(0);\r\n  const [audioBlob, setAudioBlob] = useState(null);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n\r\n  const mediaRecorderRef = useRef(null);\r\n  const audioChunksRef = useRef([]);\r\n\r\n  // Recording timer\r\n  useEffect(() => {\r\n    let interval;\r\n    if (isRecording) {\r\n      interval = setInterval(() => {\r\n        setRecordingTime((prev) => prev + 1);\r\n      }, 1000);\r\n    } else {\r\n      setRecordingTime(0);\r\n    }\r\n    return () => clearInterval(interval);\r\n  }, [isRecording]);\r\n\r\n  const startRecording = async (setSendingError) => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      \r\n      // Check for supported MIME types\r\n      let mimeType = 'audio/webm';\r\n      if (!MediaRecorder.isTypeSupported(mimeType)) {\r\n        mimeType = 'audio/webm;codecs=opus';\r\n        if (!MediaRecorder.isTypeSupported(mimeType)) {\r\n          mimeType = 'audio/ogg;codecs=opus';\r\n          if (!MediaRecorder.isTypeSupported(mimeType)) {\r\n            mimeType = 'audio/mp4';\r\n            if (!MediaRecorder.isTypeSupported(mimeType)) {\r\n              mimeType = ''; // Let browser choose\r\n            }\r\n          }\r\n        }\r\n      }\r\n      \r\n      console.log('Using MIME type:', mimeType || 'default');\r\n      \r\n      const options = mimeType ? { mimeType } : {};\r\n      const mediaRecorder = new MediaRecorder(stream, options);\r\n      mediaRecorderRef.current = mediaRecorder;\r\n      audioChunksRef.current = [];\r\n\r\n      mediaRecorder.ondataavailable = (event) => {\r\n        console.log('Data available:', event.data.size, 'bytes');\r\n        if (event.data.size > 0) {\r\n          audioChunksRef.current.push(event.data);\r\n        }\r\n      };\r\n\r\n      mediaRecorder.onstop = () => {\r\n        console.log('Recording stopped, chunks:', audioChunksRef.current.length);\r\n        const audioBlob = new Blob(audioChunksRef.current, { \r\n          type: mimeType || 'audio/webm' \r\n        });\r\n        \r\n        console.log('Blob size:', audioBlob.size);\r\n        \r\n        // Check if blob has data\r\n        if (audioBlob.size > 0) {\r\n          setAudioBlob(audioBlob);\r\n        } else {\r\n          console.error('No audio data captured');\r\n          setSendingError(\"Recording failed: No audio data captured. Please try again.\");\r\n        }\r\n        \r\n        stream.getTracks().forEach((track) => track.stop());\r\n      };\r\n\r\n      mediaRecorder.onerror = (event) => {\r\n        console.error('MediaRecorder error:', event.error);\r\n        setSendingError(`Recording error: ${event.error.name}`);\r\n      };\r\n\r\n      // Start with timeslice to ensure data is collected periodically\r\n      mediaRecorder.start(100); // Collect data every 100ms\r\n      setIsRecording(true);\r\n    } catch (error) {\r\n      console.error(\"Error starting recording:\", error);\r\n      setSendingError(\"Failed to access microphone. Please check permissions.\");\r\n    }\r\n  };\r\n\r\n  const stopRecording = () => {\r\n    if (mediaRecorderRef.current && isRecording) {\r\n      mediaRecorderRef.current.stop();\r\n      setIsRecording(false);\r\n    }\r\n  };\r\n\r\n  const cancelRecording = () => {\r\n    if (mediaRecorderRef.current && isRecording) {\r\n      mediaRecorderRef.current.stop();\r\n      setIsRecording(false);\r\n    }\r\n    setAudioBlob(null);\r\n    setRecordingTime(0);\r\n  };\r\n\r\n  const sendVoiceMessage = async (replyingTo, setSendingError, setReplyingTo, scrollToBottom, isSelfChat = false) => {\r\n    if (!audioBlob || !chatId || !user || !recipientEmail) return;\r\n\r\n    setIsUploading(true);\r\n    setSendingError(null);\r\n\r\n    try {\r\n      // Skip blocking check for self-chat\r\n      if (!isSelfChat) {\r\n        const isBlocked = await checkIfBlocked(user.email, recipientEmail);\r\n        if (isBlocked) {\r\n          setSendingError(\"You cannot send messages to this user. You have been blocked.\");\r\n          setIsUploading(false);\r\n          return;\r\n        }\r\n      }\r\n\r\n      // Upload to Cloudinary with progress tracking\r\n      const voiceURL = await uploadToCloudinary(audioBlob, (progress) => {\r\n        setUploadProgress(progress);\r\n      });\r\n\r\n      // Update user's last seen\r\n      const userRef = doc(db, \"users\", user.uid);\r\n      await setDoc(\r\n        userRef,\r\n        {\r\n          lastSeen: serverTimestamp(),\r\n        },\r\n        { merge: true }\r\n      );\r\n\r\n      // Build message data\r\n      const messageData = {\r\n        timestamp: serverTimestamp(),\r\n        message: \"\", // Empty message for voice\r\n        user: user.email,\r\n        photoURL: user.photoURL,\r\n        voiceURL: voiceURL,\r\n        voiceDuration: recordingTime,\r\n        status: MESSAGE_STATUS.SENT, // Initial status is SENT (1 gray check)\r\n      };\r\n\r\n      // Add reply data if replying\r\n      const replyData = buildReplyData(replyingTo);\r\n      if (replyData) {\r\n        messageData.replyTo = replyData;\r\n      }\r\n\r\n      // Send the message\r\n      await addDoc(collection(db, \"chats\", chatId, \"messages\"), messageData);\r\n\r\n      // Reset states\r\n      setAudioBlob(null);\r\n      setUploadProgress(0);\r\n      setReplyingTo(null);\r\n      scrollToBottom();\r\n    } catch (error) {\r\n      console.error(\"Error sending voice message:\", error);\r\n      setSendingError(`Failed to send voice message: ${error.message}`);\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    isRecording,\r\n    recordingTime,\r\n    audioBlob,\r\n    uploadProgress,\r\n    isUploading,\r\n    startRecording,\r\n    stopRecording,\r\n    cancelRecording,\r\n    sendVoiceMessage,\r\n  };\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 599, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/hooks/useCamera.js"],"sourcesContent":["// components/ChatScreen/hooks/useCamera.js\r\nimport { useState, useRef } from \"react\";\r\nimport { addDoc, collection, doc, setDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { db } from \"../../../firebase\";\r\nimport { uploadToCloudinary } from \"../../../lib/cloudinary\";\r\nimport { checkIfBlocked, buildReplyData } from \"../utils\";\r\nimport { MESSAGE_STATUS } from \"../constants\";\r\n\r\nexport const useCamera = (chatId, user, recipientEmail) => {\r\n  const [showCamera, setShowCamera] = useState(false);\r\n  const [capturedImage, setCapturedImage] = useState(null);\r\n  const [capturedImageBlob, setCapturedImageBlob] = useState(null);\r\n  const [stream, setStream] = useState(null);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const videoRef = useRef(null);\r\n\r\n  const startCamera = async () => {\r\n    try {\r\n      const mediaStream = await navigator.mediaDevices.getUserMedia({\r\n        video: { \r\n          facingMode: \"user\",\r\n          width: { ideal: 1280 },\r\n          height: { ideal: 720 }\r\n        },\r\n        audio: false,\r\n      });\r\n      setStream(mediaStream);\r\n      setShowCamera(true);\r\n      \r\n      // Wait for video element to be available\r\n      setTimeout(() => {\r\n        if (videoRef.current) {\r\n          videoRef.current.srcObject = mediaStream;\r\n        }\r\n      }, 100);\r\n    } catch (error) {\r\n      console.error(\"Error accessing camera:\", error);\r\n      alert(\"Unable to access camera. Please check permissions.\");\r\n    }\r\n  };\r\n\r\n  const capturePhoto = () => {\r\n    if (videoRef.current) {\r\n      const canvas = document.createElement(\"canvas\");\r\n      const video = videoRef.current;\r\n      \r\n      // Set canvas dimensions to match video\r\n      canvas.width = video.videoWidth;\r\n      canvas.height = video.videoHeight;\r\n      \r\n      const ctx = canvas.getContext(\"2d\");\r\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n      \r\n      // Convert canvas to blob with high quality\r\n      canvas.toBlob((blob) => {\r\n        if (blob) {\r\n          console.log(\"üì∏ Photo captured:\", {\r\n            size: blob.size,\r\n            type: blob.type,\r\n            width: canvas.width,\r\n            height: canvas.height\r\n          });\r\n          \r\n          // Create preview URL\r\n          const previewUrl = URL.createObjectURL(blob);\r\n          setCapturedImage(previewUrl);\r\n          setCapturedImageBlob(blob);\r\n          stopCamera();\r\n        } else {\r\n          console.error(\"Failed to create blob from canvas\");\r\n          alert(\"Failed to capture photo. Please try again.\");\r\n        }\r\n      }, \"image/jpeg\", 0.95);\r\n    }\r\n  };\r\n\r\n  const stopCamera = () => {\r\n    if (stream) {\r\n      stream.getTracks().forEach((track) => track.stop());\r\n      setStream(null);\r\n    }\r\n    setShowCamera(false);\r\n  };\r\n\r\n  const retakePhoto = () => {\r\n    if (capturedImage) {\r\n      URL.revokeObjectURL(capturedImage);\r\n    }\r\n    setCapturedImage(null);\r\n    setCapturedImageBlob(null);\r\n    startCamera();\r\n  };\r\n\r\n  const cancelPhoto = () => {\r\n    if (capturedImage) {\r\n      URL.revokeObjectURL(capturedImage);\r\n    }\r\n    setCapturedImage(null);\r\n    setCapturedImageBlob(null);\r\n    stopCamera();\r\n    setUploadProgress(0);\r\n  };\r\n\r\n  const sendPhoto = async (input, replyingTo, setSendingError, setInput, setReplyingTo, scrollToBottom, isSelfChat = false) => {\r\n    if (!capturedImageBlob || !chatId || !user || !recipientEmail) {\r\n      console.error(\"Missing required data for sending photo\");\r\n      return;\r\n    }\r\n\r\n    setIsUploading(true);\r\n    setSendingError(null);\r\n\r\n    try {\r\n      console.log(\"üì§ Starting photo upload...\");\r\n      \r\n      // Skip blocking check for self-chat\r\n      if (!isSelfChat) {\r\n        const isBlocked = await checkIfBlocked(user.email, recipientEmail);\r\n        if (isBlocked) {\r\n          setSendingError(\"You cannot send messages to this user. You have been blocked.\");\r\n          setIsUploading(false);\r\n          return;\r\n        }\r\n      }\r\n\r\n      // Convert blob to file with proper metadata\r\n      const timestamp = Date.now();\r\n      const fileName = `camera_photo_${timestamp}.jpg`;\r\n      const file = new File([capturedImageBlob], fileName, { \r\n        type: \"image/jpeg\",\r\n        lastModified: timestamp\r\n      });\r\n\r\n      console.log(\"üì∏ Photo file created:\", {\r\n        name: file.name,\r\n        size: file.size,\r\n        type: file.type\r\n      });\r\n\r\n      // Upload to Cloudinary\r\n      const fileURL = await uploadToCloudinary(file, (progress) => {\r\n        console.log(`‚¨ÜÔ∏è Upload progress: ${progress}%`);\r\n        setUploadProgress(progress);\r\n      });\r\n\r\n      console.log(\"‚úÖ Upload complete, URL:\", fileURL);\r\n\r\n      // Update user's last seen\r\n      const userRef = doc(db, \"users\", user.uid);\r\n      await setDoc(\r\n        userRef,\r\n        {\r\n          lastSeen: serverTimestamp(),\r\n        },\r\n        { merge: true }\r\n      );\r\n\r\n      // Build message data\r\n      const messageData = {\r\n        timestamp: serverTimestamp(),\r\n        message: input || \"\",\r\n        user: user.email,\r\n        photoURL: user.photoURL,\r\n        fileURL: fileURL,\r\n        fileName: fileName,\r\n        fileType: \"image/jpeg\",\r\n        fileSize: capturedImageBlob.size,\r\n        status: MESSAGE_STATUS.SENT,\r\n      };\r\n\r\n      // Add reply data if replying\r\n      const replyData = buildReplyData(replyingTo);\r\n      if (replyData) {\r\n        messageData.replyTo = replyData;\r\n      }\r\n\r\n      console.log(\"üíæ Saving message to Firestore:\", messageData);\r\n\r\n      // Send the message\r\n      await addDoc(collection(db, \"chats\", chatId, \"messages\"), messageData);\r\n\r\n      console.log(\"‚úÖ Message saved successfully\");\r\n\r\n      // Clean up\r\n      if (capturedImage) {\r\n        URL.revokeObjectURL(capturedImage);\r\n      }\r\n\r\n      // Reset states\r\n      setInput(\"\");\r\n      setCapturedImage(null);\r\n      setCapturedImageBlob(null);\r\n      setUploadProgress(0);\r\n      setReplyingTo(null);\r\n      scrollToBottom();\r\n    } catch (error) {\r\n      console.error(\"‚ùå Error sending photo:\", error);\r\n      setSendingError(`Failed to send photo: ${error.message}`);\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    showCamera,\r\n    capturedImage,\r\n    uploadProgress,\r\n    isUploading,\r\n    videoRef,\r\n    startCamera,\r\n    capturePhoto,\r\n    retakePhoto,\r\n    cancelPhoto,\r\n    sendPhoto,\r\n  };\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 813, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/hooks/useLocation.js"],"sourcesContent":["// components/ChatScreen/hooks/useLocation.js\r\nimport { useState } from \"react\";\r\nimport { addDoc, collection, doc, setDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { db } from \"../../../firebase\";\r\nimport { checkIfBlocked, buildReplyData } from \"../utils\";\r\nimport { MESSAGE_STATUS } from \"../constants\";\r\n\r\nexport const useLocation = (chatId, user, recipientEmail) => {\r\n  const [isGettingLocation, setIsGettingLocation] = useState(false);\r\n  const [showLocationPreview, setShowLocationPreview] = useState(false);\r\n  const [locationData, setLocationData] = useState(null);\r\n\r\n  const getLocation = () => {\r\n    if (!navigator.geolocation) {\r\n      alert(\"Geolocation is not supported by your browser\");\r\n      return;\r\n    }\r\n\r\n    setIsGettingLocation(true);\r\n    setShowLocationPreview(true);\r\n\r\n    navigator.geolocation.getCurrentPosition(\r\n      (position) => {\r\n        const { latitude, longitude } = position.coords;\r\n        setLocationData({\r\n          latitude,\r\n          longitude,\r\n          url: `https://www.google.com/maps?q=${latitude},${longitude}`,\r\n        });\r\n        setIsGettingLocation(false);\r\n      },\r\n      (error) => {\r\n        console.error(\"Error getting location:\", error);\r\n        let errorMessage = \"Unable to retrieve your location.\";\r\n        \r\n        switch(error.code) {\r\n          case error.PERMISSION_DENIED:\r\n            errorMessage = \"Location permission denied. Please enable location access in your browser settings.\";\r\n            break;\r\n          case error.POSITION_UNAVAILABLE:\r\n            errorMessage = \"Location information is unavailable.\";\r\n            break;\r\n          case error.TIMEOUT:\r\n            errorMessage = \"Location request timed out.\";\r\n            break;\r\n        }\r\n        \r\n        alert(errorMessage);\r\n        setIsGettingLocation(false);\r\n        setShowLocationPreview(false);\r\n      },\r\n      {\r\n        enableHighAccuracy: true,\r\n        timeout: 10000,\r\n        maximumAge: 0\r\n      }\r\n    );\r\n  };\r\n\r\n  const cancelLocation = () => {\r\n    setLocationData(null);\r\n    setShowLocationPreview(false);\r\n    setIsGettingLocation(false);\r\n  };\r\n\r\n  const sendLocation = async (input, replyingTo, setSendingError, setInput, setReplyingTo, scrollToBottom, isSelfChat = false) => {\r\n    if (!locationData || !chatId || !user || !recipientEmail) {\r\n      console.error(\"Missing required data for sending location\");\r\n      return;\r\n    }\r\n\r\n    setSendingError(null);\r\n\r\n    try {\r\n      // Skip blocking check for self-chat\r\n      if (!isSelfChat) {\r\n        const isBlocked = await checkIfBlocked(user.email, recipientEmail);\r\n        if (isBlocked) {\r\n          setSendingError(\"You cannot send messages to this user. You have been blocked.\");\r\n          return;\r\n        }\r\n      }\r\n\r\n      // Update user's last seen\r\n      const userRef = doc(db, \"users\", user.uid);\r\n      await setDoc(\r\n        userRef,\r\n        {\r\n          lastSeen: serverTimestamp(),\r\n        },\r\n        { merge: true }\r\n      );\r\n\r\n      // Build message data\r\n      const messageData = {\r\n        timestamp: serverTimestamp(),\r\n        message: input || \"üìç Shared Location\",\r\n        user: user.email,\r\n        photoURL: user.photoURL,\r\n        location: {\r\n          latitude: locationData.latitude,\r\n          longitude: locationData.longitude,\r\n          url: locationData.url,\r\n        },\r\n        status: MESSAGE_STATUS.SENT,\r\n      };\r\n\r\n      // Add reply data if replying\r\n      const replyData = buildReplyData(replyingTo);\r\n      if (replyData) {\r\n        messageData.replyTo = replyData;\r\n      }\r\n\r\n      console.log(\"üìç Sending location message:\", messageData);\r\n\r\n      // Send the message\r\n      await addDoc(collection(db, \"chats\", chatId, \"messages\"), messageData);\r\n\r\n      // Reset states\r\n      setInput(\"\");\r\n      setLocationData(null);\r\n      setShowLocationPreview(false);\r\n      setReplyingTo(null);\r\n      scrollToBottom();\r\n      \r\n      console.log(\"‚úÖ Location message sent successfully\");\r\n    } catch (error) {\r\n      console.error(\"Error sending location:\", error);\r\n      setSendingError(`Failed to send location: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  return {\r\n    isGettingLocation,\r\n    showLocationPreview,\r\n    locationData,\r\n    getLocation,\r\n    cancelLocation,\r\n    sendLocation,\r\n  };\r\n}; "],"names":[],"mappings":"AAAA,6CAA6C;;;;;AAC7C;AACA;AAAA;AACA;AACA;AACA;;;;;;;AAEO,MAAM,cAAc,CAAC,QAAQ,MAAM;;IACxC,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,sIAAQ,EAAC;IAC3D,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,sIAAQ,EAAC;IAC/D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,sIAAQ,EAAC;IAEjD,MAAM,cAAc;QAClB,IAAI,CAAC,UAAU,WAAW,EAAE;YAC1B,MAAM;YACN;QACF;QAEA,qBAAqB;QACrB,uBAAuB;QAEvB,UAAU,WAAW,CAAC,kBAAkB,CACtC,CAAC;YACC,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,SAAS,MAAM;YAC/C,gBAAgB;gBACd;gBACA;gBACA,KAAK,CAAC,8BAA8B,EAAE,SAAS,CAAC,EAAE,WAAW;YAC/D;YACA,qBAAqB;QACvB,GACA,CAAC;YACC,QAAQ,KAAK,CAAC,2BAA2B;YACzC,IAAI,eAAe;YAEnB,OAAO,MAAM,IAAI;gBACf,KAAK,MAAM,iBAAiB;oBAC1B,eAAe;oBACf;gBACF,KAAK,MAAM,oBAAoB;oBAC7B,eAAe;oBACf;gBACF,KAAK,MAAM,OAAO;oBAChB,eAAe;oBACf;YACJ;YAEA,MAAM;YACN,qBAAqB;YACrB,uBAAuB;QACzB,GACA;YACE,oBAAoB;YACpB,SAAS;YACT,YAAY;QACd;IAEJ;IAEA,MAAM,iBAAiB;QACrB,gBAAgB;QAChB,uBAAuB;QACvB,qBAAqB;IACvB;IAEA,MAAM,eAAe,OAAO,OAAO,YAAY,iBAAiB,UAAU,eAAe,gBAAgB,aAAa,KAAK;QACzH,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,QAAQ,CAAC,gBAAgB;YACxD,QAAQ,KAAK,CAAC;YACd;QACF;QAEA,gBAAgB;QAEhB,IAAI;YACF,oCAAoC;YACpC,IAAI,CAAC,YAAY;gBACf,MAAM,YAAY,MAAM,IAAA,+IAAc,EAAC,KAAK,KAAK,EAAE;gBACnD,IAAI,WAAW;oBACb,gBAAgB;oBAChB;gBACF;YACF;YAEA,0BAA0B;YAC1B,MAAM,UAAU,IAAA,sKAAG,EAAC,0HAAE,EAAE,SAAS,KAAK,GAAG;YACzC,MAAM,IAAA,yKAAM,EACV,SACA;gBACE,UAAU,IAAA,kLAAe;YAC3B,GACA;gBAAE,OAAO;YAAK;YAGhB,qBAAqB;YACrB,MAAM,cAAc;gBAClB,WAAW,IAAA,kLAAe;gBAC1B,SAAS,SAAS;gBAClB,MAAM,KAAK,KAAK;gBAChB,UAAU,KAAK,QAAQ;gBACvB,UAAU;oBACR,UAAU,aAAa,QAAQ;oBAC/B,WAAW,aAAa,SAAS;oBACjC,KAAK,aAAa,GAAG;gBACvB;gBACA,QAAQ,mJAAc,CAAC,IAAI;YAC7B;YAEA,6BAA6B;YAC7B,MAAM,YAAY,IAAA,+IAAc,EAAC;YACjC,IAAI,WAAW;gBACb,YAAY,OAAO,GAAG;YACxB;YAEA,QAAQ,GAAG,CAAC,gCAAgC;YAE5C,mBAAmB;YACnB,MAAM,IAAA,yKAAM,EAAC,IAAA,6KAAU,EAAC,0HAAE,EAAE,SAAS,QAAQ,aAAa;YAE1D,eAAe;YACf,SAAS;YACT,gBAAgB;YAChB,uBAAuB;YACvB,cAAc;YACd;YAEA,QAAQ,GAAG,CAAC;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;YACzC,gBAAgB,CAAC,yBAAyB,EAAE,MAAM,OAAO,EAAE;QAC7D;IACF;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;IACF;AACF;GArIa","debugId":null}},
    {"offset": {"line": 950, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/hooks/useRecipientData.js"],"sourcesContent":["// components/ChatScreen/hooks/useRecipientData.js\r\n\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport { collection, query, where } from \"firebase/firestore\";\r\nimport { db } from \"../../../firebase\";\r\nimport { useMemo } from \"react\";\r\n\r\nexport const useRecipientData = (user, chat) => {\r\n  // ‚úÖ Return early with null values if data is not ready\r\n  if (!user || !chat || !chat.users || chat.users.length === 0) {\r\n    console.log(\"‚è≥ useRecipientData: Waiting for chat data...\", {\r\n      hasUser: !!user,\r\n      hasChat: !!chat,\r\n      hasUsers: !!chat?.users,\r\n      usersLength: chat?.users?.length,\r\n    });\r\n    return {\r\n      recipientEmail: null,\r\n      recipient: null,\r\n      recipientSnapshot: null,\r\n      isSelfChat: false,\r\n      isLoading: true,\r\n    };\r\n  }\r\n\r\n  // ‚úÖ Memoize recipient calculation to prevent unnecessary recalculations\r\n  const recipientData = useMemo(() => {\r\n    // ‚úÖ Clean the users array first\r\n    const cleanUsers = [...new Set(chat.users.filter(Boolean))];\r\n    \r\n    console.log(\"üîç useRecipientData: Processing chat\", {\r\n      originalUsers: chat.users,\r\n      cleanUsers: cleanUsers,\r\n      currentUser: user.email,\r\n    });\r\n\r\n    // Normalize emails for comparison\r\n    const normalizedUserEmail = user.email.toLowerCase();\r\n    const normalizedUsers = cleanUsers.map(email => email?.toLowerCase()).filter(Boolean);\r\n\r\n    // Check if this is a self-chat (all users are the same person)\r\n    // components/ChatScreen/hooks/useRecipientData.js (in the useMemo)\r\n\r\n// Check if this is a self-chat\r\nconst isSelfChat = (\r\n  // Single user that matches current user\r\n  (normalizedUsers.length === 1 && normalizedUsers[0] === normalizedUserEmail) ||\r\n  // All users are the same person (for 2-user arrays)\r\n  (normalizedUsers.length === 2 && normalizedUsers.every(email => email === normalizedUserEmail))\r\n);\r\n\r\n    console.log(\"üîç useRecipientData: Self-chat check\", {\r\n      normalizedUsers,\r\n      normalizedUserEmail,\r\n      isSelfChat,\r\n    });\r\n\r\n    // Handle self-chat case - use current user's email\r\n    if (isSelfChat) {\r\n      console.log(\"üí¨ useRecipientData: Self-chat detected - recipient is yourself\");\r\n      return {\r\n        recipientEmail: user.email,\r\n        isSelfChat: true,\r\n      };\r\n    }\r\n\r\n    // Find the OTHER user (not the current user)\r\n    const recipientEmail = cleanUsers.find(\r\n      (userEmail) => userEmail && userEmail.toLowerCase() !== normalizedUserEmail\r\n    );\r\n\r\n    // ‚úÖ IMPORTANT: If we can't find a recipient, DON'T fallback to user.email\r\n    if (!recipientEmail) {\r\n      console.error(\"‚ùå useRecipientData: Could not find recipient in chat.users\", {\r\n        cleanUsers,\r\n        currentUser: user.email,\r\n      });\r\n      return {\r\n        recipientEmail: null,\r\n        isSelfChat: false,\r\n      };\r\n    }\r\n\r\n    console.log(\"‚úÖ useRecipientData: Found recipient\", {\r\n      recipient: recipientEmail,\r\n      currentUser: user.email,\r\n      isSelfChat: false,\r\n    });\r\n\r\n    return {\r\n      recipientEmail,\r\n      isSelfChat: false,\r\n    };\r\n  }, [chat.users, user.email]);\r\n\r\n  // ‚úÖ Only query Firestore if we have a valid recipient email\r\n  const recipientQuery = recipientData.recipientEmail\r\n    ? query(collection(db, \"users\"), where(\"email\", \"==\", recipientData.recipientEmail))\r\n    : null;\r\n\r\n  const [recipientSnapshot] = useCollection(recipientQuery);\r\n\r\n  const recipient = recipientSnapshot?.docs?.[0]?.data();\r\n\r\n  return {\r\n    recipientEmail: recipientData.recipientEmail,\r\n    recipient: recipient || {\r\n      email: recipientData.recipientEmail,\r\n      photoURL: recipientData.isSelfChat ? user.photoURL : null,\r\n    },\r\n    recipientSnapshot,\r\n    isSelfChat: recipientData.isSelfChat,\r\n    isLoading: false,\r\n  };\r\n};"],"names":[],"mappings":"AAAA,kDAAkD;;;;;AAElD;AACA;AAAA;AACA;AACA;;;;;;AAEO,MAAM,mBAAmB,CAAC,MAAM;;IACrC,uDAAuD;IACvD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,KAAK,IAAI,KAAK,KAAK,CAAC,MAAM,KAAK,GAAG;QAC5D,QAAQ,GAAG,CAAC,gDAAgD;YAC1D,SAAS,CAAC,CAAC;YACX,SAAS,CAAC,CAAC;YACX,UAAU,CAAC,CAAC,MAAM;YAClB,aAAa,MAAM,OAAO;QAC5B;QACA,OAAO;YACL,gBAAgB;YAChB,WAAW;YACX,mBAAmB;YACnB,YAAY;YACZ,WAAW;QACb;IACF;IAEA,wEAAwE;IACxE,MAAM,gBAAgB,IAAA,qIAAO;mDAAC;YAC5B,gCAAgC;YAChC,MAAM,aAAa;mBAAI,IAAI,IAAI,KAAK,KAAK,CAAC,MAAM,CAAC;aAAU;YAE3D,QAAQ,GAAG,CAAC,wCAAwC;gBAClD,eAAe,KAAK,KAAK;gBACzB,YAAY;gBACZ,aAAa,KAAK,KAAK;YACzB;YAEA,kCAAkC;YAClC,MAAM,sBAAsB,KAAK,KAAK,CAAC,WAAW;YAClD,MAAM,kBAAkB,WAAW,GAAG;2EAAC,CAAA,QAAS,OAAO;0EAAe,MAAM,CAAC;YAE7E,+DAA+D;YAC/D,mEAAmE;YAEvE,+BAA+B;YAC/B,MAAM,aACJ,wCAAwC;YACvC,gBAAgB,MAAM,KAAK,KAAK,eAAe,CAAC,EAAE,KAAK,uBAEvD,gBAAgB,MAAM,KAAK,KAAK,gBAAgB,KAAK;2DAAC,CAAA,QAAS,UAAU;;YAGxE,QAAQ,GAAG,CAAC,wCAAwC;gBAClD;gBACA;gBACA;YACF;YAEA,mDAAmD;YACnD,IAAI,YAAY;gBACd,QAAQ,GAAG,CAAC;gBACZ,OAAO;oBACL,gBAAgB,KAAK,KAAK;oBAC1B,YAAY;gBACd;YACF;YAEA,6CAA6C;YAC7C,MAAM,iBAAiB,WAAW,IAAI;0EACpC,CAAC,YAAc,aAAa,UAAU,WAAW,OAAO;;YAG1D,0EAA0E;YAC1E,IAAI,CAAC,gBAAgB;gBACnB,QAAQ,KAAK,CAAC,8DAA8D;oBAC1E;oBACA,aAAa,KAAK,KAAK;gBACzB;gBACA,OAAO;oBACL,gBAAgB;oBAChB,YAAY;gBACd;YACF;YAEA,QAAQ,GAAG,CAAC,uCAAuC;gBACjD,WAAW;gBACX,aAAa,KAAK,KAAK;gBACvB,YAAY;YACd;YAEA,OAAO;gBACL;gBACA,YAAY;YACd;QACF;kDAAG;QAAC,KAAK,KAAK;QAAE,KAAK,KAAK;KAAC;IAE3B,4DAA4D;IAC5D,MAAM,iBAAiB,cAAc,cAAc,GAC/C,IAAA,wKAAK,EAAC,IAAA,6KAAU,EAAC,0HAAE,EAAE,UAAU,IAAA,wKAAK,EAAC,SAAS,MAAM,cAAc,cAAc,KAChF;IAEJ,MAAM,CAAC,kBAAkB,GAAG,IAAA,4LAAa,EAAC;IAE1C,MAAM,YAAY,mBAAmB,MAAM,CAAC,EAAE,EAAE;IAEhD,OAAO;QACL,gBAAgB,cAAc,cAAc;QAC5C,WAAW,aAAa;YACtB,OAAO,cAAc,cAAc;YACnC,UAAU,cAAc,UAAU,GAAG,KAAK,QAAQ,GAAG;QACvD;QACA;QACA,YAAY,cAAc,UAAU;QACpC,WAAW;IACb;AACF;GA3Ga;;QA6FiB,4LAAa","debugId":null}},
    {"offset": {"line": 1076, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/hooks/useMessages.js"],"sourcesContent":["// components/ChatScreen/hooks/useMessages.js\r\nimport { useMemo } from \"react\";\r\nimport { collection, query, orderBy } from \"firebase/firestore\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport { db } from \"../../../firebase\";\r\n\r\nexport const useMessages = (chatId) => {\r\n  const messagesRef = useMemo(() => {\r\n    if (!chatId) return null;\r\n    return collection(db, \"chats\", chatId, \"messages\");\r\n  }, [chatId]);\r\n\r\n  const messagesQuery = useMemo(() => {\r\n    if (!messagesRef) return null;\r\n    return query(messagesRef, orderBy(\"timestamp\", \"asc\"));\r\n  }, [messagesRef]);\r\n\r\n  const [messagesSnapshot] = useCollection(messagesQuery || null);\r\n\r\n  return {\r\n    messagesSnapshot,\r\n  };\r\n};"],"names":[],"mappings":"AAAA,6CAA6C;;;;;AAC7C;AACA;AAAA;AACA;AACA;;;;;;AAEO,MAAM,cAAc,CAAC;;IAC1B,MAAM,cAAc,IAAA,qIAAO;4CAAC;YAC1B,IAAI,CAAC,QAAQ,OAAO;YACpB,OAAO,IAAA,6KAAU,EAAC,0HAAE,EAAE,SAAS,QAAQ;QACzC;2CAAG;QAAC;KAAO;IAEX,MAAM,gBAAgB,IAAA,qIAAO;8CAAC;YAC5B,IAAI,CAAC,aAAa,OAAO;YACzB,OAAO,IAAA,wKAAK,EAAC,aAAa,IAAA,0KAAO,EAAC,aAAa;QACjD;6CAAG;QAAC;KAAY;IAEhB,MAAM,CAAC,iBAAiB,GAAG,IAAA,4LAAa,EAAC,iBAAiB;IAE1D,OAAO;QACL;IACF;AACF;GAhBa;;QAWgB,4LAAa","debugId":null}},
    {"offset": {"line": 1126, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/utils/messageStatus.js"],"sourcesContent":["// components/ChatScreen/utils/messageStatus.js\r\n\r\nimport { \r\n  collection, \r\n  query, \r\n  where, \r\n  getDocs, \r\n  updateDoc, \r\n  doc,\r\n  onSnapshot,\r\n  writeBatch,\r\n  serverTimestamp,\r\n  getDoc\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../../../firebase\";\r\nimport { MESSAGE_STATUS } from \"../constants\";\r\n\r\n/**\r\n * Verify that a chat actually involves the specified users\r\n * ‚úÖ FIXED: Uses 'users' field to match your database structure\r\n */\r\nconst verifyChatParticipants = async (chatId, userEmail1, userEmail2) => {\r\n  try {\r\n    if (!chatId) {\r\n      console.error(`‚ùå verifyChatParticipants: chatId is missing`);\r\n      return false;\r\n    }\r\n\r\n    const chatRef = doc(db, \"chats\", chatId);\r\n    const chatSnap = await getDoc(chatRef);\r\n    \r\n    if (!chatSnap.exists()) {\r\n      console.error(`‚ùå [Chat: ${chatId}] Chat does not exist`);\r\n      return false;\r\n    }\r\n    \r\n    const chatData = chatSnap.data();\r\n    \r\n    // ‚úÖ FIX: Use 'users' field (your actual database structure)\r\n    const participants = chatData.users || chatData.participants || [];\r\n    \r\n    console.log(`üîç [Chat: ${chatId}] Verifying participants:`, {\r\n      chatUsers: participants,\r\n      checkingUser1: userEmail1,\r\n      checkingUser2: userEmail2,\r\n      chatDataFields: Object.keys(chatData),\r\n    });\r\n    \r\n    if (!Array.isArray(participants)) {\r\n      console.error(`‚ùå [Chat: ${chatId}] 'users' field is not an array:`, typeof participants, participants);\r\n      return false;\r\n    }\r\n\r\n    if (participants.length === 0) {\r\n      console.error(`‚ùå [Chat: ${chatId}] No users in chat`);\r\n      return false;\r\n    }\r\n    \r\n    // Check if both users are participants\r\n    const hasUser1 = participants.includes(userEmail1);\r\n    const hasUser2 = !userEmail2 || participants.includes(userEmail2);\r\n    \r\n    if (!hasUser1) {\r\n      console.error(`‚ùå [Chat: ${chatId}] User1 (${userEmail1}) NOT in chat. Chat users: [${participants.join(', ')}]`);\r\n      return false;\r\n    }\r\n    \r\n    if (!hasUser2) {\r\n      console.error(`‚ùå [Chat: ${chatId}] User2 (${userEmail2}) NOT in chat. Chat users: [${participants.join(', ')}]`);\r\n      return false;\r\n    }\r\n    \r\n    console.log(`‚úÖ [Chat: ${chatId}] Participants verified: Both ${userEmail1} and ${userEmail2} are in chat`);\r\n    return true;\r\n  } catch (error) {\r\n    console.error(`‚ùå [Chat: ${chatId}] Error verifying chat participants:`, error);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Verify message belongs to the specific chat\r\n */\r\nconst verifyMessageInChat = (messageDoc, expectedChatId) => {\r\n  const messagePath = messageDoc.ref.path;\r\n  const pathParts = messagePath.split('/');\r\n  \r\n  // Path should be: chats/{chatId}/messages/{messageId}\r\n  if (pathParts.length >= 4 && pathParts[0] === 'chats' && pathParts[2] === 'messages') {\r\n    const actualChatId = pathParts[1];\r\n    \r\n    if (actualChatId !== expectedChatId) {\r\n      console.error(`‚ùå Message ${messageDoc.id} belongs to chat ${actualChatId}, not ${expectedChatId}`);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  \r\n  console.error(`‚ùå Invalid message path: ${messagePath}`);\r\n  return false;\r\n};\r\n\r\n/**\r\n * Mark a single message as delivered\r\n */\r\nexport const markMessageAsDelivered = async (chatId, messageId) => {\r\n  try {\r\n    if (!chatId || !messageId) {\r\n      console.error(`‚ùå markMessageAsDelivered: Missing chatId or messageId`, { chatId, messageId });\r\n      return;\r\n    }\r\n\r\n    const messageRef = doc(db, \"chats\", chatId, \"messages\", messageId);\r\n    \r\n    // Verify message exists in this specific chat\r\n    const messageSnap = await getDoc(messageRef);\r\n    if (!messageSnap.exists()) {\r\n      console.error(`‚ùå [Chat: ${chatId}] Message ${messageId} not found`);\r\n      return;\r\n    }\r\n    \r\n    await updateDoc(messageRef, {\r\n      status: MESSAGE_STATUS.DELIVERED,\r\n      deliveredAt: serverTimestamp(),\r\n    });\r\n    console.log(`‚úÖ [Chat: ${chatId}] Message ${messageId} marked as DELIVERED`);\r\n  } catch (error) {\r\n    console.error(`‚ùå [Chat: ${chatId}] Error marking message as delivered:`, error);\r\n  }\r\n};\r\n\r\n/**\r\n * Mark a single message as read\r\n */\r\nexport const markMessageAsRead = async (chatId, messageId) => {\r\n  try {\r\n    if (!chatId || !messageId) {\r\n      console.error(`‚ùå markMessageAsRead: Missing chatId or messageId`, { chatId, messageId });\r\n      return;\r\n    }\r\n\r\n    const messageRef = doc(db, \"chats\", chatId, \"messages\", messageId);\r\n    \r\n    // Verify message exists in this specific chat\r\n    const messageSnap = await getDoc(messageRef);\r\n    if (!messageSnap.exists()) {\r\n      console.error(`‚ùå [Chat: ${chatId}] Message ${messageId} not found`);\r\n      return;\r\n    }\r\n    \r\n    await updateDoc(messageRef, {\r\n      status: MESSAGE_STATUS.READ,\r\n      readAt: serverTimestamp(),\r\n    });\r\n    console.log(`‚úÖ [Chat: ${chatId}] Message ${messageId} marked as READ`);\r\n  } catch (error) {\r\n    console.error(`‚ùå [Chat: ${chatId}] Error marking message as read:`, error);\r\n  }\r\n};\r\n\r\n/**\r\n * Check if recipient is actually online (with threshold of 30 seconds)\r\n */\r\nexport const isRecipientOnline = async (recipientEmail) => {\r\n  try {\r\n    if (!recipientEmail) {\r\n      console.log(`‚ùì isRecipientOnline: No recipientEmail provided`);\r\n      return false;\r\n    }\r\n\r\n    const usersRef = collection(db, \"users\");\r\n    const q = query(usersRef, where(\"email\", \"==\", recipientEmail));\r\n    \r\n    const snapshot = await getDocs(q);\r\n    \r\n    if (snapshot.empty) {\r\n      console.log(`‚ùì Recipient ${recipientEmail} not found in users`);\r\n      return false;\r\n    }\r\n\r\n    const recipientData = snapshot.docs[0].data();\r\n    const lastSeen = recipientData.lastSeen?.toDate?.() || new Date(recipientData.lastSeen);\r\n    const now = new Date();\r\n    const secondsAgo = (now - lastSeen) / 1000;\r\n\r\n    const isOnline = secondsAgo < 30;\r\n    \r\n    if (isOnline) {\r\n      console.log(`üü¢ Recipient ${recipientEmail} IS online (last seen ${Math.round(secondsAgo)}s ago)`);\r\n    } else {\r\n      console.log(`üî¥ Recipient ${recipientEmail} OFFLINE (last seen ${Math.round(secondsAgo)}s ago)`);\r\n    }\r\n\r\n    return isOnline;\r\n  } catch (error) {\r\n    console.error(\"‚ùå Error checking recipient online status:\", error);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Mark YOUR messages (sent by currentUser) as DELIVERED ONLY when recipient is online\r\n */\r\nexport const markYourMessagesAsDelivered = async (chatId, recipientEmail, currentUserEmail) => {\r\n  try {\r\n    if (!chatId || !currentUserEmail) {\r\n      console.error(`‚ùå markYourMessagesAsDelivered: Missing required params`, {\r\n        chatId,\r\n        currentUserEmail,\r\n        recipientEmail\r\n      });\r\n      return;\r\n    }\r\n\r\n    console.log(`üîç [Chat: ${chatId}] Attempting to mark YOUR messages as DELIVERED`);\r\n    console.log(`   Current User: ${currentUserEmail}, Recipient: ${recipientEmail}`);\r\n    \r\n    // ‚úÖ CRITICAL: Verify this is the correct chat BEFORE querying messages\r\n    const isValidChat = await verifyChatParticipants(chatId, currentUserEmail, recipientEmail);\r\n    if (!isValidChat) {\r\n      console.error(`‚ùå [Chat: ${chatId}] Chat validation failed - ABORTING message status update`);\r\n      return;\r\n    }\r\n    \r\n    // Check if recipient is actually online\r\n    const online = await isRecipientOnline(recipientEmail);\r\n    \r\n    if (!online && recipientEmail) {\r\n      console.log(`‚è≥ [Chat: ${chatId}] NOT marking YOUR messages as DELIVERED - recipient is offline`);\r\n      return;\r\n    }\r\n\r\n    const messagesRef = collection(db, \"chats\", chatId, \"messages\");\r\n    const q = query(\r\n      messagesRef,\r\n      where(\"user\", \"==\", currentUserEmail),\r\n      where(\"status\", \"==\", MESSAGE_STATUS.SENT)\r\n    );\r\n    \r\n    const snapshot = await getDocs(q);\r\n    \r\n    if (snapshot.empty) {\r\n      console.log(`‚úì [Chat: ${chatId}] No SENT messages from you to mark as DELIVERED`);\r\n      return;\r\n    }\r\n\r\n    console.log(`üìã [Chat: ${chatId}] Found ${snapshot.docs.length} messages to update`);\r\n\r\n    const batch = writeBatch(db);\r\n    let updateCount = 0;\r\n    \r\n    snapshot.docs.forEach((document) => {\r\n      // Double-check message belongs to this chat\r\n      if (!verifyMessageInChat(document, chatId)) {\r\n        console.error(`‚ö†Ô∏è [Chat: ${chatId}] Skipping message ${document.id} - path mismatch`);\r\n        return;\r\n      }\r\n\r\n      const msgData = document.data();\r\n      console.log(`  üìù [Chat: ${chatId}] Updating message ${document.id} from ${msgData.user}`);\r\n      \r\n      batch.update(document.ref, {\r\n        status: MESSAGE_STATUS.DELIVERED,\r\n        deliveredAt: serverTimestamp(),\r\n      });\r\n      updateCount++;\r\n    });\r\n\r\n    if (updateCount === 0) {\r\n      console.log(`‚ö†Ô∏è [Chat: ${chatId}] No valid messages to update after verification`);\r\n      return;\r\n    }\r\n\r\n    await batch.commit();\r\n    console.log(`‚úÖ [Chat: ${chatId}] Marked ${updateCount} of YOUR messages as DELIVERED`);\r\n  } catch (error) {\r\n    console.error(`‚ùå [Chat: ${chatId}] Error marking YOUR messages as delivered:`, error);\r\n  }\r\n};\r\n\r\n/**\r\n * Mark recipient's messages (FROM recipientEmail) as DELIVERED when you open chat\r\n */\r\nexport const markRecipientMessagesAsDelivered = async (chatId, recipientEmail, currentUserEmail = null) => {\r\n  try {\r\n    if (!chatId || !recipientEmail) {\r\n      console.error(`‚ùå markRecipientMessagesAsDelivered: Missing required params`, {\r\n        chatId,\r\n        recipientEmail,\r\n        currentUserEmail\r\n      });\r\n      return;\r\n    }\r\n\r\n    console.log(`üîç [Chat: ${chatId}] Attempting to mark RECIPIENT messages as DELIVERED`);\r\n    console.log(`   Recipient: ${recipientEmail}, Current User: ${currentUserEmail}`);\r\n    \r\n    // ‚úÖ CRITICAL: Verify this is the correct chat\r\n    if (currentUserEmail) {\r\n      const isValidChat = await verifyChatParticipants(chatId, currentUserEmail, recipientEmail);\r\n      if (!isValidChat) {\r\n        console.error(`‚ùå [Chat: ${chatId}] Chat validation failed - ABORTING`);\r\n        return;\r\n      }\r\n    }\r\n    \r\n    const messagesRef = collection(db, \"chats\", chatId, \"messages\");\r\n    const q = query(\r\n      messagesRef,\r\n      where(\"user\", \"==\", recipientEmail),\r\n      where(\"status\", \"==\", MESSAGE_STATUS.SENT)\r\n    );\r\n    \r\n    const snapshot = await getDocs(q);\r\n    \r\n    if (snapshot.empty) {\r\n      console.log(`‚úì [Chat: ${chatId}] No SENT messages from recipient to mark as DELIVERED`);\r\n      return;\r\n    }\r\n\r\n    console.log(`üìã [Chat: ${chatId}] Found ${snapshot.docs.length} messages to update`);\r\n\r\n    const batch = writeBatch(db);\r\n    let updateCount = 0;\r\n    \r\n    snapshot.docs.forEach((document) => {\r\n      if (!verifyMessageInChat(document, chatId)) {\r\n        console.error(`‚ö†Ô∏è [Chat: ${chatId}] Skipping message ${document.id} - path mismatch`);\r\n        return;\r\n      }\r\n\r\n      const msgData = document.data();\r\n      console.log(`  üìù [Chat: ${chatId}] Updating message ${document.id} from ${msgData.user}`);\r\n      \r\n      batch.update(document.ref, {\r\n        status: MESSAGE_STATUS.DELIVERED,\r\n        deliveredAt: serverTimestamp(),\r\n      });\r\n      updateCount++;\r\n    });\r\n\r\n    if (updateCount === 0) {\r\n      console.log(`‚ö†Ô∏è [Chat: ${chatId}] No valid messages to update after verification`);\r\n      return;\r\n    }\r\n\r\n    await batch.commit();\r\n    console.log(`‚úÖ [Chat: ${chatId}] Marked ${updateCount} messages from recipient as DELIVERED`);\r\n  } catch (error) {\r\n    console.error(`‚ùå [Chat: ${chatId}] Error marking recipient messages as delivered:`, error);\r\n  }\r\n};\r\n\r\n/**\r\n * Mark recipient's messages (FROM recipientEmail) as READ when you read them\r\n */\r\nexport const markRecipientMessagesAsRead = async (chatId, recipientEmail, currentUserEmail = null) => {\r\n  try {\r\n    if (!chatId || !recipientEmail) {\r\n      console.error(`‚ùå markRecipientMessagesAsRead: Missing required params`, {\r\n        chatId,\r\n        recipientEmail,\r\n        currentUserEmail\r\n      });\r\n      return;\r\n    }\r\n\r\n    console.log(`üîç [Chat: ${chatId}] Attempting to mark RECIPIENT messages as READ`);\r\n    console.log(`   Recipient: ${recipientEmail}, Current User: ${currentUserEmail}`);\r\n    \r\n    // ‚úÖ CRITICAL: Verify this is the correct chat\r\n    if (currentUserEmail) {\r\n      const isValidChat = await verifyChatParticipants(chatId, currentUserEmail, recipientEmail);\r\n      if (!isValidChat) {\r\n        console.error(`‚ùå [Chat: ${chatId}] Chat validation failed - ABORTING`);\r\n        return;\r\n      }\r\n    }\r\n    \r\n    const messagesRef = collection(db, \"chats\", chatId, \"messages\");\r\n    \r\n    // Get all messages that are not yet read\r\n    const sentQuery = query(\r\n      messagesRef,\r\n      where(\"user\", \"==\", recipientEmail),\r\n      where(\"status\", \"==\", MESSAGE_STATUS.SENT)\r\n    );\r\n    \r\n    const deliveredQuery = query(\r\n      messagesRef,\r\n      where(\"user\", \"==\", recipientEmail),\r\n      where(\"status\", \"==\", MESSAGE_STATUS.DELIVERED)\r\n    );\r\n\r\n    const [sentSnapshot, deliveredSnapshot] = await Promise.all([\r\n      getDocs(sentQuery),\r\n      getDocs(deliveredQuery)\r\n    ]);\r\n\r\n    const allDocs = [...sentSnapshot.docs, ...deliveredSnapshot.docs];\r\n    \r\n    if (allDocs.length === 0) {\r\n      console.log(`‚úì [Chat: ${chatId}] No unread messages from recipient to mark as READ`);\r\n      return;\r\n    }\r\n\r\n    console.log(`üìã [Chat: ${chatId}] Found ${allDocs.length} messages to update`);\r\n\r\n    const batch = writeBatch(db);\r\n    let updateCount = 0;\r\n    \r\n    allDocs.forEach((document) => {\r\n      if (!verifyMessageInChat(document, chatId)) {\r\n        console.error(`‚ö†Ô∏è [Chat: ${chatId}] Skipping message ${document.id} - path mismatch`);\r\n        return;\r\n      }\r\n\r\n      const msgData = document.data();\r\n      console.log(`  üìù [Chat: ${chatId}] Updating message ${document.id} from ${msgData.user}`);\r\n      \r\n      batch.update(document.ref, {\r\n        status: MESSAGE_STATUS.READ,\r\n        readAt: serverTimestamp(),\r\n      });\r\n      updateCount++;\r\n    });\r\n\r\n    if (updateCount === 0) {\r\n      console.log(`‚ö†Ô∏è [Chat: ${chatId}] No valid messages to update after verification`);\r\n      return;\r\n    }\r\n\r\n    await batch.commit();\r\n    console.log(`‚úÖ [Chat: ${chatId}] Marked ${updateCount} messages from recipient as READ`);\r\n  } catch (error) {\r\n    console.error(`‚ùå [Chat: ${chatId}] Error marking recipient messages as read:`, error);\r\n  }\r\n};\r\n\r\n/**\r\n * Mark YOUR messages (sent by currentUser) as READ when recipient has read them\r\n */\r\nexport const markYourMessagesAsRead = async (chatId, currentUserEmail, recipientEmail = null) => {\r\n  try {\r\n    if (!chatId || !currentUserEmail) {\r\n      console.error(`‚ùå markYourMessagesAsRead: Missing required params`, {\r\n        chatId,\r\n        currentUserEmail,\r\n        recipientEmail\r\n      });\r\n      return;\r\n    }\r\n\r\n    console.log(`üîç [Chat: ${chatId}] Attempting to mark YOUR messages as READ`);\r\n    console.log(`   Current User: ${currentUserEmail}, Recipient: ${recipientEmail}`);\r\n    \r\n    // ‚úÖ CRITICAL: Verify this is the correct chat\r\n    if (recipientEmail) {\r\n      const isValidChat = await verifyChatParticipants(chatId, currentUserEmail, recipientEmail);\r\n      if (!isValidChat) {\r\n        console.error(`‚ùå [Chat: ${chatId}] Chat validation failed - ABORTING`);\r\n        return;\r\n      }\r\n    }\r\n    \r\n    const messagesRef = collection(db, \"chats\", chatId, \"messages\");\r\n    \r\n    const sentQuery = query(\r\n      messagesRef,\r\n      where(\"user\", \"==\", currentUserEmail),\r\n      where(\"status\", \"==\", MESSAGE_STATUS.SENT)\r\n    );\r\n    \r\n    const deliveredQuery = query(\r\n      messagesRef,\r\n      where(\"user\", \"==\", currentUserEmail),\r\n      where(\"status\", \"==\", MESSAGE_STATUS.DELIVERED)\r\n    );\r\n\r\n    const [sentSnapshot, deliveredSnapshot] = await Promise.all([\r\n      getDocs(sentQuery),\r\n      getDocs(deliveredQuery)\r\n    ]);\r\n\r\n    const allDocs = [...sentSnapshot.docs, ...deliveredSnapshot.docs];\r\n    \r\n    if (allDocs.length === 0) {\r\n      console.log(`‚úì [Chat: ${chatId}] No unread messages from you to update`);\r\n      return;\r\n    }\r\n\r\n    console.log(`üìã [Chat: ${chatId}] Found ${allDocs.length} messages to update`);\r\n\r\n    const batch = writeBatch(db);\r\n    let updateCount = 0;\r\n    \r\n    allDocs.forEach((document) => {\r\n      if (!verifyMessageInChat(document, chatId)) {\r\n        console.error(`‚ö†Ô∏è [Chat: ${chatId}] Skipping message ${document.id} - path mismatch`);\r\n        return;\r\n      }\r\n\r\n      const msgData = document.data();\r\n      console.log(`  üìù [Chat: ${chatId}] Updating message ${document.id} from ${msgData.user}`);\r\n      \r\n      batch.update(document.ref, {\r\n        status: MESSAGE_STATUS.READ,\r\n        readAt: serverTimestamp(),\r\n      });\r\n      updateCount++;\r\n    });\r\n\r\n    if (updateCount === 0) {\r\n      console.log(`‚ö†Ô∏è [Chat: ${chatId}] No valid messages to update after verification`);\r\n      return;\r\n    }\r\n\r\n    await batch.commit();\r\n    console.log(`‚úÖ [Chat: ${chatId}] Marked ${updateCount} of YOUR messages as READ`);\r\n  } catch (error) {\r\n    console.error(`‚ùå [Chat: ${chatId}] Error marking YOUR messages as read:`, error);\r\n  }\r\n};\r\n\r\n// Kept for backwards compatibility\r\nexport const markUserMessagesAsDelivered = markRecipientMessagesAsDelivered;\r\nexport const markUserMessagesAsRead = markRecipientMessagesAsRead;\r\n\r\n/**\r\n * Listen to recipient's online status and mark messages as delivered\r\n */\r\nexport const subscribeToRecipientStatus = (recipientEmail, onStatusChange) => {\r\n  if (!recipientEmail) {\r\n    console.error(`‚ùå subscribeToRecipientStatus: Missing recipientEmail`);\r\n    return () => {}; // Return empty unsubscribe function\r\n  }\r\n\r\n  const usersRef = collection(db, \"users\");\r\n  const q = query(usersRef, where(\"email\", \"==\", recipientEmail));\r\n  \r\n  const unsubscribe = onSnapshot(q, (snapshot) => {\r\n    if (!snapshot.empty) {\r\n      const recipientData = snapshot.docs[0].data();\r\n      console.log(`üëÅÔ∏è Recipient ${recipientEmail} status:`, {\r\n        lastSeen: recipientData.lastSeen?.toDate?.() || recipientData.lastSeen,\r\n      });\r\n      onStatusChange(recipientData);\r\n    }\r\n  }, (error) => {\r\n    console.error(\"‚ùå Error subscribing to recipient status:\", error);\r\n  });\r\n\r\n  return unsubscribe;\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1565, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/hooks/useMessageStatus.js"],"sourcesContent":["// components/ChatScreen/hooks/useMessageStatus.js\r\n\r\nimport { useEffect, useCallback, useRef } from \"react\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { auth, db } from \"../../../firebase\";\r\nimport { collection, query, where, onSnapshot } from \"firebase/firestore\";\r\nimport {\r\n  markYourMessagesAsDelivered,\r\n  markRecipientMessagesAsDelivered,\r\n  markRecipientMessagesAsRead,\r\n  markYourMessagesAsRead,\r\n} from \"../utils/messageStatus\";\r\nimport CheckIcon from '@mui/icons-material/Check';\r\nimport DoneAllIcon from '@mui/icons-material/DoneAll';\r\nimport AccessTimeIcon from '@mui/icons-material/AccessTime';\r\nimport ErrorIcon from '@mui/icons-material/Error';\r\nimport { MESSAGE_STATUS } from '../constants';\r\nconst MessageStatus = ({ status, darkMode }) => {\r\n  const getStatusIcon = () => {\r\n    switch (status) {\r\n      case MESSAGE_STATUS.SENDING:\r\n        return <AccessTimeIcon style={{ fontSize: 16, color: darkMode ? '#8696a0' : '#667781' }} />;\r\n      \r\n      case MESSAGE_STATUS.SENT:\r\n        return <CheckIcon style={{ fontSize: 16, color: darkMode ? '#8696a0' : '#667781' }} />;\r\n      \r\n      case MESSAGE_STATUS.DELIVERED:\r\n        return <DoneAllIcon style={{ fontSize: 16, color: darkMode ? '#8696a0' : '#667781' }} />;\r\n      \r\n      case MESSAGE_STATUS.READ:\r\n        return <DoneAllIcon style={{ fontSize: 16, color: '#53bdeb' }} />; // Blue checkmarks\r\n      \r\n      case MESSAGE_STATUS.FAILED:\r\n        return <ErrorIcon style={{ fontSize: 16, color: '#f44336' }} />;\r\n      \r\n      default:\r\n        return <CheckIcon style={{ fontSize: 16, color: darkMode ? '#8696a0' : '#667781' }} />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <span style={{ display: 'inline-flex', alignItems: 'center', marginRight: 4 }}>\r\n      {getStatusIcon()}\r\n    </span>\r\n  );\r\n};\r\n\r\nexport default MessageStatus;\r\n/**\r\n * Hook to manage WhatsApp-like message status (SENT ‚Üí DELIVERED ‚Üí READ)\r\n * \r\n * For YOUR messages:\r\n * - SENT: Message sent\r\n * - DELIVERED: Recipient opened the app (when they go online)\r\n * - READ: Recipient opened the chat and read your message\r\n * \r\n * For RECIPIENT'S messages:\r\n * - SENT: Message sent\r\n * - DELIVERED: You opened the app (immediately when chat opens)\r\n * - READ: You read the message (when chat is visible/focused)\r\n */\r\nexport const useMessageStatus = (chatId, recipientEmail, currentUserEmail, isSelfChat = false) => {\r\n  const [user] = useAuthState(auth);\r\n  const selfChatTimeoutRef = useRef(null); // ‚úÖ NEW: Track timeout\r\n\r\n  // ‚úÖ NEW: Check if all required data is ready\r\n  const isReady = !!(chatId && user && recipientEmail && currentUserEmail);\r\n\r\n // ‚úÖ Mark YOUR messages as DELIVERED when recipient comes online\r\nuseEffect(() => {\r\n  // ‚úÖ CRITICAL: Don't run if data is not ready\r\n  if (!isReady) {\r\n    console.log(`‚è≥ [Chat: ${chatId}] Waiting for data before setting up online listener...`);\r\n    return;\r\n  }\r\n\r\n  if (isSelfChat) {\r\n    console.log(`‚è≠Ô∏è [Chat: ${chatId}] Skipping YOUR DELIVERED update - self-chat`);\r\n    return;\r\n  }\r\n\r\n  // Sanity check: Don't monitor yourself\r\n  if (currentUserEmail === recipientEmail) {\r\n    console.warn(`‚ö†Ô∏è [Chat: ${chatId}] Skipping online listener - userEmail matches recipientEmail`);\r\n    return;\r\n  }\r\n\r\n  console.log(`üëÅÔ∏è [Chat: ${chatId}] Listening for ${recipientEmail} to come online...`);\r\n  console.log(`   Your messages from: ${currentUserEmail}`);\r\n\r\n  // ‚úÖ CRITICAL: Capture current values to avoid stale closures\r\n  const currentChatId = chatId;\r\n  const currentRecipient = recipientEmail;\r\n  const currentUser = currentUserEmail;\r\n\r\n  // Set up real-time listener for recipient's online status\r\n  const usersRef = collection(db, \"users\");\r\n  const q = query(usersRef, where(\"email\", \"==\", currentRecipient));\r\n\r\n  const unsubscribe = onSnapshot(\r\n    q,\r\n    async (snapshot) => {\r\n      // ‚úÖ Prevent running if chat has changed (stale listener)\r\n      if (chatId !== currentChatId) {\r\n        console.log(\r\n          `‚ö†Ô∏è [OLD Chat: ${currentChatId}] Ignoring stale listener callback - current chat is ${chatId}`\r\n        );\r\n        return;\r\n      }\r\n\r\n      if (snapshot.empty) {\r\n        console.log(`‚ùì [Chat: ${currentChatId}] Recipient ${currentRecipient} not found in users collection`);\r\n        return;\r\n      }\r\n\r\n      const recipientData = snapshot.docs[0].data();\r\n      const lastSeen = recipientData.lastSeen?.toDate?.() || new Date(recipientData.lastSeen);\r\n      const now = new Date();\r\n      const secondsAgo = (now - lastSeen) / 1000;\r\n\r\n      if (secondsAgo < 30) {\r\n        console.log(`üü¢ [Chat: ${currentChatId}] RECIPIENT CAME ONLINE! (${Math.round(secondsAgo)}s ago)`);\r\n        console.log(`   Updating YOUR messages from ${currentUser} to DELIVERED`);\r\n        await markYourMessagesAsDelivered(currentChatId, currentRecipient, currentUser);\r\n      } else {\r\n        console.log(`üî¥ [Chat: ${currentChatId}] Recipient offline (${Math.round(secondsAgo)}s ago)`);\r\n      }\r\n    },\r\n    (error) => {\r\n      console.error(`‚ùå [Chat: ${currentChatId}] Error listening to recipient status:`, error);\r\n    }\r\n  );\r\n\r\n  return () => {\r\n    console.log(`üîå [Chat: ${currentChatId}] Stopping recipient status listener for ${currentRecipient}`);\r\n    unsubscribe();\r\n  };\r\n}, [chatId, recipientEmail, currentUserEmail, isSelfChat, isReady]);\r\n\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1771, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/hooks/useDisplayName.js"],"sourcesContent":["// components/ChatScreen/hooks/useDisplayName.js\r\nimport { useState, useEffect } from \"react\";\r\nimport { doc, onSnapshot } from \"firebase/firestore\";\r\nimport { db } from \"../../../firebase\";\r\n\r\nexport const useDisplayName = (userId, recipientEmail) => {\r\n  const [displayName, setDisplayName] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!userId || !recipientEmail) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    console.log(`üëÄ Watching display name for: users/${userId}/contacts/${recipientEmail}`);\r\n\r\n    const contactRef = doc(db, \"users\", userId, \"contacts\", recipientEmail);\r\n    \r\n    const unsubscribe = onSnapshot(\r\n      contactRef,\r\n      (snapshot) => {\r\n        if (snapshot.exists()) {\r\n          const customName = snapshot.data().displayName;\r\n          console.log(`‚úÖ Display name found:`, customName);\r\n          setDisplayName(customName);\r\n        } else {\r\n          console.log(`‚ÑπÔ∏è No custom display name set`);\r\n          setDisplayName(null);\r\n        }\r\n        setLoading(false);\r\n      },\r\n      (error) => {\r\n        console.error(\"‚ùå Error fetching display name:\", error);\r\n        setDisplayName(null);\r\n        setLoading(false);\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      console.log(`üîå Unsubscribing from display name listener`);\r\n      unsubscribe();\r\n    };\r\n  }, [userId, recipientEmail]);\r\n\r\n  return { displayName, loading };\r\n};"],"names":[],"mappings":"AAAA,gDAAgD;;;;;AAChD;AACA;AAAA;AACA;;;;;AAEO,MAAM,iBAAiB,CAAC,QAAQ;;IACrC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,sIAAQ,EAAC;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,sIAAQ,EAAC;IAEvC,IAAA,uIAAS;oCAAC;YACR,IAAI,CAAC,UAAU,CAAC,gBAAgB;gBAC9B,WAAW;gBACX;YACF;YAEA,QAAQ,GAAG,CAAC,CAAC,oCAAoC,EAAE,OAAO,UAAU,EAAE,gBAAgB;YAEtF,MAAM,aAAa,IAAA,sKAAG,EAAC,0HAAE,EAAE,SAAS,QAAQ,YAAY;YAExD,MAAM,cAAc,IAAA,6KAAU,EAC5B;wDACA,CAAC;oBACC,IAAI,SAAS,MAAM,IAAI;wBACrB,MAAM,aAAa,SAAS,IAAI,GAAG,WAAW;wBAC9C,QAAQ,GAAG,CAAC,CAAC,qBAAqB,CAAC,EAAE;wBACrC,eAAe;oBACjB,OAAO;wBACL,QAAQ,GAAG,CAAC,CAAC,6BAA6B,CAAC;wBAC3C,eAAe;oBACjB;oBACA,WAAW;gBACb;;wDACA,CAAC;oBACC,QAAQ,KAAK,CAAC,kCAAkC;oBAChD,eAAe;oBACf,WAAW;gBACb;;YAGF;4CAAO;oBACL,QAAQ,GAAG,CAAC,CAAC,2CAA2C,CAAC;oBACzD;gBACF;;QACF;mCAAG;QAAC;QAAQ;KAAe;IAE3B,OAAO;QAAE;QAAa;IAAQ;AAChC;GAzCa","debugId":null}},
    {"offset": {"line": 1839, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/components/ChatHeader.jsx"],"sourcesContent":["// components/ChatScreen/components/ChatHeader.jsx\r\nimport React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Avatar, IconButton } from \"@mui/material\";\r\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\r\nimport MenuIcon from \"@mui/icons-material/Menu\";\r\nimport TimeAgo from \"timeago-react\";\r\n\r\nfunction ChatHeader({\r\n  recipient,\r\n  recipientEmail,\r\n  recipientSnapshot,\r\n  isSelfChat,\r\n  customDisplayName,\r\n  onMoreClick,\r\n  darkMode,\r\n  isMobile,\r\n  onToggleSidebar,\r\n}) {\r\n  const getHeaderTitle = () => {\r\n    if (isSelfChat) {\r\n      return `${recipientEmail} (You)`;\r\n    }\r\n    // Use custom display name if available\r\n    if (customDisplayName) {\r\n      return customDisplayName;\r\n    }\r\n    return recipientEmail;\r\n  };\r\n\r\n  const getStatusText = () => {\r\n    if (isSelfChat) {\r\n      return \"Message yourself\";\r\n    }\r\n    \r\n    if (recipient?.lastSeen?.toDate) {\r\n      return (\r\n        <>\r\n          Last active: <TimeAgo datetime={recipient.lastSeen.toDate()} />\r\n        </>\r\n      );\r\n    }\r\n    \r\n    return \"Loading...\";\r\n  };\r\n\r\n  return (\r\n    <Header darkMode={darkMode}>\r\n      <HeaderLeft>\r\n        {isMobile && (\r\n          <IconButton onClick={onToggleSidebar} style={{ marginRight: '10px' }}>\r\n            <MenuIcon style={{ color: darkMode ? 'gray' : 'inherit' }}/>\r\n          </IconButton>\r\n        )}\r\n        {recipient ? (\r\n          <UserAvatar src={recipientSnapshot?.docs?.[0]?.data()?.photoURL} />\r\n        ) : (\r\n          <UserAvatar>{recipientEmail?.[0]?.toUpperCase()}</UserAvatar>\r\n        )}\r\n        <HeaderInformation darkMode={darkMode}>\r\n          <h3>{getHeaderTitle()}</h3>\r\n          <p>{getStatusText()}</p>\r\n        </HeaderInformation>\r\n      </HeaderLeft>\r\n      <HeaderActions>\r\n        <IconButton onClick={onMoreClick}>\r\n          <MoreVertIcon style={{ color: darkMode ? 'gray' : 'inherit' }} />\r\n        </IconButton>\r\n      </HeaderActions>\r\n    </Header>\r\n  );\r\n}\r\n\r\nexport default ChatHeader;\r\n\r\n// Styled Components remain the same...\r\nconst Header = styled.div`\r\n  position: sticky;\r\n  background-color: ${(props) => (props.darkMode ? \"#1e1e1e\" : \"white\")};\r\n  z-index: 100;\r\n  top: 0;\r\n  display: flex;\r\n  padding: 11px;\r\n  height: 80px;\r\n  align-items: center;\r\n  border-bottom: 1px solid ${(props) => (props.darkMode ? \"#333\" : \"whitesmoke\")};\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst HeaderLeft = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  flex: 1;\r\n  min-width: 0;\r\n`;\r\n\r\nconst UserAvatar = styled(Avatar)`\r\n  margin: 5px;\r\n  margin-right: 15px;\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst HeaderInformation = styled.div`\r\n  margin-left: 15px;\r\n  flex: 1;\r\n  min-width: 0;\r\n\r\n  > h3 {\r\n    margin: 0;\r\n    margin-bottom: 3px;\r\n    color: ${(props) => (props.darkMode ? \"#e0e0e0\" : \"#000\")};\r\n    font-size: 16px;\r\n    font-weight: 500;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n\r\n  > p {\r\n    font-size: 13px;\r\n    color: ${(props) => (props.darkMode ? \"#888\" : \"gray\")};\r\n    margin: 0;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    margin-left: 10px;\r\n\r\n    > h3 {\r\n      font-size: 15px;\r\n    }\r\n\r\n    > p {\r\n      font-size: 12px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst HeaderActions = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  flex-shrink: 0;\r\n`;"],"names":[],"mappings":"AAAA,kDAAkD;;;;;;AAClD;AACA;AACA;AAAA;AACA;AACA;AACA;;;;;;;;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,cAAc,EACd,iBAAiB,EACjB,UAAU,EACV,iBAAiB,EACjB,WAAW,EACX,QAAQ,EACR,QAAQ,EACR,eAAe,EAChB;IACC,MAAM,iBAAiB;QACrB,IAAI,YAAY;YACd,OAAO,GAAG,eAAe,MAAM,CAAC;QAClC;QACA,uCAAuC;QACvC,IAAI,mBAAmB;YACrB,OAAO;QACT;QACA,OAAO;IACT;IAEA,MAAM,gBAAgB;QACpB,IAAI,YAAY;YACd,OAAO;QACT;QAEA,IAAI,WAAW,UAAU,QAAQ;YAC/B,qBACE;;oBAAE;kCACa,0JAAC,kKAAO;wBAAC,UAAU,UAAU,QAAQ,CAAC,MAAM;;;;;;;;QAG/D;QAEA,OAAO;IACT;IAEA,qBACE,0JAAC;QAAO,UAAU;;0BAChB,0JAAC;;oBACE,0BACC,0JAAC,gNAAU;wBAAC,SAAS;wBAAiB,OAAO;4BAAE,aAAa;wBAAO;kCACjE,cAAA,0JAAC,yJAAQ;4BAAC,OAAO;gCAAE,OAAO,WAAW,SAAS;4BAAU;;;;;;;;;;;oBAG3D,0BACC,0JAAC;wBAAW,KAAK,mBAAmB,MAAM,CAAC,EAAE,EAAE,QAAQ;;;;;6CAEvD,0JAAC;kCAAY,gBAAgB,CAAC,EAAE,EAAE;;;;;;kCAEpC,0JAAC;wBAAkB,UAAU;;0CAC3B,0JAAC;0CAAI;;;;;;0CACL,0JAAC;0CAAG;;;;;;;;;;;;;;;;;;0BAGR,0JAAC;0BACC,cAAA,0JAAC,gNAAU;oBAAC,SAAS;8BACnB,cAAA,0JAAC,6JAAY;wBAAC,OAAO;4BAAE,OAAO,WAAW,SAAS;wBAAU;;;;;;;;;;;;;;;;;;;;;;AAKtE;KA/DS;uCAiEM;AAEf,uCAAuC;AACvC,MAAM,SAAS,6LAAM,CAAC,GAAG,CAAC;;oBAEN,EAAE,CAAC,QAAW,MAAM,QAAQ,GAAG,YAAY,QAAS;;;;;;;2BAO7C,EAAE,CAAC,QAAW,MAAM,QAAQ,GAAG,SAAS,aAAc;;AAEjF,CAAC;MAXK;AAaN,MAAM,aAAa,6LAAM,CAAC,GAAG,CAAC;;;;;AAK9B,CAAC;MALK;AAON,MAAM,aAAa,IAAA,6LAAM,EAAC,gMAAM,CAAC,CAAC;;;;AAIlC,CAAC;MAJK;AAMN,MAAM,oBAAoB,6LAAM,CAAC,GAAG,CAAC;;;;;;;;WAQ1B,EAAE,CAAC,QAAW,MAAM,QAAQ,GAAG,YAAY,OAAQ;;;;;;;;;;WAUnD,EAAE,CAAC,QAAW,MAAM,QAAQ,GAAG,SAAS,OAAQ;;;;;;;;;;;;;;;;;;AAkB3D,CAAC;MApCK;AAsCN,MAAM,gBAAgB,6LAAM,CAAC,GAAG,CAAC;;;;AAIjC,CAAC;MAJK","debugId":null}},
    {"offset": {"line": 2072, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/components/MessageStatus.jsx"],"sourcesContent":["// components/ChatScreen/components/MessageStatus.jsx\r\n\r\nimport React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport DoneIcon from \"@mui/icons-material/Done\";\r\nimport DoneAllIcon from \"@mui/icons-material/DoneAll\";\r\nimport AccessTimeIcon from \"@mui/icons-material/AccessTime\";\r\nimport { MESSAGE_STATUS } from \"../constants\";\r\n\r\nfunction MessageStatus({ status, darkMode }) {\r\n  if (!status || status === MESSAGE_STATUS.SENT) {\r\n    // Single gray checkmark for sent\r\n    return (\r\n      <StatusIcon darkMode={darkMode}>\r\n        <DoneIcon style={{ fontSize: 16 }} />\r\n      </StatusIcon>\r\n    );\r\n  }\r\n\r\n  if (status === MESSAGE_STATUS.DELIVERED) {\r\n    // Double gray checkmarks for delivered\r\n    return (\r\n      <StatusIcon darkMode={darkMode}>\r\n        <DoneAllIcon style={{ fontSize: 16 }} />\r\n      </StatusIcon>\r\n    );\r\n  }\r\n\r\n  if (status === MESSAGE_STATUS.READ) {\r\n    // Double blue checkmarks for read\r\n    return (\r\n      <StatusIcon darkMode={darkMode} isRead={true}>\r\n        <DoneAllIcon style={{ fontSize: 16 }} />\r\n      </StatusIcon>\r\n    );\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport default MessageStatus;\r\n\r\nconst StatusIcon = styled.span`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  color: ${props => props.isRead ? '#53bdeb' : (props.darkMode ? '#8696a0' : '#667781')};\r\n  margin-left: 4px;\r\n`;\r\n\r\n// Styled Components\r\nconst StatusContainer = styled.span`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  margin-left: 4px;\r\n  vertical-align: middle;\r\n`;\r\n\r\nconst SingleCheck = styled(DoneIcon)`\r\n  font-size: 16px !important;\r\n  color: ${props => props.darkMode ? '#8696a0' : '#667781'};\r\n`;\r\n\r\nconst DoubleCheckGray = styled(DoneAllIcon)`\r\n  font-size: 16px !important;\r\n  color: ${props => props.darkMode ? '#8696a0' : '#667781'};\r\n`;\r\n\r\nconst DoubleCheckBlue = styled(DoneAllIcon)`\r\n  font-size: 16px !important;\r\n  color: #53bdeb;\r\n`;\r\n\r\nconst PendingIcon = styled(AccessTimeIcon)`\r\n  font-size: 14px !important;\r\n  color: ${props => props.darkMode ? '#8696a0' : '#667781'};\r\n  opacity: 0.6;\r\n`;"],"names":[],"mappings":"AAAA,qDAAqD;;;;;;AAErD;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAEA,SAAS,cAAc,EAAE,MAAM,EAAE,QAAQ,EAAE;IACzC,IAAI,CAAC,UAAU,WAAW,mJAAc,CAAC,IAAI,EAAE;QAC7C,iCAAiC;QACjC,qBACE,0JAAC;YAAW,UAAU;sBACpB,cAAA,0JAAC,yJAAQ;gBAAC,OAAO;oBAAE,UAAU;gBAAG;;;;;;;;;;;IAGtC;IAEA,IAAI,WAAW,mJAAc,CAAC,SAAS,EAAE;QACvC,uCAAuC;QACvC,qBACE,0JAAC;YAAW,UAAU;sBACpB,cAAA,0JAAC,4JAAW;gBAAC,OAAO;oBAAE,UAAU;gBAAG;;;;;;;;;;;IAGzC;IAEA,IAAI,WAAW,mJAAc,CAAC,IAAI,EAAE;QAClC,kCAAkC;QAClC,qBACE,0JAAC;YAAW,UAAU;YAAU,QAAQ;sBACtC,cAAA,0JAAC,4JAAW;gBAAC,OAAO;oBAAE,UAAU;gBAAG;;;;;;;;;;;IAGzC;IAEA,OAAO;AACT;KA7BS;uCA+BM;AAEf,MAAM,aAAa,6LAAM,CAAC,IAAI,CAAC;;;SAGtB,EAAE,CAAA,QAAS,MAAM,MAAM,GAAG,YAAa,MAAM,QAAQ,GAAG,YAAY,UAAW;;AAExF,CAAC;MALK;AAON,oBAAoB;AACpB,MAAM,kBAAkB,6LAAM,CAAC,IAAI,CAAC;;;;;AAKpC,CAAC;AAED,MAAM,cAAc,IAAA,6LAAM,EAAC,yJAAQ,CAAC,CAAC;;SAE5B,EAAE,CAAA,QAAS,MAAM,QAAQ,GAAG,YAAY,UAAU;AAC3D,CAAC;AAED,MAAM,kBAAkB,IAAA,6LAAM,EAAC,4JAAW,CAAC,CAAC;;SAEnC,EAAE,CAAA,QAAS,MAAM,QAAQ,GAAG,YAAY,UAAU;AAC3D,CAAC;AAED,MAAM,kBAAkB,IAAA,6LAAM,EAAC,4JAAW,CAAC,CAAC;;;AAG5C,CAAC;AAED,MAAM,cAAc,IAAA,6LAAM,EAAC,+JAAc,CAAC,CAAC;;SAElC,EAAE,CAAA,QAAS,MAAM,QAAQ,GAAG,YAAY,UAAU;;AAE3D,CAAC","debugId":null}},
    {"offset": {"line": 2195, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/Message.js"],"sourcesContent":["// components/Message.jsx\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { auth } from \"../firebase\";\r\nimport styled from \"styled-components\";\r\nimport moment from \"moment\";\r\nimport { IconButton, Menu, MenuItem, ListItemIcon, ListItemText } from \"@mui/material\";\r\nimport DownloadIcon from \"@mui/icons-material/Download\";\r\nimport InsertDriveFileIcon from \"@mui/icons-material/InsertDriveFile\";\r\nimport ImageIcon from \"@mui/icons-material/Image\";\r\nimport VideoLibraryIcon from \"@mui/icons-material/VideoLibrary\";\r\nimport AudiotrackIcon from \"@mui/icons-material/Audiotrack\";\r\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport ReplyIcon from \"@mui/icons-material/Reply\";\r\nimport LocationOnIcon from \"@mui/icons-material/LocationOn\";\r\nimport OpenInNewIcon from \"@mui/icons-material/OpenInNew\";\r\nimport { useContext, useState } from \"react\";\r\nimport { DarkModeContext } from \"./DarkModeProvider\";\r\nimport MessageStatus from \"./ChatScreen/components/MessageStatus\";\r\nimport { MESSAGE_STATUS } from \"./ChatScreen/constants\";\r\n\r\nfunction Message({ user, message, messageId, onDelete, onReply }) {\r\n  const [userLoggedIn] = useAuthState(auth);\r\n  const [imageLoaded, setImageLoaded] = useState(false);\r\n  const [imageError, setImageError] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  // Get dark mode context\r\n  const darkModeContext = useContext(DarkModeContext);\r\n  const { darkMode } = darkModeContext || { darkMode: false };\r\n\r\n  const TypeOfMessage = user === userLoggedIn?.email ? Sender : Receiver;\r\n  const isOwnMessage = user === userLoggedIn?.email;\r\n\r\n  // Check if message is less than 1 hour old\r\n  const isRecentMessage = () => {\r\n    if (!message.timestamp) return false;\r\n    const messageTime = moment(message.timestamp);\r\n    const now = moment();\r\n    const hoursDiff = now.diff(messageTime, 'hours');\r\n    return hoursDiff < 1;\r\n  };\r\n\r\n  // Open menu\r\n  const handleMenuOpen = (event) => {\r\n    event.stopPropagation();\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  // Close menu\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  // Handle delete\r\n  const handleDelete = () => {\r\n    handleMenuClose();\r\n    if (onDelete && messageId) {\r\n      onDelete(messageId);\r\n    }\r\n  };\r\n\r\n  // Handle reply\r\n  const handleReply = () => {\r\n    handleMenuClose();\r\n    if (onReply) {\r\n      onReply({\r\n        id: messageId,\r\n        user: user,\r\n        message: message.message,\r\n        timestamp: message.timestamp,\r\n        fileURL: message.fileURL,\r\n        fileName: message.fileName,\r\n        fileType: message.fileType,\r\n        voiceURL: message.voiceURL,\r\n        voiceDuration: message.voiceDuration,\r\n        location: message.location,\r\n      });\r\n    }\r\n  };\r\n\r\n  // Optimize Cloudinary image URLs with transformations\r\n  const getOptimizedImageUrl = (url) => {\r\n    if (!url || !url.includes('cloudinary.com')) return url;\r\n    const transformation = '/w_600,h_600,c_limit,f_auto,q_auto';\r\n    return url.replace('/upload/', `/upload${transformation}/`);\r\n  };\r\n\r\n  // Get thumbnail for video\r\n  const getVideoThumbnail = (url) => {\r\n    if (!url || !url.includes('cloudinary.com')) return null;\r\n    const transformation = '/w_600,h_400,c_fill,f_jpg,q_auto';\r\n    return url.replace('/upload/', `/upload${transformation}/`).replace(/\\.[^.]+$/, '.jpg');\r\n  };\r\n\r\n  // Download file function with better Cloudinary support\r\n  const downloadFile = async (url, fileName) => {\r\n    try {\r\n      let downloadUrl = url;\r\n      if (url.includes('cloudinary.com')) {\r\n        downloadUrl = url.replace('/upload/', '/upload/fl_attachment/');\r\n      }\r\n\r\n      const response = await fetch(downloadUrl);\r\n      const blob = await response.blob();\r\n      const blobUrl = window.URL.createObjectURL(blob);\r\n      \r\n      const link = document.createElement(\"a\");\r\n      link.href = blobUrl;\r\n      link.download = fileName || \"download\";\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      \r\n      setTimeout(() => window.URL.revokeObjectURL(blobUrl), 100);\r\n    } catch (error) {\r\n      console.error(\"Download failed:\", error);\r\n      window.open(url, '_blank');\r\n    }\r\n  };\r\n\r\n  // Format file size\r\n  const formatFileSize = (bytes) => {\r\n    if (!bytes || bytes === 0) return \"Unknown size\";\r\n    const k = 1024;\r\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + \" \" + sizes[i];\r\n  };\r\n\r\n  // Format voice duration\r\n  const formatDuration = (seconds) => {\r\n    if (!seconds) return \"0:00\";\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n  };\r\n\r\n  // Get file type icon and color\r\n  const getFileIcon = (fileType) => {\r\n    if (!fileType) return { icon: InsertDriveFileIcon, color: darkMode ? '#64b5f6' : '#1976d2' };\r\n    \r\n    if (fileType.includes('pdf')) return { icon: InsertDriveFileIcon, color: '#d32f2f' };\r\n    if (fileType.includes('word') || fileType.includes('document')) return { icon: InsertDriveFileIcon, color: '#2196f3' };\r\n    if (fileType.includes('sheet') || fileType.includes('excel')) return { icon: InsertDriveFileIcon, color: '#4caf50' };\r\n    if (fileType.includes('zip') || fileType.includes('rar')) return { icon: InsertDriveFileIcon, color: '#ff9800' };\r\n    \r\n    return { icon: InsertDriveFileIcon, color: darkMode ? '#64b5f6' : '#1976d2' };\r\n  };\r\n\r\n  const fileIconData = getFileIcon(message.fileType);\r\n  const FileIconComponent = fileIconData.icon;\r\n  const showDelete = isRecentMessage();\r\n\r\n  return (\r\n    <Container>\r\n      <TypeOfMessage darkMode={darkMode} isSender={isOwnMessage}>\r\n        <MessageContent>\r\n          {/* Reply Preview (if this message is a reply) */}\r\n          {message.replyTo && (\r\n            <ReplyPreview darkMode={darkMode}>\r\n              <ReplyBar isSender={isOwnMessage} />\r\n              <ReplyContent>\r\n                <ReplyUser darkMode={darkMode}>\r\n                  {message.replyTo.user === userLoggedIn?.email ? 'You' : message.replyTo.user}\r\n                </ReplyUser>\r\n                <ReplyText darkMode={darkMode}>\r\n                  {message.replyTo.location ? 'üìç Location' : \r\n                   message.replyTo.message || message.replyTo.fileName || 'üé§ Voice message'}\r\n                </ReplyText>\r\n              </ReplyContent>\r\n            </ReplyPreview>\r\n          )}\r\n\r\n          {/* Location Message */}\r\n          {message.location && (\r\n            <LocationContainer darkMode={darkMode}>\r\n              <MapPreview>\r\n                <MapFrame\r\n                  src={`https://www.openstreetmap.org/export/embed.html?bbox=${message.location.longitude - 0.005},${message.location.latitude - 0.005},${message.location.longitude + 0.005},${message.location.latitude + 0.005}&layer=mapnik&marker=${message.location.latitude},${message.location.longitude}`}\r\n                  title=\"Location\"\r\n                  loading=\"lazy\"\r\n                />\r\n              </MapPreview>\r\n              \r\n              <LocationInfo darkMode={darkMode}>\r\n                <LocationIcon>\r\n                  <LocationOnIcon style={{ fontSize: 20, color: \"#f44336\" }} />\r\n                </LocationIcon>\r\n                <Coordinates darkMode={darkMode}>\r\n                  {message.location.latitude.toFixed(6)}, {message.location.longitude.toFixed(6)}\r\n                </Coordinates>\r\n              </LocationInfo>\r\n\r\n              <ViewButton \r\n                href={message.location.url} \r\n                target=\"_blank\" \r\n                rel=\"noopener noreferrer\" \r\n                darkMode={darkMode}\r\n              >\r\n                <OpenInNewIcon style={{ fontSize: 16, marginRight: 4 }} />\r\n                View on Maps\r\n              </ViewButton>\r\n            </LocationContainer>\r\n          )}\r\n\r\n          {/* File Attachment */}\r\n          {message.fileURL && (\r\n            <FileAttachment>\r\n              {/* Image Preview */}\r\n              {message.fileType?.startsWith(\"image/\") ? (\r\n                <ImageContainer>\r\n                  {!imageLoaded && !imageError && (\r\n                    <ImagePlaceholder darkMode={darkMode}>\r\n                      <ImageIcon style={{ fontSize: 48, color: darkMode ? '#555' : '#ccc' }} />\r\n                    </ImagePlaceholder>\r\n                  )}\r\n                  {imageError ? (\r\n                    <ImageError darkMode={darkMode}>\r\n                      <ImageIcon style={{ fontSize: 48, color: darkMode ? '#666' : '#999' }} />\r\n                      <p>Failed to load image</p>\r\n                    </ImageError>\r\n                  ) : (\r\n                    <ImagePreview\r\n                      src={getOptimizedImageUrl(message.fileURL)}\r\n                      alt={message.fileName || \"Image\"}\r\n                      onClick={() => window.open(message.fileURL, \"_blank\")}\r\n                      onLoad={() => setImageLoaded(true)}\r\n                      onError={() => setImageError(true)}\r\n                      loading=\"lazy\"\r\n                      style={{ display: imageLoaded ? 'block' : 'none' }}\r\n                    />\r\n                  )}\r\n                  {message.fileName && (\r\n                    <ImageFileName darkMode={darkMode}>{message.fileName}</ImageFileName>\r\n                  )}\r\n                </ImageContainer>\r\n              ) : message.fileType?.startsWith(\"video/\") ? (\r\n                /* Video Preview */\r\n                <VideoContainer>\r\n                  <VideoPreview \r\n                    controls \r\n                    preload=\"metadata\"\r\n                    poster={getVideoThumbnail(message.fileURL)}\r\n                  >\r\n                    <source src={message.fileURL} type={message.fileType} />\r\n                    Your browser does not support the video tag.\r\n                  </VideoPreview>\r\n                  {message.fileName && (\r\n                    <VideoFileName darkMode={darkMode}>\r\n                      <VideoLibraryIcon style={{ fontSize: 16, marginRight: 4 }} />\r\n                      {message.fileName}\r\n                    </VideoFileName>\r\n                  )}\r\n                </VideoContainer>\r\n              ) : message.fileType?.startsWith(\"audio/\") && !message.voiceURL ? (\r\n                /* Audio File (not voice message) */\r\n                <AudioFileContainer darkMode={darkMode}>\r\n                  <AudioFileHeader>\r\n                    <AudiotrackIcon style={{ fontSize: 32, color: darkMode ? '#64b5f6' : '#1976d2' }} />\r\n                    <AudioFileInfo>\r\n                      <AudioFileName darkMode={darkMode}>\r\n                        {message.fileName || \"Audio File\"}\r\n                      </AudioFileName>\r\n                      <AudioFileSize darkMode={darkMode}>\r\n                        {formatFileSize(message.fileSize)}\r\n                      </AudioFileSize>\r\n                    </AudioFileInfo>\r\n                  </AudioFileHeader>\r\n                  <AudioPlayer controls src={message.fileURL} darkMode={darkMode}>\r\n                    Your browser does not support the audio element.\r\n                  </AudioPlayer>\r\n                </AudioFileContainer>\r\n              ) : (\r\n                /* Other Files (PDF, Documents, etc.) */\r\n                <FileInfo darkMode={darkMode}>\r\n                  <FileIconComponent style={{ fontSize: 40, color: fileIconData.color }} />\r\n                  <FileDetails>\r\n                    <FileName darkMode={darkMode}>{message.fileName || \"File\"}</FileName>\r\n                    <FileSize darkMode={darkMode}>\r\n                      {formatFileSize(message.fileSize)}\r\n                    </FileSize>\r\n                  </FileDetails>\r\n                </FileInfo>\r\n              )}\r\n\r\n              {/* Download Button */}\r\n              <DownloadButton\r\n                onClick={() => downloadFile(message.fileURL, message.fileName)}\r\n                size=\"small\"\r\n                darkMode={darkMode}\r\n              >\r\n                <DownloadIcon fontSize=\"small\" />\r\n                <span style={{ marginLeft: 5, fontSize: 12 }}>Download</span>\r\n              </DownloadButton>\r\n            </FileAttachment>\r\n          )}\r\n\r\n          {/* Voice Message */}\r\n          {message.voiceURL && (\r\n            <VoiceMessageContainer darkMode={darkMode}>\r\n              <VoiceLabel darkMode={darkMode}>üé§ Voice Message</VoiceLabel>\r\n              <AudioPlayer controls src={message.voiceURL} darkMode={darkMode}>\r\n                Your browser does not support the audio element.\r\n              </AudioPlayer>\r\n              {message.voiceDuration && (\r\n                <VoiceDuration darkMode={darkMode}>\r\n                  Duration: {formatDuration(message.voiceDuration)}\r\n                </VoiceDuration>\r\n              )}\r\n            </VoiceMessageContainer>\r\n          )}\r\n\r\n          {/* Text Message */}\r\n          {message.message && message.message.trim() && !message.location && (\r\n            <MessageText darkMode={darkMode}>{message.message}</MessageText>\r\n          )}\r\n\r\n          {/* Message Footer with Timestamp and Status */}\r\n          <MessageFooter>\r\n            <Timestamp darkMode={darkMode}>\r\n              {message.timestamp ? moment(message.timestamp).format(\"LT\") : \"...\"}\r\n            </Timestamp>\r\n            {isOwnMessage && (\r\n              <MessageStatus \r\n                status={message.status || MESSAGE_STATUS.SENT} \r\n                darkMode={darkMode} \r\n              />\r\n            )}\r\n          </MessageFooter>\r\n        </MessageContent>\r\n\r\n        {/* Three Dots Menu */}\r\n        <MessageActions>\r\n          <MessageMenuButton\r\n            onClick={handleMenuOpen}\r\n            size=\"small\"\r\n            darkMode={darkMode}\r\n            isSender={isOwnMessage}\r\n          >\r\n            <MoreVertIcon style={{ color: darkMode ? 'gray' : 'inherit' }} fontSize=\"small\" />\r\n          </MessageMenuButton>\r\n        </MessageActions>\r\n\r\n        {/* Menu */}\r\n        <Menu\r\n          anchorEl={anchorEl}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleMenuClose}\r\n          PaperProps={{\r\n            style: {\r\n              backgroundColor: darkMode ? '#2a2a2a' : 'white',\r\n              color: darkMode ? '#e0e0e0' : 'black',\r\n            },\r\n          }}\r\n        >\r\n          <MenuItem onClick={handleReply}>\r\n            <ListItemIcon>\r\n              <ReplyIcon fontSize=\"small\" style={{ color: darkMode ? '#64b5f6' : '#1976d2' }} />\r\n            </ListItemIcon>\r\n            <ListItemText style={{ color: darkMode ? '#e0e0e0' : 'black' }}>\r\n              Reply\r\n            </ListItemText>\r\n          </MenuItem>\r\n          \r\n          {showDelete && isOwnMessage && (\r\n            <MenuItem onClick={handleDelete}>\r\n              <ListItemIcon>\r\n                <DeleteIcon fontSize=\"small\" style={{ color: '#d32f2f' }} />\r\n              </ListItemIcon>\r\n              <ListItemText style={{ color: darkMode ? '#e0e0e0' : 'black' }}>\r\n                Delete\r\n              </ListItemText>\r\n            </MenuItem>\r\n          )}\r\n        </Menu>\r\n      </TypeOfMessage>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Message;\r\n\r\n// Styled Components\r\nconst Container = styled.div`\r\n  margin: 5px 0;\r\n  \r\n  &:hover {\r\n    ${props => `\r\n      ${MessageActions} {\r\n        opacity: 1;\r\n      }\r\n    `}\r\n  }\r\n`;\r\n\r\nconst MessageElement = styled.div`\r\n  display: flex;\r\n  align-items: flex-end;\r\n  gap: 8px;\r\n  width: fit-content;\r\n  max-width: 65%;\r\n  padding: 10px 15px;\r\n  padding-top: 15px;\r\n  border-radius: 8px;\r\n  margin: 10px;\r\n  min-width: 60px;\r\n  padding-bottom: 8px;\r\n  position: relative;\r\n  word-wrap: break-word;\r\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\r\n\r\n  @media (max-width: 768px) {\r\n    max-width: 80%;\r\n  }\r\n`;\r\n\r\nconst Sender = styled(MessageElement)`\r\n  margin-left: auto;\r\n  background-color: ${props => props.darkMode ? '#056162' : '#dcf8c6'};\r\n  color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n  border-radius: 8px 8px 0 8px;\r\n`;\r\n\r\nconst Receiver = styled(MessageElement)`\r\n  background-color: ${props => props.darkMode ? '#1f2c33' : 'whitesmoke'};\r\n  color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n  text-align: left;\r\n  border-radius: 8px 8px 8px 0;\r\n  margin-left: 10px;\r\n  margin-right: auto;\r\n`;\r\n\r\nconst MessageContent = styled.div`\r\n  flex: 1;\r\n  min-width: 0;\r\n`;\r\n\r\nconst MessageActions = styled.div`\r\n  opacity: 0;\r\n  transition: opacity 0.2s;\r\n  display: flex;\r\n  align-items: flex-start;\r\n`;\r\n\r\nconst MessageMenuButton = styled(IconButton)`\r\n  opacity: 0.6 !important;\r\n  padding: 4px !important;\r\n  color: ${props => props.darkMode ? '#e0e0e0' : '#666'} !important;\r\n  \r\n  &:hover {\r\n    opacity: 1 !important;\r\n    background-color: ${props => props.darkMode ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.05)'} !important;\r\n  }\r\n`;\r\n\r\nconst MessageFooter = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n  gap: 4px;\r\n  margin-top: 4px;\r\n  padding-top: 2px;\r\n`;\r\n\r\nconst ReplyPreview = styled.div`\r\n  display: flex;\r\n  margin-bottom: 8px;\r\n  padding: 8px;\r\n  background-color: ${props => props.darkMode ? 'rgba(0,0,0,0.2)' : 'rgba(0,0,0,0.05)'};\r\n  border-radius: 6px;\r\n`;\r\n\r\nconst ReplyBar = styled.div`\r\n  width: 4px;\r\n  background-color: ${props => props.isSender ? '#00a884' : '#1976d2'};\r\n  border-radius: 2px;\r\n  margin-right: 8px;\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst ReplyContent = styled.div`\r\n  flex: 1;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst ReplyUser = styled.div`\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n  color: ${props => props.darkMode ? '#64b5f6' : '#1976d2'};\r\n  margin-bottom: 2px;\r\n`;\r\n\r\nconst ReplyText = styled.div`\r\n  font-size: 13px;\r\n  color: ${props => props.darkMode ? '#aaa' : '#666'};\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nconst MessageText = styled.p`\r\n  margin: 0;\r\n  margin-bottom: 5px;\r\n  font-size: 14px;\r\n  line-height: 1.4;\r\n  color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n  white-space: pre-wrap;\r\n`;\r\n\r\nconst Timestamp = styled.span`\r\n  color: ${props => props.darkMode ? '#8696a0' : 'gray'};\r\n  font-size: 11px;\r\n  margin-left: 8px;\r\n`;\r\n\r\nconst FileAttachment = styled.div`\r\n  margin-bottom: 8px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n`;\r\n\r\n// Location Message Styles\r\nconst LocationContainer = styled.div`\r\n  max-width: 280px;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  background-color: ${(props) => (props.darkMode ? \"#2a2a2a\" : \"#f5f5f5\")};\r\n  margin-bottom: 8px;\r\n`;\r\n\r\nconst MapPreview = styled.div`\r\n  width: 100%;\r\n  height: 200px;\r\n  background: #f0f0f0;\r\n  position: relative;\r\n`;\r\n\r\nconst MapFrame = styled.iframe`\r\n  width: 100%;\r\n  height: 100%;\r\n  border: none;\r\n  pointer-events: none;\r\n`;\r\n\r\nconst LocationInfo = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 12px;\r\n  gap: 8px;\r\n`;\r\n\r\nconst LocationIcon = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst Coordinates = styled.span`\r\n  font-size: 13px;\r\n  color: ${(props) => (props.darkMode ? \"#b0b0b0\" : \"#666\")};\r\n  font-family: monospace;\r\n`;\r\n\r\nconst ViewButton = styled.a`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 10px;\r\n  background-color: ${(props) => (props.darkMode ? \"#128C7E\" : \"#25D366\")};\r\n  color: white;\r\n  text-decoration: none;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  transition: background-color 0.2s;\r\n\r\n  &:hover {\r\n    background-color: ${(props) => (props.darkMode ? \"#0d6b5f\" : \"#1fa855\")};\r\n  }\r\n`;\r\n\r\n// Image Styles\r\nconst ImageContainer = styled.div`\r\n  position: relative;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  background-color: ${props => props.darkMode ? '#1a1a1a' : '#f5f5f5'};\r\n`;\r\n\r\nconst ImagePlaceholder = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  min-height: 200px;\r\n  background-color: ${props => props.darkMode ? '#2a2a2a' : '#e0e0e0'};\r\n`;\r\n\r\nconst ImageError = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  min-height: 200px;\r\n  background-color: ${props => props.darkMode ? '#2a2a2a' : '#f0f0f0'};\r\n  \r\n  p {\r\n    margin-top: 10px;\r\n    color: ${props => props.darkMode ? '#888' : '#666'};\r\n    font-size: 14px;\r\n  }\r\n`;\r\n\r\nconst ImagePreview = styled.img`\r\n  width: 100%;\r\n  max-width: 100%;\r\n  max-height: 400px;\r\n  object-fit: cover;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: transform 0.2s, opacity 0.2s;\r\n\r\n  &:hover {\r\n    opacity: 0.95;\r\n    transform: scale(1.02);\r\n  }\r\n\r\n  &:active {\r\n    transform: scale(0.98);\r\n  }\r\n`;\r\n\r\nconst ImageFileName = styled.div`\r\n  padding: 8px;\r\n  font-size: 12px;\r\n  color: ${props => props.darkMode ? '#8696a0' : '#666'};\r\n  background-color: ${props => props.darkMode ? 'rgba(0,0,0,0.3)' : 'rgba(255,255,255,0.9)'};\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\n// Video Styles\r\nconst VideoContainer = styled.div`\r\n  position: relative;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst VideoPreview = styled.video`\r\n  width: 100%;\r\n  max-width: 100%;\r\n  max-height: 400px;\r\n  border-radius: 8px;\r\n  background-color: #000;\r\n`;\r\n\r\nconst VideoFileName = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 6px 8px;\r\n  font-size: 12px;\r\n  color: ${props => props.darkMode ? '#8696a0' : '#666'};\r\n  background-color: ${props => props.darkMode ? '#2a3942' : '#f0f0f0'};\r\n  border-radius: 6px;\r\n  margin-top: 6px;\r\n`;\r\n\r\n// Audio File Styles\r\nconst AudioFileContainer = styled.div`\r\n  padding: 12px;\r\n  background-color: ${props => props.darkMode ? '#2a3942' : '#f0f0f0'};\r\n  border-radius: 8px;\r\n  min-width: 280px;\r\n`;\r\n\r\nconst AudioFileHeader = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst AudioFileInfo = styled.div`\r\n  flex: 1;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst AudioFileName = styled.div`\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nconst AudioFileSize = styled.div`\r\n  font-size: 12px;\r\n  color: ${props => props.darkMode ? '#8696a0' : 'gray'};\r\n  margin-top: 2px;\r\n`;\r\n\r\n// General File Styles\r\nconst FileInfo = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  padding: 12px;\r\n  background-color: ${props => props.darkMode ? '#2a3942' : '#f0f0f0'};\r\n  border-radius: 8px;\r\n  min-width: 220px;\r\n  transition: background-color 0.2s;\r\n\r\n  &:hover {\r\n    background-color: ${props => props.darkMode ? '#3a4952' : '#e8e8e8'};\r\n  }\r\n`;\r\n\r\nconst FileDetails = styled.div`\r\n  flex: 1;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst FileName = styled.p`\r\n  margin: 0;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nconst FileSize = styled.p`\r\n  margin: 0;\r\n  font-size: 12px;\r\n  color: ${props => props.darkMode ? '#8696a0' : 'gray'};\r\n  margin-top: 4px;\r\n`;\r\n\r\nconst DownloadButton = styled(IconButton)`\r\n  display: flex !important;\r\n  align-items: center !important;\r\n  padding: 8px 14px !important;\r\n  background-color: ${props => props.darkMode ? '#2a3942' : '#e3f2fd'} !important;\r\n  color: ${props => props.darkMode ? '#64b5f6' : '#1976d2'} !important;\r\n  border-radius: 6px !important;\r\n  font-size: 12px !important;\r\n  align-self: flex-start !important;\r\n  transition: all 0.2s !important;\r\n\r\n  &:hover {\r\n    background-color: ${props => props.darkMode ? '#3a4952' : '#bbdefb'} !important;\r\n    transform: translateY(-1px);\r\n  }\r\n\r\n  &:active {\r\n    transform: translateY(0);\r\n  }\r\n`;\r\n\r\n// Voice Message Styles\r\nconst VoiceMessageContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n  margin-bottom: 8px;\r\n  padding: 12px;\r\n  background-color: ${props => props.darkMode ? '#2a3942' : '#f0f0f0'};\r\n  border-radius: 8px;\r\n  min-width: 280px;\r\n`;\r\n\r\nconst VoiceLabel = styled.span`\r\n  font-size: 13px;\r\n  font-weight: 500;\r\n  color: ${props => props.darkMode ? '#64b5f6' : '#1976d2'};\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n`;\r\n\r\nconst AudioPlayer = styled.audio`\r\n  width: 100%;\r\n  height: 40px;\r\n  outline: none;\r\n  border-radius: 6px;\r\n  \r\n  &::-webkit-media-controls-panel {\r\n    background-color: ${props => props.darkMode ? '#1f2c33' : 'white'};\r\n    border-radius: 6px;\r\n  }\r\n\r\n  &::-webkit-media-controls-play-button,\r\n  &::-webkit-media-controls-mute-button {\r\n    filter: ${props => props.darkMode ? 'invert(1)' : 'none'};\r\n  }\r\n`;\r\n\r\nconst VoiceDuration = styled.span`\r\n  font-size: 11px;\r\n  color: ${props => props.darkMode ? '#8696a0' : 'gray'};\r\n  text-align: right;\r\n`;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3456, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/ChatScreen.styles.js"],"sourcesContent":["// components/ChatScreen/ChatScreen.styles.js\r\nimport styled from \"styled-components\";\r\nimport { Tabs } from \"@mui/material\";\r\n\r\nexport const Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n  background-color: ${props => props.darkMode ? '#1e1e1e' : 'white'};\r\n`;\r\n\r\nexport const Header = styled.div`\r\n  position: sticky;\r\n  background-color: ${props => props.darkMode ? '#2a2a2a' : 'white'};\r\n  color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n  z-index: 100;\r\n  top: 0;\r\n  display: flex;\r\n  padding: 11px;\r\n  height: 80px;\r\n  align-items: center;\r\n  border-bottom: 1px solid ${props => props.darkMode ? '#333' : 'whitesmoke'};\r\n  flex-shrink: 0;\r\n`;\r\n\r\nexport const HeaderInformation = styled.div`\r\n  margin-left: 15px;\r\n  flex: 1;\r\n  color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n\r\n  > h3 {\r\n    margin-bottom: 3px;\r\n    color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n  }\r\n  > p {\r\n    font-size: 14px;\r\n    color: ${props => props.darkMode ? '#aaa' : 'gray'};\r\n  }\r\n`;\r\n\r\nexport const HeaderIcons = styled.div``;\r\n\r\nexport const MessageContainer = styled.div`\r\n  padding: 30px;\r\n  background-color: ${props => props.darkMode ? '#0d1117' : '#e5ded8'};\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 0;\r\n`;\r\n\r\nexport const InputContainer = styled.form`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 10px;\r\n  background-color: ${props => props.darkMode ? '#2a2a2a' : 'white'};\r\n  gap: 10px;\r\n  flex-shrink: 0;\r\n  border-top: 1px solid ${props => props.darkMode ? '#333' : 'whitesmoke'};\r\n`;\r\n\r\nexport const Input = styled.input`\r\n  flex: 1;\r\n  flex-shrink: 1;\r\n  outline: 0;\r\n  border: none;\r\n  border-radius: 10px;\r\n  background-color: ${props => props.darkMode ? '#1e1e1e' : 'whitesmoke'};\r\n  color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n  padding: 15px;\r\n  margin-left: 5px;\r\n  margin-right: 5px;\r\n  font-size: 16px;\r\n\r\n  ::placeholder {\r\n    color: ${props => props.darkMode ? '#888' : '#999'};\r\n  }\r\n`;\r\n\r\nexport const EndOfMessage = styled.div`\r\n  margin-bottom: 50px;\r\n`;\r\n\r\nexport const OfflineMessage = styled.div`\r\n  text-align: center;\r\n  padding: 20px;\r\n  color: ${props => props.darkMode ? '#f8d7da' : '#721c24'};\r\n  background-color: ${props => props.darkMode ? '#5a1f1f' : '#f8d7da'};\r\n  border: 1px solid ${props => props.darkMode ? '#721c24' : '#f5c6cb'};\r\n  border-radius: 4px;\r\n  margin: 20px;\r\n`;\r\n\r\nexport const ErrorMessage = styled.div`\r\n  text-align: center;\r\n  padding: 20px;\r\n  color: ${props => props.darkMode ? '#ffeeba' : '#856404'};\r\n  background-color: ${props => props.darkMode ? '#664d03' : '#fff3cd'};\r\n  border: 1px solid ${props => props.darkMode ? '#856404' : '#ffeeba'};\r\n  border-radius: 4px;\r\n  margin: 20px;\r\n`;\r\n\r\nexport const ErrorAlert = styled.div`\r\n  color: ${props => props.darkMode ? '#f8d7da' : '#721c24'};\r\n  background-color: ${props => props.darkMode ? '#5a1f1f' : '#f8d7da'};\r\n  border: 1px solid ${props => props.darkMode ? '#721c24' : '#f5c6cb'};\r\n  padding: 10px;\r\n  margin: 10px;\r\n  border-radius: 4px;\r\n  text-align: center;\r\n`;\r\n\r\nexport const SendButton = styled.button`\r\n  background-color: ${props => props.darkMode ? '#d32f2f' : '#f44336'} !important;\r\n  color: white !important;\r\n  padding: 10px 20px !important;\r\n  border: none !important;\r\n  border-radius: 8px !important;\r\n  cursor: pointer !important;\r\n  font-weight: 600 !important;\r\n  display: block !important;\r\n  width: auto !important;\r\n  height: auto !important;\r\n  visibility: visible !important;\r\n  opacity: ${props => props.disabled ? '0.5' : '1'} !important;\r\n  \r\n  &:hover {\r\n    background-color: ${props => props.darkMode ? '#b71c1c' : '#d32f2f'} !important;\r\n  }\r\n\r\n  &:disabled {\r\n    cursor: not-allowed !important;\r\n  }\r\n`;\r\n\r\nexport const FilePreview = styled.div`\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nexport const FileInfo = styled.div`\r\n  margin-bottom: 20px;\r\n  padding: 10px;\r\n  background-color: ${props => props.darkMode ? '#1e1e1e' : '#f5f5f5'};\r\n  border-radius: 8px;\r\n  color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n\r\n  p {\r\n    margin: 5px 0;\r\n  }\r\n`;\r\n\r\nexport const FileInput = styled.input`\r\n  width: 100%;\r\n  outline: 0;\r\n  border: 1px solid ${props => props.darkMode ? '#444' : '#ddd'};\r\n  border-radius: 8px;\r\n  background-color: ${props => props.darkMode ? '#1e1e1e' : 'white'};\r\n  color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n  padding: 12px;\r\n  font-size: 16px;\r\n  margin-bottom: 10px;\r\n\r\n  ::placeholder {\r\n    color: ${props => props.darkMode ? '#888' : '#999'};\r\n  }\r\n`;\r\n\r\nexport const UploadProgress = styled.div`\r\n  text-align: center;\r\n  margin-top: 20px;\r\n\r\n  p {\r\n    margin-top: 10px;\r\n    font-weight: bold;\r\n  }\r\n`;\r\n\r\nexport const ProfileContainer = styled.div`\r\n  text-align: center;\r\n  padding: 20px;\r\n`;\r\n\r\nexport const ProfileInfo = styled.div`\r\n  color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n\r\n  h2 {\r\n    margin-bottom: 15px;\r\n    color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n  }\r\n\r\n  p {\r\n    margin: 10px 0;\r\n    font-size: 16px;\r\n    color: ${props => props.darkMode ? '#aaa' : 'gray'};\r\n  }\r\n`;\r\n\r\nexport const RecordingIndicator = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  padding: 15px;\r\n  background-color: ${props => props.darkMode ? '#1e1e1e' : '#ffebee'};\r\n  border-radius: 10px;\r\n  color: ${props => props.darkMode ? '#e0e0e0' : '#c62828'};\r\n  font-weight: 500;\r\n`;\r\n\r\nexport const RecordingDot = styled.div`\r\n  width: 12px;\r\n  height: 12px;\r\n  background-color: #f44336;\r\n  border-radius: 50%;\r\n  animation: pulse 1.5s infinite;\r\n\r\n  @keyframes pulse {\r\n    0%, 100% {\r\n      opacity: 1;\r\n    }\r\n    50% {\r\n      opacity: 0.3;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const VoicePreview = styled.div`\r\n  padding: 20px;\r\n  text-align: center;\r\n  color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n\r\n  p {\r\n    font-size: 18px;\r\n    font-weight: bold;\r\n    margin-bottom: 10px;\r\n  }\r\n`;\r\n\r\nexport const EmojiPickerContainer = styled.div`\r\n  width: 350px;\r\n  max-height: 450px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: ${props => props.darkMode ? '#2a2a2a' : 'white'};\r\n`;\r\n\r\nexport const EmojiPickerHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 12px 16px;\r\n  border-bottom: 1px solid ${props => props.darkMode ? '#444' : '#e0e0e0'};\r\n\r\n  h3 {\r\n    margin: 0;\r\n    font-size: 18px;\r\n    color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n  }\r\n`;\r\n\r\nexport const EmojiSearchContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 12px 16px;\r\n  gap: 8px;\r\n  border-bottom: 1px solid ${props => props.darkMode ? '#444' : '#e0e0e0'};\r\n`;\r\n\r\nexport const EmojiSearchInput = styled.input`\r\n  flex: 1;\r\n  border: none;\r\n  outline: none;\r\n  background-color: ${props => props.darkMode ? '#1e1e1e' : '#f5f5f5'};\r\n  color: ${props => props.darkMode ? '#e0e0e0' : 'black'};\r\n  padding: 8px 12px;\r\n  border-radius: 20px;\r\n  font-size: 14px;\r\n\r\n  ::placeholder {\r\n    color: ${props => props.darkMode ? '#888' : '#999'};\r\n  }\r\n`;\r\n\r\nexport const EmojiCategoryTabs = styled(Tabs)`\r\n  border-bottom: 1px solid ${props => props.darkMode ? '#444' : '#e0e0e0'};\r\n  min-height: 48px;\r\n\r\n  .MuiTabs-flexContainer {\r\n    justify-content: space-around;\r\n  }\r\n`;\r\n\r\nexport const EmojiGrid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(8, 1fr);\r\n  gap: 4px;\r\n  padding: 12px;\r\n  overflow-y: auto;\r\n  max-height: 280px;\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 8px;\r\n  }\r\n\r\n  &::-webkit-scrollbar-track {\r\n    background: ${props => props.darkMode ? '#1e1e1e' : '#f1f1f1'};\r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb {\r\n    background: ${props => props.darkMode ? '#555' : '#888'};\r\n    border-radius: 4px;\r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb:hover {\r\n    background: ${props => props.darkMode ? '#666' : '#555'};\r\n  }\r\n`;\r\n\r\nexport const EmojiButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  font-size: 24px;\r\n  cursor: pointer;\r\n  padding: 8px;\r\n  border-radius: 8px;\r\n  transition: all 0.2s;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  &:hover {\r\n    background-color: ${props => props.darkMode ? '#3a3a3a' : '#f0f0f0'};\r\n    transform: scale(1.2);\r\n  }\r\n\r\n  &:active {\r\n    transform: scale(1.1);\r\n  }\r\n`;\r\n\r\nexport const NoEmojisMessage = styled.div`\r\n  grid-column: 1 / -1;\r\n  text-align: center;\r\n  padding: 40px 20px;\r\n  color: ${props => props.darkMode ? '#888' : '#999'};\r\n  font-size: 14px;\r\n`;\r\n\r\nexport const ReplyPreviewBar = styled.div`\r\n  display: flex;\r\n  padding: 12px 16px;\r\n  background-color: ${props => props.darkMode ? '#2a2a2a' : '#f5f5f5'};\r\n  border-top: 1px solid ${props => props.darkMode ? '#333' : '#e0e0e0'};\r\n  gap: 12px;\r\n  align-items: center;\r\n`;\r\n\r\nexport const ReplyBarIndicator = styled.div`\r\n  width: 4px;\r\n  height: 50px;\r\n  background-color: #00a884;\r\n  border-radius: 2px;\r\n  flex-shrink: 0;\r\n`;\r\n\r\nexport const ReplyPreviewContent = styled.div`\r\n  flex: 1;\r\n  overflow: hidden;\r\n`;\r\n\r\nexport const ReplyPreviewHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 4px;\r\n  \r\n  span {\r\n    font-size: 13px;\r\n    font-weight: 600;\r\n    color: #00a884;\r\n  }\r\n`;\r\n\r\nexport const ReplyPreviewText = styled.div`\r\n  font-size: 14px;\r\n  color: ${props => props.darkMode ? '#aaa' : '#666'};\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n`;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3895, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/components/MessageList.jsx"],"sourcesContent":["// components/ChatScreen/components/MessageList.jsx\r\nimport React, { forwardRef } from \"react\";\r\nimport Message from \"../../Message\";\r\nimport { MessageContainer, ErrorAlert, EndOfMessage } from \"../ChatScreen.styles\";\r\n\r\nconst MessageList = forwardRef(({ \r\n  messagesSnapshot, \r\n  messages, \r\n  sendingError, \r\n  onDelete, \r\n  onReply,\r\n  darkMode \r\n}, ref) => {\r\n  const showMessages = () => {\r\n    if (messagesSnapshot) {\r\n      return messagesSnapshot.docs.map((message) => (\r\n        <Message\r\n          key={message.id}\r\n          messageId={message.id}\r\n          user={message.data().user}\r\n          message={{\r\n            ...message.data(),\r\n            timestamp: message.data().timestamp?.toMillis(),\r\n          }}\r\n          onDelete={onDelete}\r\n          onReply={onReply}\r\n        />\r\n      ));\r\n    } else {\r\n      return messages ? JSON.parse(messages).map((message) => (\r\n        <Message \r\n          key={message.id} \r\n          messageId={message.id}\r\n          user={message.user} \r\n          message={message}\r\n          onDelete={onDelete}\r\n          onReply={onReply}\r\n        />\r\n      )) : null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MessageContainer darkMode={darkMode}>\r\n      {showMessages()}\r\n      {sendingError && <ErrorAlert darkMode={darkMode}>{sendingError}</ErrorAlert>}\r\n      <EndOfMessage ref={ref} />\r\n    </MessageContainer>\r\n  );\r\n});\r\n\r\nMessageList.displayName = 'MessageList';\r\n\r\nexport default MessageList;"],"names":[],"mappings":"AAAA,mDAAmD;;;;;;AACnD;AACA;AACA;;;;;AAEA,MAAM,4BAAc,IAAA,wIAAU,OAAC,CAAC,EAC9B,gBAAgB,EAChB,QAAQ,EACR,YAAY,EACZ,QAAQ,EACR,OAAO,EACP,QAAQ,EACT,EAAE;IACD,MAAM,eAAe;QACnB,IAAI,kBAAkB;YACpB,OAAO,iBAAiB,IAAI,CAAC,GAAG,CAAC,CAAC,wBAChC,0JAAC,4HAAO;oBAEN,WAAW,QAAQ,EAAE;oBACrB,MAAM,QAAQ,IAAI,GAAG,IAAI;oBACzB,SAAS;wBACP,GAAG,QAAQ,IAAI,EAAE;wBACjB,WAAW,QAAQ,IAAI,GAAG,SAAS,EAAE;oBACvC;oBACA,UAAU;oBACV,SAAS;mBARJ,QAAQ,EAAE;;;;;QAWrB,OAAO;YACL,OAAO,WAAW,KAAK,KAAK,CAAC,UAAU,GAAG,CAAC,CAAC,wBAC1C,0JAAC,4HAAO;oBAEN,WAAW,QAAQ,EAAE;oBACrB,MAAM,QAAQ,IAAI;oBAClB,SAAS;oBACT,UAAU;oBACV,SAAS;mBALJ,QAAQ,EAAE;;;;gEAOd;QACP;IACF;IAEA,qBACE,0JAAC,gKAAgB;QAAC,UAAU;;YACzB;YACA,8BAAgB,0JAAC,0JAAU;gBAAC,UAAU;0BAAW;;;;;;0BAClD,0JAAC,4JAAY;gBAAC,KAAK;;;;;;;;;;;;AAGzB;;AAEA,YAAY,WAAW,GAAG;uCAEX","debugId":null}},
    {"offset": {"line": 3978, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/components/ChatInput.jsx"],"sourcesContent":["// components/ChatScreen/components/ChatInput.jsx\r\nimport React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { IconButton } from \"@mui/material\";\r\nimport InsertEmoticonIcon from \"@mui/icons-material/InsertEmoticon\";\r\nimport MicIcon from \"@mui/icons-material/Mic\";\r\nimport SendIcon from \"@mui/icons-material/Send\";\r\nimport StopIcon from \"@mui/icons-material/Stop\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\n\r\nfunction ChatInput({\r\n  input,\r\n  setInput,\r\n  inputRef,\r\n  isRecording,\r\n  recordingTime,\r\n  onSubmit,\r\n  onEmojiClick,\r\n  onPlusClick,\r\n  onStartRecording,\r\n  onStopRecording,\r\n  darkMode,\r\n}) {\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n  };\r\n\r\n  return (\r\n    <InputContainer darkMode={darkMode}>\r\n      <Form onSubmit={onSubmit}>\r\n        <PlusButton onClick={onPlusClick} darkMode={darkMode}>\r\n          <AddIcon />\r\n        </PlusButton>\r\n\r\n        <EmojiButton onClick={onEmojiClick} darkMode={darkMode}>\r\n          <InsertEmoticonIcon />\r\n        </EmojiButton>\r\n\r\n        <Input\r\n          ref={inputRef}\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          placeholder=\"Type a message\"\r\n          disabled={isRecording}\r\n          darkMode={darkMode}\r\n        />\r\n\r\n        {isRecording ? (\r\n          <RecordingContainer darkMode={darkMode}>\r\n            <RecordingIndicator>\r\n              <RecordingDot />\r\n              <RecordingTime>{formatTime(recordingTime)}</RecordingTime>\r\n            </RecordingIndicator>\r\n            <StopButton onClick={onStopRecording} darkMode={darkMode}>\r\n              <StopIcon />\r\n            </StopButton>\r\n          </RecordingContainer>\r\n        ) : (\r\n          <ButtonsContainer>\r\n            {input.trim() ? (\r\n              <SendButton type=\"submit\" darkMode={darkMode}>\r\n                <SendIcon />\r\n              </SendButton>\r\n            ) : (\r\n              <MicButton onClick={onStartRecording} darkMode={darkMode}>\r\n                <MicIcon />\r\n              </MicButton>\r\n            )}\r\n          </ButtonsContainer>\r\n        )}\r\n      </Form>\r\n    </InputContainer>\r\n  );\r\n}\r\n\r\nexport default ChatInput;\r\n\r\n// Styled Components\r\nconst InputContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 10px;\r\n  position: sticky;\r\n  bottom: 0;\r\n  background-color: ${(props) => (props.darkMode ? \"#1e1e1e\" : \"white\")};\r\n  border-top: 1px solid ${(props) => (props.darkMode ? \"#333\" : \"whitesmoke\")};\r\n  z-index: 100;\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 8px;\r\n  }\r\n`;\r\n\r\nconst Form = styled.form`\r\n  display: flex;\r\n  flex: 1;\r\n  align-items: center;\r\n  gap: 8px;\r\n  width: 100%;\r\n\r\n  @media (max-width: 768px) {\r\n    gap: 4px;\r\n  }\r\n`;\r\n\r\nconst PlusButton = styled(IconButton)`\r\n  && {\r\n    color: ${(props) => (props.darkMode ? \"#b0b0b0\" : \"#919191\")};\r\n    padding: 8px;\r\n    \r\n    @media (max-width: 768px) {\r\n      padding: 6px;\r\n    }\r\n\r\n    &:hover {\r\n      background-color: ${(props) =>\r\n        props.darkMode ? \"rgba(255,255,255,0.1)\" : \"rgba(0,0,0,0.05)\"};\r\n    }\r\n  }\r\n`;\r\n\r\nconst EmojiButton = styled(IconButton)`\r\n  && {\r\n    color: ${(props) => (props.darkMode ? \"#b0b0b0\" : \"#919191\")};\r\n    padding: 8px;\r\n    \r\n    @media (max-width: 768px) {\r\n      padding: 6px;\r\n    }\r\n\r\n    &:hover {\r\n      background-color: ${(props) =>\r\n        props.darkMode ? \"rgba(255,255,255,0.1)\" : \"rgba(0,0,0,0.05)\"};\r\n    }\r\n  }\r\n`;\r\n\r\nconst Input = styled.input`\r\n  flex: 1;\r\n  outline: 0;\r\n  border: none;\r\n  border-radius: 25px;\r\n  background-color: ${(props) => (props.darkMode ? \"#2a2a2a\" : \"whitesmoke\")};\r\n  color: ${(props) => (props.darkMode ? \"#e0e0e0\" : \"black\")};\r\n  padding: 12px 20px;\r\n  font-size: 15px;\r\n  min-width: 0;\r\n\r\n  &::placeholder {\r\n    color: ${(props) => (props.darkMode ? \"#888\" : \"#999\")};\r\n  }\r\n\r\n  &:disabled {\r\n    opacity: 0.5;\r\n    cursor: not-allowed;\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 10px 15px;\r\n    font-size: 14px;\r\n  }\r\n`;\r\n\r\nconst ButtonsContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  flex-shrink: 0;\r\n`;\r\n\r\nconst SendButton = styled(IconButton)`\r\n  && {\r\n    color: ${(props) => (props.darkMode ? \"#25D366\" : \"#128C7E\")};\r\n    padding: 8px;\r\n\r\n    @media (max-width: 768px) {\r\n      padding: 6px;\r\n    }\r\n\r\n    &:hover {\r\n      background-color: ${(props) =>\r\n        props.darkMode ? \"rgba(37, 211, 102, 0.1)\" : \"rgba(18, 140, 126, 0.1)\"};\r\n    }\r\n  }\r\n`;\r\n\r\nconst MicButton = styled(IconButton)`\r\n  && {\r\n    color: ${(props) => (props.darkMode ? \"#b0b0b0\" : \"#919191\")};\r\n    padding: 8px;\r\n\r\n    @media (max-width: 768px) {\r\n      padding: 6px;\r\n    }\r\n\r\n    &:hover {\r\n      background-color: ${(props) =>\r\n        props.darkMode ? \"rgba(255,255,255,0.1)\" : \"rgba(0,0,0,0.05)\"};\r\n    }\r\n  }\r\n`;\r\n\r\nconst RecordingContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  background-color: ${(props) => (props.darkMode ? \"#2a2a2a\" : \"#f0f0f0\")};\r\n  border-radius: 25px;\r\n  padding: 8px 12px;\r\n  flex-shrink: 0;\r\n\r\n  @media (max-width: 768px) {\r\n    gap: 8px;\r\n    padding: 6px 10px;\r\n  }\r\n`;\r\n\r\nconst RecordingIndicator = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n\r\n  @media (max-width: 768px) {\r\n    gap: 6px;\r\n  }\r\n`;\r\n\r\nconst RecordingDot = styled.div`\r\n  width: 12px;\r\n  height: 12px;\r\n  border-radius: 50%;\r\n  background-color: #f44336;\r\n  animation: pulse 1.5s ease-in-out infinite;\r\n\r\n  @keyframes pulse {\r\n    0%, 100% {\r\n      opacity: 1;\r\n      transform: scale(1);\r\n    }\r\n    50% {\r\n      opacity: 0.5;\r\n      transform: scale(0.8);\r\n    }\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    width: 10px;\r\n    height: 10px;\r\n  }\r\n`;\r\n\r\nconst RecordingTime = styled.span`\r\n  color: ${(props) => (props.darkMode ? \"#e0e0e0\" : \"#333\")};\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  min-width: 40px;\r\n\r\n  @media (max-width: 768px) {\r\n    font-size: 13px;\r\n    min-width: 35px;\r\n  }\r\n`;\r\n\r\nconst StopButton = styled(IconButton)`\r\n  && {\r\n    color: #f44336;\r\n    padding: 6px;\r\n\r\n    @media (max-width: 768px) {\r\n      padding: 4px;\r\n    }\r\n\r\n    &:hover {\r\n      background-color: rgba(244, 67, 54, 0.1);\r\n    }\r\n  }\r\n`;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4354, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/components/EmojiPicker.jsx"],"sourcesContent":["// components/ChatScreen/components/EmojiPicker.jsx\r\nimport React from \"react\";\r\nimport { Popover, IconButton, Tab } from \"@mui/material\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport SearchIcon from \"@mui/icons-material/Search\";\r\nimport { EMOJI_CATEGORIES } from \"../constants\";\r\nimport {\r\n  EmojiPickerContainer,\r\n  EmojiPickerHeader,\r\n  EmojiSearchContainer,\r\n  EmojiSearchInput,\r\n  EmojiCategoryTabs,\r\n  EmojiGrid,\r\n  EmojiButton,\r\n  NoEmojisMessage,\r\n} from \"../ChatScreen.styles\";\r\n\r\nconst EmojiPicker = ({\r\n  open,\r\n  anchorEl,\r\n  onClose,\r\n  selectedCategory,\r\n  onCategoryChange,\r\n  searchTerm,\r\n  onSearchChange,\r\n  emojis,\r\n  onEmojiSelect,\r\n  darkMode,\r\n}) => {\r\n  return (\r\n    <Popover\r\n      open={open}\r\n      anchorEl={anchorEl}\r\n      onClose={onClose}\r\n      anchorOrigin={{\r\n        vertical: 'top',\r\n        horizontal: 'left',\r\n      }}\r\n      transformOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'left',\r\n      }}\r\n      PaperProps={{\r\n        style: {\r\n          backgroundColor: darkMode ? '#2a2a2a' : 'white',\r\n          color: darkMode ? '#e0e0e0' : 'black',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 4px 20px rgba(0,0,0,0.3)',\r\n        },\r\n      }}\r\n    >\r\n      <EmojiPickerContainer darkMode={darkMode}>\r\n        <EmojiPickerHeader darkMode={darkMode}>\r\n          <h3>Emojis</h3>\r\n          <IconButton onClick={onClose} size=\"small\">\r\n            <CloseIcon style={{ color: darkMode ? '#e0e0e0' : 'inherit' }} />\r\n          </IconButton>\r\n        </EmojiPickerHeader>\r\n\r\n        <EmojiSearchContainer darkMode={darkMode}>\r\n          <SearchIcon style={{ color: darkMode ? '#888' : '#666' }} />\r\n          <EmojiSearchInput\r\n            darkMode={darkMode}\r\n            placeholder=\"Search emoji...\"\r\n            value={searchTerm}\r\n            onChange={(e) => onSearchChange(e.target.value)}\r\n          />\r\n        </EmojiSearchContainer>\r\n\r\n        <EmojiCategoryTabs\r\n          value={selectedCategory}\r\n          onChange={(e, newValue) => onCategoryChange(newValue)}\r\n          variant=\"scrollable\"\r\n          scrollButtons=\"auto\"\r\n          darkMode={darkMode}\r\n          TabIndicatorProps={{\r\n            style: {\r\n              backgroundColor: darkMode ? '#d32f2f' : '#f44336',\r\n            },\r\n          }}\r\n        >\r\n          {Object.entries(EMOJI_CATEGORIES).map(([key, { name, icon }]) => (\r\n            <Tab\r\n              key={key}\r\n              value={key}\r\n              label={icon}\r\n              title={name}\r\n              style={{\r\n                color: darkMode ? '#e0e0e0' : 'black',\r\n                minWidth: 50,\r\n              }}\r\n            />\r\n          ))}\r\n        </EmojiCategoryTabs>\r\n\r\n        <EmojiGrid darkMode={darkMode}>\r\n          {emojis.length > 0 ? (\r\n            emojis.map((emoji, index) => (\r\n              <EmojiButton\r\n                key={`${emoji}-${index}`}\r\n                onClick={() => onEmojiSelect(emoji)}\r\n                darkMode={darkMode}\r\n              >\r\n                {emoji}\r\n              </EmojiButton>\r\n            ))\r\n          ) : (\r\n            <NoEmojisMessage darkMode={darkMode}>\r\n              {selectedCategory === \"recent\"\r\n                ? \"No recent emojis. Start using emojis!\"\r\n                : \"No emojis found\"}\r\n            </NoEmojisMessage>\r\n          )}\r\n        </EmojiGrid>\r\n      </EmojiPickerContainer>\r\n    </Popover>\r\n  );\r\n};\r\n\r\nexport default EmojiPicker;"],"names":[],"mappings":"AAAA,mDAAmD;;;;;;AACnD;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;AAWA,MAAM,cAAc,CAAC,EACnB,IAAI,EACJ,QAAQ,EACR,OAAO,EACP,gBAAgB,EAChB,gBAAgB,EAChB,UAAU,EACV,cAAc,EACd,MAAM,EACN,aAAa,EACb,QAAQ,EACT;IACC,qBACE,0JAAC,oMAAO;QACN,MAAM;QACN,UAAU;QACV,SAAS;QACT,cAAc;YACZ,UAAU;YACV,YAAY;QACd;QACA,iBAAiB;YACf,UAAU;YACV,YAAY;QACd;QACA,YAAY;YACV,OAAO;gBACL,iBAAiB,WAAW,YAAY;gBACxC,OAAO,WAAW,YAAY;gBAC9B,cAAc;gBACd,WAAW;YACb;QACF;kBAEA,cAAA,0JAAC,oKAAoB;YAAC,UAAU;;8BAC9B,0JAAC,iKAAiB;oBAAC,UAAU;;sCAC3B,0JAAC;sCAAG;;;;;;sCACJ,0JAAC,gNAAU;4BAAC,SAAS;4BAAS,MAAK;sCACjC,cAAA,0JAAC,0JAAS;gCAAC,OAAO;oCAAE,OAAO,WAAW,YAAY;gCAAU;;;;;;;;;;;;;;;;;8BAIhE,0JAAC,oKAAoB;oBAAC,UAAU;;sCAC9B,0JAAC,2JAAU;4BAAC,OAAO;gCAAE,OAAO,WAAW,SAAS;4BAAO;;;;;;sCACvD,0JAAC,gKAAgB;4BACf,UAAU;4BACV,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;8BAIlD,0JAAC,iKAAiB;oBAChB,OAAO;oBACP,UAAU,CAAC,GAAG,WAAa,iBAAiB;oBAC5C,SAAQ;oBACR,eAAc;oBACd,UAAU;oBACV,mBAAmB;wBACjB,OAAO;4BACL,iBAAiB,WAAW,YAAY;wBAC1C;oBACF;8BAEC,OAAO,OAAO,CAAC,qJAAgB,EAAE,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,iBAC1D,0JAAC,oLAAG;4BAEF,OAAO;4BACP,OAAO;4BACP,OAAO;4BACP,OAAO;gCACL,OAAO,WAAW,YAAY;gCAC9B,UAAU;4BACZ;2BAPK;;;;;;;;;;8BAYX,0JAAC,yJAAS;oBAAC,UAAU;8BAClB,OAAO,MAAM,GAAG,IACf,OAAO,GAAG,CAAC,CAAC,OAAO,sBACjB,0JAAC,2JAAW;4BAEV,SAAS,IAAM,cAAc;4BAC7B,UAAU;sCAET;2BAJI,GAAG,MAAM,CAAC,EAAE,OAAO;;;;sFAQ5B,0JAAC,+JAAe;wBAAC,UAAU;kCACxB,qBAAqB,WAClB,0CACA;;;;;;;;;;;;;;;;;;;;;;AAOlB;KApGM;uCAsGS","debugId":null}},
    {"offset": {"line": 4535, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/components/AttachMenu.jsx"],"sourcesContent":["// components/ChatScreen/components/AttachMenu.jsx\r\nimport React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Menu, MenuItem, ListItemIcon, ListItemText } from \"@mui/material\";\r\nimport AttachFileIcon from \"@mui/icons-material/AttachFile\";\r\nimport CameraAltIcon from \"@mui/icons-material/CameraAlt\";\r\nimport LocationOnIcon from \"@mui/icons-material/LocationOn\";\r\nimport PollIcon from \"@mui/icons-material/Poll\";\r\n\r\nfunction AttachMenu({ \r\n  anchorEl, \r\n  open, \r\n  onClose, \r\n  onAttachFile, \r\n  onTakePhoto, \r\n  onShareLocation, \r\n  onCreatePoll,\r\n  darkMode \r\n}) {\r\n  const handleMenuItemClick = (action) => {\r\n    action();\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <StyledMenu\r\n      anchorEl={anchorEl}\r\n      open={open}\r\n      onClose={onClose}\r\n      darkMode={darkMode}\r\n      anchorOrigin={{\r\n        vertical: 'top',\r\n        horizontal: 'left',\r\n      }}\r\n      transformOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'left',\r\n      }}\r\n    >\r\n      <StyledMenuItem onClick={() => handleMenuItemClick(onAttachFile)} darkMode={darkMode}>\r\n        <ListItemIcon>\r\n          <AttachFileIcon fontSize=\"small\" style={{ color: darkMode ? '#64b5f6' : '#1976d2' }} />\r\n        </ListItemIcon>\r\n        <ListItemText primary=\"Attach File\" />\r\n      </StyledMenuItem>\r\n\r\n      <StyledMenuItem onClick={() => handleMenuItemClick(onTakePhoto)} darkMode={darkMode}>\r\n        <ListItemIcon>\r\n          <CameraAltIcon fontSize=\"small\" style={{ color: darkMode ? '#ec407a' : '#e91e63' }} />\r\n        </ListItemIcon>\r\n        <ListItemText primary=\"Take Photo\" />\r\n      </StyledMenuItem>\r\n\r\n      <StyledMenuItem onClick={() => handleMenuItemClick(onShareLocation)} darkMode={darkMode}>\r\n        <ListItemIcon>\r\n          <LocationOnIcon fontSize=\"small\" style={{ color: darkMode ? '#66bb6a' : '#4caf50' }} />\r\n        </ListItemIcon>\r\n        <ListItemText primary=\"Share Location\" />\r\n      </StyledMenuItem>\r\n\r\n      <StyledMenuItem onClick={() => handleMenuItemClick(onCreatePoll)} darkMode={darkMode}>\r\n        <ListItemIcon>\r\n          <PollIcon fontSize=\"small\" style={{ color: darkMode ? '#ffa726' : '#ff9800' }} />\r\n        </ListItemIcon>\r\n        <ListItemText primary=\"Create Poll\" />\r\n      </StyledMenuItem>\r\n    </StyledMenu>\r\n  );\r\n}\r\n\r\nexport default AttachMenu;\r\n\r\nconst StyledMenu = styled(Menu)`\r\n  && {\r\n    .MuiPaper-root {\r\n      background-color: ${(props) => (props.darkMode ? \"#2a2a2a\" : \"#fff\")};\r\n      color: ${(props) => (props.darkMode ? \"#e0e0e0\" : \"#000\")};\r\n      border-radius: 8px;\r\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n      min-width: 200px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst StyledMenuItem = styled(MenuItem)`\r\n  && {\r\n    padding: 12px 16px;\r\n    color: ${(props) => (props.darkMode ? \"#e0e0e0\" : \"#000\")};\r\n\r\n    &:hover {\r\n      background-color: ${(props) =>\r\n        props.darkMode ? \"rgba(255,255,255,0.1)\" : \"rgba(0,0,0,0.05)\"};\r\n    }\r\n\r\n    .MuiListItemText-primary {\r\n      font-size: 14px;\r\n    }\r\n  }\r\n`;"],"names":[],"mappings":"AAAA,kDAAkD;;;;;;AAClD;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;AAEA,SAAS,WAAW,EAClB,QAAQ,EACR,IAAI,EACJ,OAAO,EACP,YAAY,EACZ,WAAW,EACX,eAAe,EACf,YAAY,EACZ,QAAQ,EACT;IACC,MAAM,sBAAsB,CAAC;QAC3B;QACA;IACF;IAEA,qBACE,0JAAC;QACC,UAAU;QACV,MAAM;QACN,SAAS;QACT,UAAU;QACV,cAAc;YACZ,UAAU;YACV,YAAY;QACd;QACA,iBAAiB;YACf,UAAU;YACV,YAAY;QACd;;0BAEA,0JAAC;gBAAe,SAAS,IAAM,oBAAoB;gBAAe,UAAU;;kCAC1E,0JAAC,wNAAY;kCACX,cAAA,0JAAC,+JAAc;4BAAC,UAAS;4BAAQ,OAAO;gCAAE,OAAO,WAAW,YAAY;4BAAU;;;;;;;;;;;kCAEpF,0JAAC,wNAAY;wBAAC,SAAQ;;;;;;;;;;;;0BAGxB,0JAAC;gBAAe,SAAS,IAAM,oBAAoB;gBAAc,UAAU;;kCACzE,0JAAC,wNAAY;kCACX,cAAA,0JAAC,8JAAa;4BAAC,UAAS;4BAAQ,OAAO;gCAAE,OAAO,WAAW,YAAY;4BAAU;;;;;;;;;;;kCAEnF,0JAAC,wNAAY;wBAAC,SAAQ;;;;;;;;;;;;0BAGxB,0JAAC;gBAAe,SAAS,IAAM,oBAAoB;gBAAkB,UAAU;;kCAC7E,0JAAC,wNAAY;kCACX,cAAA,0JAAC,+JAAc;4BAAC,UAAS;4BAAQ,OAAO;gCAAE,OAAO,WAAW,YAAY;4BAAU;;;;;;;;;;;kCAEpF,0JAAC,wNAAY;wBAAC,SAAQ;;;;;;;;;;;;0BAGxB,0JAAC;gBAAe,SAAS,IAAM,oBAAoB;gBAAe,UAAU;;kCAC1E,0JAAC,wNAAY;kCACX,cAAA,0JAAC,yJAAQ;4BAAC,UAAS;4BAAQ,OAAO;gCAAE,OAAO,WAAW,YAAY;4BAAU;;;;;;;;;;;kCAE9E,0JAAC,wNAAY;wBAAC,SAAQ;;;;;;;;;;;;;;;;;;AAI9B;KA3DS;uCA6DM;AAEf,MAAM,aAAa,IAAA,6LAAM,EAAC,wLAAI,CAAC,CAAC;;;wBAGR,EAAE,CAAC,QAAW,MAAM,QAAQ,GAAG,YAAY,OAAQ;aAC9D,EAAE,CAAC,QAAW,MAAM,QAAQ,GAAG,YAAY,OAAQ;;;;;;AAMhE,CAAC;MAVK;AAYN,MAAM,iBAAiB,IAAA,6LAAM,EAAC,wMAAQ,CAAC,CAAC;;;WAG7B,EAAE,CAAC,QAAW,MAAM,QAAQ,GAAG,YAAY,OAAQ;;;wBAGtC,EAAE,CAAC,QACnB,MAAM,QAAQ,GAAG,0BAA0B,mBAAmB;;;;;;;AAOtE,CAAC;MAdK","debugId":null}},
    {"offset": {"line": 4757, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/components/FileUploadDialog.jsx"],"sourcesContent":["// components/ChatScreen/components/FileUploadDialog.jsx\r\nimport React from \"react\";\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  IconButton,\r\n  CircularProgress,\r\n} from \"@mui/material\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport SendIcon from \"@mui/icons-material/Send\";\r\nimport { FilePreview, FileInfo, FileInput, UploadProgress } from \"../ChatScreen.styles\";\r\nimport { formatFileSize } from \"../utils\";\r\n\r\nconst FileUploadDialog = ({\r\n  open,\r\n  onClose,\r\n  file,\r\n  filePreview,\r\n  input,\r\n  onInputChange,\r\n  uploadProgress,\r\n  isUploading,\r\n  onSend,\r\n  darkMode,\r\n}) => {\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={onClose}\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n      PaperProps={{\r\n        style: {\r\n          backgroundColor: darkMode ? '#2a2a2a' : 'white',\r\n          color: darkMode ? '#e0e0e0' : 'black',\r\n        },\r\n      }}\r\n    >\r\n      <DialogTitle style={{ color: darkMode ? '#e0e0e0' : 'black' }}>\r\n        Send File\r\n        <IconButton\r\n          onClick={onClose}\r\n          style={{ position: 'absolute', right: 8, top: 8, color: darkMode ? '#e0e0e0' : 'inherit' }}\r\n        >\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        {filePreview && (\r\n          <FilePreview>\r\n            <img src={filePreview} alt=\"Preview\" style={{ maxWidth: '100%', maxHeight: '300px' }} />\r\n          </FilePreview>\r\n        )}\r\n        <FileInfo darkMode={darkMode}>\r\n          <p><strong>File:</strong> {file?.name}</p>\r\n          <p><strong>Size:</strong> {formatFileSize(file?.size)} MB</p>\r\n          <p><strong>Type:</strong> {file?.type || 'Unknown'}</p>\r\n        </FileInfo>\r\n        <FileInput\r\n          darkMode={darkMode}\r\n          value={input}\r\n          onChange={(e) => onInputChange(e.target.value)}\r\n          placeholder=\"Add a message (optional)\"\r\n          type=\"text\"\r\n        />\r\n        {isUploading && (\r\n          <UploadProgress>\r\n            <CircularProgress variant=\"determinate\" value={uploadProgress} />\r\n            <p>{Math.round(uploadProgress)}%</p>\r\n          </UploadProgress>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onClose} style={{ color: darkMode ? '#e0e0e0' : 'inherit' }}>\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          onClick={onSend}\r\n          variant=\"contained\"\r\n          disabled={isUploading}\r\n          style={{ backgroundColor: darkMode ? '#d32f2f' : '#f44336', color: 'white' }}\r\n          startIcon={<SendIcon />}\r\n        >\r\n          {isUploading ? 'Sending...' : 'Send'}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default FileUploadDialog;"],"names":[],"mappings":"AAAA,wDAAwD;;;;;;AACxD;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;;;;;;;;AAEA,MAAM,mBAAmB,CAAC,EACxB,IAAI,EACJ,OAAO,EACP,IAAI,EACJ,WAAW,EACX,KAAK,EACL,aAAa,EACb,cAAc,EACd,WAAW,EACX,MAAM,EACN,QAAQ,EACT;IACC,qBACE,0JAAC,gMAAM;QACL,MAAM;QACN,SAAS;QACT,UAAS;QACT,SAAS;QACT,YAAY;YACV,OAAO;gBACL,iBAAiB,WAAW,YAAY;gBACxC,OAAO,WAAW,YAAY;YAChC;QACF;;0BAEA,0JAAC,oNAAW;gBAAC,OAAO;oBAAE,OAAO,WAAW,YAAY;gBAAQ;;oBAAG;kCAE7D,0JAAC,gNAAU;wBACT,SAAS;wBACT,OAAO;4BAAE,UAAU;4BAAY,OAAO;4BAAG,KAAK;4BAAG,OAAO,WAAW,YAAY;wBAAU;kCAEzF,cAAA,0JAAC,0JAAS;;;;;;;;;;;;;;;;0BAGd,0JAAC,4NAAa;;oBACX,6BACC,0JAAC,2JAAW;kCACV,cAAA,0JAAC;4BAAI,KAAK;4BAAa,KAAI;4BAAU,OAAO;gCAAE,UAAU;gCAAQ,WAAW;4BAAQ;;;;;;;;;;;kCAGvF,0JAAC,wJAAQ;wBAAC,UAAU;;0CAClB,0JAAC;;kDAAE,0JAAC;kDAAO;;;;;;oCAAc;oCAAE,MAAM;;;;;;;0CACjC,0JAAC;;kDAAE,0JAAC;kDAAO;;;;;;oCAAc;oCAAE,IAAA,+IAAc,EAAC,MAAM;oCAAM;;;;;;;0CACtD,0JAAC;;kDAAE,0JAAC;kDAAO;;;;;;oCAAc;oCAAE,MAAM,QAAQ;;;;;;;;;;;;;kCAE3C,0JAAC,yJAAS;wBACR,UAAU;wBACV,OAAO;wBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;wBAC7C,aAAY;wBACZ,MAAK;;;;;;oBAEN,6BACC,0JAAC,8JAAc;;0CACb,0JAAC,wOAAgB;gCAAC,SAAQ;gCAAc,OAAO;;;;;;0CAC/C,0JAAC;;oCAAG,KAAK,KAAK,CAAC;oCAAgB;;;;;;;;;;;;;;;;;;;0BAIrC,0JAAC,4NAAa;;kCACZ,0JAAC,gMAAM;wBAAC,SAAS;wBAAS,OAAO;4BAAE,OAAO,WAAW,YAAY;wBAAU;kCAAG;;;;;;kCAG9E,0JAAC,gMAAM;wBACL,SAAS;wBACT,SAAQ;wBACR,UAAU;wBACV,OAAO;4BAAE,iBAAiB,WAAW,YAAY;4BAAW,OAAO;wBAAQ;wBAC3E,yBAAW,0JAAC,yJAAQ;;;;;kCAEnB,cAAc,eAAe;;;;;;;;;;;;;;;;;;AAKxC;KA3EM;uCA6ES","debugId":null}},
    {"offset": {"line": 5005, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/components/CameraDialog.jsx"],"sourcesContent":["// components/ChatScreen/components/CameraDialog.jsx\r\nimport React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Dialog, DialogContent, DialogActions, Button, CircularProgress, TextField } from \"@mui/material\";\r\nimport CameraAltIcon from \"@mui/icons-material/CameraAlt\";\r\nimport SendIcon from \"@mui/icons-material/Send\";\r\nimport CancelIcon from \"@mui/icons-material/Cancel\";\r\nimport RefreshIcon from \"@mui/icons-material/Refresh\";\r\n\r\nfunction CameraDialog({\r\n  open,\r\n  showCamera,\r\n  capturedImage,\r\n  videoRef,\r\n  input,\r\n  onInputChange,\r\n  uploadProgress,\r\n  isUploading,\r\n  onCapture,\r\n  onRetake,\r\n  onCancel,\r\n  onSend,\r\n  darkMode,\r\n}) {\r\n  return (\r\n    <StyledDialog \r\n      open={open} \r\n      onClose={!isUploading ? onCancel : undefined} \r\n      maxWidth=\"sm\" \r\n      fullWidth \r\n      darkMode={darkMode}\r\n    >\r\n      <DialogContent>\r\n        {showCamera && (\r\n          <VideoContainer>\r\n            <Video ref={videoRef} autoPlay playsInline muted />\r\n          </VideoContainer>\r\n        )}\r\n\r\n        {capturedImage && (\r\n          <PreviewContainer>\r\n            <PreviewImage src={capturedImage} alt=\"Captured photo\" />\r\n            <TextField\r\n              fullWidth\r\n              placeholder=\"Add a caption (optional)\"\r\n              value={input}\r\n              onChange={(e) => onInputChange(e.target.value)}\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              disabled={isUploading}\r\n              InputProps={{\r\n                style: {\r\n                  color: darkMode ? \"#e0e0e0\" : \"#000\",\r\n                  backgroundColor: darkMode ? \"#2a2a2a\" : \"#fff\",\r\n                },\r\n              }}\r\n            />\r\n            {isUploading && (\r\n              <ProgressContainer>\r\n                <CircularProgress variant=\"determinate\" value={uploadProgress} />\r\n                <ProgressText darkMode={darkMode}>{uploadProgress}%</ProgressText>\r\n              </ProgressContainer>\r\n            )}\r\n          </PreviewContainer>\r\n        )}\r\n      </DialogContent>\r\n\r\n      <DialogActions>\r\n        {showCamera && (\r\n          <>\r\n            <Button onClick={onCancel} color=\"secondary\" startIcon={<CancelIcon />}>\r\n              Cancel\r\n            </Button>\r\n            <Button \r\n              onClick={onCapture} \r\n              color=\"primary\" \r\n              variant=\"contained\" \r\n              startIcon={<CameraAltIcon />}\r\n            >\r\n              Capture\r\n            </Button>\r\n          </>\r\n        )}\r\n\r\n        {capturedImage && !showCamera && (\r\n          <>\r\n            <Button \r\n              onClick={onRetake} \r\n              color=\"secondary\" \r\n              startIcon={<RefreshIcon />} \r\n              disabled={isUploading}\r\n            >\r\n              Retake\r\n            </Button>\r\n            <Button \r\n              onClick={onCancel} \r\n              color=\"secondary\" \r\n              startIcon={<CancelIcon />} \r\n              disabled={isUploading}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              onClick={onSend}\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              startIcon={<SendIcon />}\r\n              disabled={isUploading}\r\n            >\r\n              {isUploading ? \"Sending...\" : \"Send\"}\r\n            </Button>\r\n          </>\r\n        )}\r\n      </DialogActions>\r\n    </StyledDialog>\r\n  );\r\n}\r\n\r\nexport default CameraDialog;\r\n\r\nconst StyledDialog = styled(Dialog)`\r\n  .MuiDialog-paper {\r\n    background-color: ${(props) => (props.darkMode ? \"#1e1e1e\" : \"#fff\")};\r\n    color: ${(props) => (props.darkMode ? \"#e0e0e0\" : \"#000\")};\r\n  }\r\n`;\r\n\r\nconst VideoContainer = styled.div`\r\n  width: 100%;\r\n  aspect-ratio: 4/3;\r\n  background: #000;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nconst Video = styled.video`\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n`;\r\n\r\nconst PreviewContainer = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst PreviewImage = styled.img`\r\n  width: 100%;\r\n  max-height: 500px;\r\n  object-fit: contain;\r\n  border-radius: 8px;\r\n  margin-bottom: 16px;\r\n  background-color: #000;\r\n`;\r\n\r\nconst ProgressContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 16px;\r\n  margin-top: 16px;\r\n`;\r\n\r\nconst ProgressText = styled.span`\r\n  color: ${(props) => (props.darkMode ? \"#e0e0e0\" : \"#333\")};\r\n  font-weight: 500;\r\n`;"],"names":[],"mappings":"AAAA,oDAAoD;;;;;;AACpD;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;AAEA,SAAS,aAAa,EACpB,IAAI,EACJ,UAAU,EACV,aAAa,EACb,QAAQ,EACR,KAAK,EACL,aAAa,EACb,cAAc,EACd,WAAW,EACX,SAAS,EACT,QAAQ,EACR,QAAQ,EACR,MAAM,EACN,QAAQ,EACT;IACC,qBACE,0JAAC;QACC,MAAM;QACN,SAAS,CAAC,cAAc,WAAW;QACnC,UAAS;QACT,SAAS;QACT,UAAU;;0BAEV,0JAAC,4NAAa;;oBACX,4BACC,0JAAC;kCACC,cAAA,0JAAC;4BAAM,KAAK;4BAAU,QAAQ;4BAAC,WAAW;4BAAC,KAAK;;;;;;;;;;;oBAInD,+BACC,0JAAC;;0CACC,0JAAC;gCAAa,KAAK;gCAAe,KAAI;;;;;;0CACtC,0JAAC,4MAAS;gCACR,SAAS;gCACT,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;gCAC7C,SAAQ;gCACR,QAAO;gCACP,UAAU;gCACV,YAAY;oCACV,OAAO;wCACL,OAAO,WAAW,YAAY;wCAC9B,iBAAiB,WAAW,YAAY;oCAC1C;gCACF;;;;;;4BAED,6BACC,0JAAC;;kDACC,0JAAC,wOAAgB;wCAAC,SAAQ;wCAAc,OAAO;;;;;;kDAC/C,0JAAC;wCAAa,UAAU;;4CAAW;4CAAe;;;;;;;;;;;;;;;;;;;;;;;;;0BAO5D,0JAAC,4NAAa;;oBACX,4BACC;;0CACE,0JAAC,gMAAM;gCAAC,SAAS;gCAAU,OAAM;gCAAY,yBAAW,0JAAC,2JAAU;;;;;0CAAK;;;;;;0CAGxE,0JAAC,gMAAM;gCACL,SAAS;gCACT,OAAM;gCACN,SAAQ;gCACR,yBAAW,0JAAC,8JAAa;;;;;0CAC1B;;;;;;;;oBAMJ,iBAAiB,CAAC,4BACjB;;0CACE,0JAAC,gMAAM;gCACL,SAAS;gCACT,OAAM;gCACN,yBAAW,0JAAC,4JAAW;;;;;gCACvB,UAAU;0CACX;;;;;;0CAGD,0JAAC,gMAAM;gCACL,SAAS;gCACT,OAAM;gCACN,yBAAW,0JAAC,2JAAU;;;;;gCACtB,UAAU;0CACX;;;;;;0CAGD,0JAAC,gMAAM;gCACL,SAAS;gCACT,OAAM;gCACN,SAAQ;gCACR,yBAAW,0JAAC,yJAAQ;;;;;gCACpB,UAAU;0CAET,cAAc,eAAe;;;;;;;;;;;;;;;;;;;;AAO5C;KA3GS;uCA6GM;AAEf,MAAM,eAAe,IAAA,6LAAM,EAAC,gMAAM,CAAC,CAAC;;sBAEd,EAAE,CAAC,QAAW,MAAM,QAAQ,GAAG,YAAY,OAAQ;WAC9D,EAAE,CAAC,QAAW,MAAM,QAAQ,GAAG,YAAY,OAAQ;;AAE9D,CAAC;MALK;AAON,MAAM,iBAAiB,6LAAM,CAAC,GAAG,CAAC;;;;;;;;;AASlC,CAAC;MATK;AAWN,MAAM,QAAQ,6LAAM,CAAC,KAAK,CAAC;;;;AAI3B,CAAC;MAJK;AAMN,MAAM,mBAAmB,6LAAM,CAAC,GAAG,CAAC;;AAEpC,CAAC;MAFK;AAIN,MAAM,eAAe,6LAAM,CAAC,GAAG,CAAC;;;;;;;AAOhC,CAAC;MAPK;AASN,MAAM,oBAAoB,6LAAM,CAAC,GAAG,CAAC;;;;;;AAMrC,CAAC;MANK;AAQN,MAAM,eAAe,6LAAM,CAAC,IAAI,CAAC;SACxB,EAAE,CAAC,QAAW,MAAM,QAAQ,GAAG,YAAY,OAAQ;;AAE5D,CAAC;MAHK","debugId":null}},
    {"offset": {"line": 5291, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/components/LocationPreviewDialog.jsx"],"sourcesContent":["// components/ChatScreen/components/LocationPreviewDialog.jsx\r\nimport React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Dialog, DialogTitle, DialogContent, DialogActions, Button, TextField, CircularProgress } from \"@mui/material\";\r\nimport SendIcon from \"@mui/icons-material/Send\";\r\nimport CancelIcon from \"@mui/icons-material/Cancel\";\r\nimport LocationOnIcon from \"@mui/icons-material/LocationOn\";\r\nimport OpenInNewIcon from \"@mui/icons-material/OpenInNew\";\r\n\r\nfunction LocationPreviewDialog({\r\n  open,\r\n  locationData,\r\n  input,\r\n  onInputChange,\r\n  onCancel,\r\n  onSend,\r\n  isGettingLocation,\r\n  darkMode,\r\n}) {\r\n  if (isGettingLocation) {\r\n    return (\r\n      <StyledDialog open={open} onClose={onCancel} maxWidth=\"sm\" fullWidth darkMode={darkMode}>\r\n        <DialogContent>\r\n          <LoadingContainer>\r\n            <CircularProgress />\r\n            <LoadingText darkMode={darkMode}>Getting your location...</LoadingText>\r\n          </LoadingContainer>\r\n        </DialogContent>\r\n      </StyledDialog>\r\n    );\r\n  }\r\n\r\n  if (!locationData) return null;\r\n\r\n  const mapUrl = `https://www.openstreetmap.org/?mlat=${locationData.latitude}&mlon=${locationData.longitude}#map=15/${locationData.latitude}/${locationData.longitude}`;\r\n\r\n  return (\r\n    <StyledDialog open={open} onClose={onCancel} maxWidth=\"sm\" fullWidth darkMode={darkMode}>\r\n      <DialogTitle>\r\n        <TitleContainer>\r\n          <LocationOnIcon style={{ color: \"#f44336\", marginRight: \"8px\" }} />\r\n          Share Location\r\n        </TitleContainer>\r\n      </DialogTitle>\r\n\r\n      <DialogContent>\r\n        <MapContainer>\r\n          <MapFrame\r\n            src={`https://www.openstreetmap.org/export/embed.html?bbox=${locationData.longitude - 0.01},${locationData.latitude - 0.01},${locationData.longitude + 0.01},${locationData.latitude + 0.01}&layer=mapnik&marker=${locationData.latitude},${locationData.longitude}`}\r\n            title=\"Location preview\"\r\n          />\r\n        </MapContainer>\r\n        \r\n        <LocationInfo darkMode={darkMode}>\r\n          <InfoRow>\r\n            <strong>Latitude:</strong> {locationData.latitude.toFixed(6)}\r\n          </InfoRow>\r\n          <InfoRow>\r\n            <strong>Longitude:</strong> {locationData.longitude.toFixed(6)}\r\n          </InfoRow>\r\n          <ViewMapLink href={mapUrl} target=\"_blank\" rel=\"noopener noreferrer\" darkMode={darkMode}>\r\n            <OpenInNewIcon style={{ fontSize: 16, marginRight: 4 }} />\r\n            View on OpenStreetMap\r\n          </ViewMapLink>\r\n        </LocationInfo>\r\n\r\n        <TextField\r\n          fullWidth\r\n          placeholder=\"Add a message (optional)\"\r\n          value={input}\r\n          onChange={(e) => onInputChange(e.target.value)}\r\n          variant=\"outlined\"\r\n          margin=\"normal\"\r\n          InputProps={{\r\n            style: {\r\n              color: darkMode ? \"#e0e0e0\" : \"#000\",\r\n              backgroundColor: darkMode ? \"#2a2a2a\" : \"#fff\",\r\n            },\r\n          }}\r\n        />\r\n      </DialogContent>\r\n\r\n      <DialogActions>\r\n        <Button onClick={onCancel} color=\"secondary\" startIcon={<CancelIcon />}>\r\n          Cancel\r\n        </Button>\r\n        <Button onClick={onSend} color=\"primary\" variant=\"contained\" startIcon={<SendIcon />}>\r\n          Send Location\r\n        </Button>\r\n      </DialogActions>\r\n    </StyledDialog>\r\n  );\r\n}\r\n\r\nexport default LocationPreviewDialog;\r\n\r\nconst StyledDialog = styled(Dialog)`\r\n  .MuiDialog-paper {\r\n    background-color: ${(props) => (props.darkMode ? \"#1e1e1e\" : \"#fff\")};\r\n    color: ${(props) => (props.darkMode ? \"#e0e0e0\" : \"#000\")};\r\n  }\r\n`;\r\n\r\nconst TitleContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst LoadingContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 40px 20px;\r\n  gap: 16px;\r\n`;\r\n\r\nconst LoadingText = styled.p`\r\n  color: ${(props) => (props.darkMode ? \"#e0e0e0\" : \"#333\")};\r\n  font-size: 16px;\r\n  margin: 0;\r\n`;\r\n\r\nconst MapContainer = styled.div`\r\n  width: 100%;\r\n  height: 300px;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  background: #f0f0f0;\r\n  margin-bottom: 16px;\r\n`;\r\n\r\nconst MapFrame = styled.iframe`\r\n  width: 100%;\r\n  height: 100%;\r\n  border: none;\r\n`;\r\n\r\nconst LocationInfo = styled.div`\r\n  padding: 16px;\r\n  background-color: ${(props) => (props.darkMode ? \"#2a2a2a\" : \"#f5f5f5\")};\r\n  border-radius: 8px;\r\n  font-size: 14px;\r\n  color: ${(props) => (props.darkMode ? \"#e0e0e0\" : \"#333\")};\r\n`;\r\n\r\nconst InfoRow = styled.div`\r\n  margin-bottom: 8px;\r\n  line-height: 1.6;\r\n\r\n  &:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n`;\r\n\r\nconst ViewMapLink = styled.a`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  margin-top: 12px;\r\n  color: ${(props) => (props.darkMode ? \"#4CAF50\" : \"#128C7E\")};\r\n  text-decoration: none;\r\n  font-weight: 500;\r\n  font-size: 13px;\r\n\r\n  &:hover {\r\n    text-decoration: underline;\r\n  }\r\n`;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5636, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/components/VoiceRecordingDialog.jsx"],"sourcesContent":["// components/ChatScreen/components/VoiceRecordingDialog.jsx\r\nimport React from \"react\";\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  CircularProgress,\r\n} from \"@mui/material\";\r\nimport SendIcon from \"@mui/icons-material/Send\";\r\nimport { VoicePreview, UploadProgress } from \"../ChatScreen.styles\";\r\nimport { formatTime } from \"../utils\";\r\n\r\nconst VoiceRecordingDialog = ({\r\n  open,\r\n  audioBlob,\r\n  recordingTime,\r\n  uploadProgress,\r\n  isUploading,\r\n  onCancel,\r\n  onSend,\r\n  onError,\r\n  darkMode,\r\n}) => {\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={onCancel}\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n      PaperProps={{\r\n        style: {\r\n          backgroundColor: darkMode ? '#2a2a2a' : 'white',\r\n          color: darkMode ? '#e0e0e0' : 'black',\r\n        },\r\n      }}\r\n    >\r\n      <DialogTitle style={{ color: darkMode ? '#e0e0e0' : 'black' }}>\r\n        Voice Message Recorded\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        <VoicePreview darkMode={darkMode}>\r\n          <p>Duration: {formatTime(recordingTime)}</p>\r\n          {audioBlob && (\r\n            <>\r\n              <p style={{ fontSize: '12px', color: darkMode ? '#888' : '#666' }}>\r\n                Size: {(audioBlob.size / 1024).toFixed(2)} KB\r\n              </p>\r\n              <p style={{ fontSize: '12px', color: darkMode ? '#888' : '#666' }}>\r\n                Type: {audioBlob.type}\r\n              </p>\r\n              <audio \r\n                controls \r\n                src={URL.createObjectURL(audioBlob)} \r\n                style={{ width: '100%', marginTop: 10 }}\r\n                onError={(e) => {\r\n                  console.error('Audio playback error:', e);\r\n                  onError('Failed to play audio. The recording might be corrupted.');\r\n                }}\r\n              />\r\n            </>\r\n          )}\r\n        </VoicePreview>\r\n        {isUploading && (\r\n          <UploadProgress>\r\n            <CircularProgress variant=\"determinate\" value={uploadProgress} />\r\n            <p>{Math.round(uploadProgress)}%</p>\r\n          </UploadProgress>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onCancel} disabled={isUploading} style={{ color: darkMode ? '#e0e0e0' : 'inherit' }}>\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          onClick={onSend}\r\n          variant=\"contained\"\r\n          disabled={isUploading || !audioBlob || audioBlob.size === 0}\r\n          style={{ backgroundColor: darkMode ? '#d32f2f' : '#f44336', color: 'white' }}\r\n          startIcon={<SendIcon />}\r\n        >\r\n          {isUploading ? 'Sending...' : 'Send'}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default VoiceRecordingDialog;"],"names":[],"mappings":"AAAA,4DAA4D;;;;;;AAC5D;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;;;;;;;AAEA,MAAM,uBAAuB,CAAC,EAC5B,IAAI,EACJ,SAAS,EACT,aAAa,EACb,cAAc,EACd,WAAW,EACX,QAAQ,EACR,MAAM,EACN,OAAO,EACP,QAAQ,EACT;IACC,qBACE,0JAAC,gMAAM;QACL,MAAM;QACN,SAAS;QACT,UAAS;QACT,SAAS;QACT,YAAY;YACV,OAAO;gBACL,iBAAiB,WAAW,YAAY;gBACxC,OAAO,WAAW,YAAY;YAChC;QACF;;0BAEA,0JAAC,oNAAW;gBAAC,OAAO;oBAAE,OAAO,WAAW,YAAY;gBAAQ;0BAAG;;;;;;0BAG/D,0JAAC,4NAAa;;kCACZ,0JAAC,4JAAY;wBAAC,UAAU;;0CACtB,0JAAC;;oCAAE;oCAAW,IAAA,2IAAU,EAAC;;;;;;;4BACxB,2BACC;;kDACE,0JAAC;wCAAE,OAAO;4CAAE,UAAU;4CAAQ,OAAO,WAAW,SAAS;wCAAO;;4CAAG;4CAC1D,CAAC,UAAU,IAAI,GAAG,IAAI,EAAE,OAAO,CAAC;4CAAG;;;;;;;kDAE5C,0JAAC;wCAAE,OAAO;4CAAE,UAAU;4CAAQ,OAAO,WAAW,SAAS;wCAAO;;4CAAG;4CAC1D,UAAU,IAAI;;;;;;;kDAEvB,0JAAC;wCACC,QAAQ;wCACR,KAAK,IAAI,eAAe,CAAC;wCACzB,OAAO;4CAAE,OAAO;4CAAQ,WAAW;wCAAG;wCACtC,SAAS,CAAC;4CACR,QAAQ,KAAK,CAAC,yBAAyB;4CACvC,QAAQ;wCACV;;;;;;;;;;;;;;oBAKP,6BACC,0JAAC,8JAAc;;0CACb,0JAAC,wOAAgB;gCAAC,SAAQ;gCAAc,OAAO;;;;;;0CAC/C,0JAAC;;oCAAG,KAAK,KAAK,CAAC;oCAAgB;;;;;;;;;;;;;;;;;;;0BAIrC,0JAAC,4NAAa;;kCACZ,0JAAC,gMAAM;wBAAC,SAAS;wBAAU,UAAU;wBAAa,OAAO;4BAAE,OAAO,WAAW,YAAY;wBAAU;kCAAG;;;;;;kCAGtG,0JAAC,gMAAM;wBACL,SAAS;wBACT,SAAQ;wBACR,UAAU,eAAe,CAAC,aAAa,UAAU,IAAI,KAAK;wBAC1D,OAAO;4BAAE,iBAAiB,WAAW,YAAY;4BAAW,OAAO;wBAAQ;wBAC3E,yBAAW,0JAAC,yJAAQ;;;;;kCAEnB,cAAc,eAAe;;;;;;;;;;;;;;;;;;AAKxC;KAzEM;uCA2ES","debugId":null}},
    {"offset": {"line": 5840, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/components/ChatInfoDialog.jsx"],"sourcesContent":["// components/ChatScreen/components/ChatInfoDialog.jsx\r\nimport React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  IconButton,\r\n  Avatar,\r\n  TextField,\r\n  Button,\r\n  Tabs,\r\n  Tab,\r\n  Box,\r\n} from \"@mui/material\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport EditIcon from \"@mui/icons-material/Edit\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport CancelIcon from \"@mui/icons-material/Cancel\";\r\nimport LinkIcon from \"@mui/icons-material/Link\";\r\nimport ImageIcon from \"@mui/icons-material/Image\";\r\nimport DescriptionIcon from \"@mui/icons-material/Description\";\r\nimport DownloadIcon from \"@mui/icons-material/Download\";\r\nimport OpenInNewIcon from \"@mui/icons-material/OpenInNew\";\r\nimport moment from \"moment\";\r\n\r\nfunction TabPanel({ children, value, index, ...other }) {\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-${index}`}\r\n      aria-labelledby={`tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box sx={{ p: 2 }}>{children}</Box>}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ChatInfoDialog({\r\n  open,\r\n  onClose,\r\n  recipient,\r\n  recipientEmail,\r\n  isSelfChat,\r\n  messages,\r\n  onUpdateDisplayName,\r\n  darkMode,\r\n}) {\r\n  const [isEditingName, setIsEditingName] = useState(false);\r\n  const [displayName, setDisplayName] = useState(\"\");\r\n  const [tabValue, setTabValue] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (recipient?.displayName) {\r\n      setDisplayName(recipient.displayName);\r\n    } else {\r\n      setDisplayName(recipientEmail?.split(\"@\")[0] || \"\");\r\n    }\r\n  }, [recipient, recipientEmail]);\r\n\r\n  const handleTabChange = (event, newValue) => {\r\n    setTabValue(newValue);\r\n  };\r\n\r\n  const handleSaveDisplayName = () => {\r\n    if (displayName.trim() && onUpdateDisplayName) {\r\n      onUpdateDisplayName(displayName.trim());\r\n    }\r\n    setIsEditingName(false);\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    // Reset to original name\r\n    if (recipient?.displayName) {\r\n      setDisplayName(recipient.displayName);\r\n    } else {\r\n      setDisplayName(recipientEmail?.split(\"@\")[0] || \"\");\r\n    }\r\n    setIsEditingName(false);\r\n  };\r\n\r\n  // Extract links from messages\r\n  const extractLinks = () => {\r\n    if (!messages) return [];\r\n    const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\r\n    const links = [];\r\n\r\n    messages.forEach((msg) => {\r\n      if (msg.message) {\r\n        const urls = msg.message.match(urlRegex);\r\n        if (urls) {\r\n          urls.forEach((url) => {\r\n            links.push({\r\n              id: msg.id,\r\n              url,\r\n              message: msg.message,\r\n              timestamp: msg.timestamp,\r\n              user: msg.user,\r\n            });\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    return links.reverse();\r\n  };\r\n\r\n  // Extract media (images, videos, audio)\r\n  const extractMedia = () => {\r\n    if (!messages) return [];\r\n    const media = [];\r\n\r\n    messages.forEach((msg) => {\r\n      if (msg.fileURL && msg.fileType) {\r\n        if (\r\n          msg.fileType.startsWith(\"image/\") ||\r\n          msg.fileType.startsWith(\"video/\") ||\r\n          msg.fileType.startsWith(\"audio/\")\r\n        ) {\r\n          media.push({\r\n            id: msg.id,\r\n            url: msg.fileURL,\r\n            fileName: msg.fileName,\r\n            fileType: msg.fileType,\r\n            fileSize: msg.fileSize,\r\n            timestamp: msg.timestamp,\r\n            user: msg.user,\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    return media.reverse();\r\n  };\r\n\r\n  // Extract documents\r\n  const extractDocuments = () => {\r\n    if (!messages) return [];\r\n    const docs = [];\r\n\r\n    messages.forEach((msg) => {\r\n      if (msg.fileURL && msg.fileType) {\r\n        if (\r\n          !msg.fileType.startsWith(\"image/\") &&\r\n          !msg.fileType.startsWith(\"video/\") &&\r\n          !msg.fileType.startsWith(\"audio/\")\r\n        ) {\r\n          docs.push({\r\n            id: msg.id,\r\n            url: msg.fileURL,\r\n            fileName: msg.fileName,\r\n            fileType: msg.fileType,\r\n            fileSize: msg.fileSize,\r\n            timestamp: msg.timestamp,\r\n            user: msg.user,\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    return docs.reverse();\r\n  };\r\n\r\n  const links = extractLinks();\r\n  const media = extractMedia();\r\n  const documents = extractDocuments();\r\n\r\n  const formatFileSize = (bytes) => {\r\n    if (!bytes) return \"Unknown size\";\r\n    const k = 1024;\r\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + \" \" + sizes[i];\r\n  };\r\n\r\n  const downloadFile = async (url, fileName) => {\r\n    try {\r\n      const response = await fetch(url);\r\n      const blob = await response.blob();\r\n      const blobUrl = window.URL.createObjectURL(blob);\r\n      const link = document.createElement(\"a\");\r\n      link.href = blobUrl;\r\n      link.download = fileName || \"download\";\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      setTimeout(() => window.URL.revokeObjectURL(blobUrl), 100);\r\n    } catch (error) {\r\n      console.error(\"Download failed:\", error);\r\n      window.open(url, \"_blank\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <StyledDialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth darkMode={darkMode}>\r\n      <DialogTitle>\r\n        <HeaderContainer>\r\n          <span>Chat Info</span>\r\n          <IconButton onClick={onClose} size=\"small\">\r\n            <CloseIcon style={{ color: darkMode ? \"#e0e0e0\" : \"#000\" }} />\r\n          </IconButton>\r\n        </HeaderContainer>\r\n      </DialogTitle>\r\n\r\n      <DialogContent>\r\n        {/* Profile Section */}\r\n        <ProfileSection darkMode={darkMode}>\r\n          <LargeAvatar src={recipient?.photoURL}>\r\n            {recipientEmail?.[0]?.toUpperCase()}\r\n          </LargeAvatar>\r\n\r\n          {/* Display Name Section */}\r\n          <NameSection>\r\n            {isEditingName ? (\r\n              <>\r\n                <NameEditContainer>\r\n                  <TextField\r\n                    fullWidth\r\n                    value={displayName}\r\n                    onChange={(e) => setDisplayName(e.target.value)}\r\n                    variant=\"outlined\"\r\n                    size=\"medium\"\r\n                    autoFocus\r\n                    placeholder=\"Enter display name\"\r\n                    InputProps={{\r\n                      style: {\r\n                        color: darkMode ? \"#e0e0e0\" : \"#000\",\r\n                        backgroundColor: darkMode ? \"#2a2a2a\" : \"#fff\",\r\n                      },\r\n                    }}\r\n                  />\r\n                </NameEditContainer>\r\n                <EditButtonsContainer>\r\n                  <Button\r\n                    onClick={handleCancelEdit}\r\n                    startIcon={<CancelIcon />}\r\n                    variant=\"outlined\"\r\n                    color=\"secondary\"\r\n                  >\r\n                    Cancel\r\n                  </Button>\r\n                  <Button\r\n                    onClick={handleSaveDisplayName}\r\n                    startIcon={<CheckIcon />}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    disabled={!displayName.trim()}\r\n                  >\r\n                    Save\r\n                  </Button>\r\n                </EditButtonsContainer>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <DisplayNameText darkMode={darkMode}>\r\n                  {displayName || recipientEmail}\r\n                </DisplayNameText>\r\n                <EmailText darkMode={darkMode}>{recipientEmail}</EmailText>\r\n                \r\n                {!isSelfChat && (\r\n                  <ChangeNameButton\r\n                    onClick={() => setIsEditingName(true)}\r\n                    startIcon={<EditIcon />}\r\n                    variant=\"outlined\"\r\n                    darkMode={darkMode}\r\n                  >\r\n                    Change Display Name\r\n                  </ChangeNameButton>\r\n                )}\r\n              </>\r\n            )}\r\n          </NameSection>\r\n        </ProfileSection>\r\n\r\n        {/* Tabs */}\r\n        <StyledTabs\r\n          value={tabValue}\r\n          onChange={handleTabChange}\r\n          darkMode={darkMode}\r\n          variant=\"fullWidth\"\r\n        >\r\n          <StyledTab\r\n            icon={<LinkIcon />}\r\n            label={`Links (${links.length})`}\r\n            darkMode={darkMode}\r\n          />\r\n          <StyledTab\r\n            icon={<ImageIcon />}\r\n            label={`Media (${media.length})`}\r\n            darkMode={darkMode}\r\n          />\r\n          <StyledTab\r\n            icon={<DescriptionIcon />}\r\n            label={`Docs (${documents.length})`}\r\n            darkMode={darkMode}\r\n          />\r\n        </StyledTabs>\r\n\r\n        {/* Links Tab */}\r\n        <TabPanel value={tabValue} index={0}>\r\n          <TabContent darkMode={darkMode}>\r\n            {links.length === 0 ? (\r\n              <EmptyState darkMode={darkMode}>\r\n                <LinkIcon style={{ fontSize: 48, opacity: 0.3 }} />\r\n                <p>No links shared yet</p>\r\n              </EmptyState>\r\n            ) : (\r\n              links.map((link, index) => (\r\n                <LinkItem key={`${link.id}-${index}`} darkMode={darkMode}>\r\n                  <LinkIcon style={{ color: darkMode ? \"#64b5f6\" : \"#1976d2\", fontSize: 20 }} />\r\n                  <LinkContent>\r\n                    <LinkUrl\r\n                      href={link.url}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      darkMode={darkMode}\r\n                    >\r\n                      {link.url}\r\n                      <OpenInNewIcon style={{ fontSize: 14, marginLeft: 4 }} />\r\n                    </LinkUrl>\r\n                    <LinkMeta darkMode={darkMode}>\r\n                      {link.user} ‚Ä¢ {moment(link.timestamp).format(\"MMM D, YYYY\")}\r\n                    </LinkMeta>\r\n                  </LinkContent>\r\n                </LinkItem>\r\n              ))\r\n            )}\r\n          </TabContent>\r\n        </TabPanel>\r\n\r\n        {/* Media Tab */}\r\n        <TabPanel value={tabValue} index={1}>\r\n          <TabContent darkMode={darkMode}>\r\n            {media.length === 0 ? (\r\n              <EmptyState darkMode={darkMode}>\r\n                <ImageIcon style={{ fontSize: 48, opacity: 0.3 }} />\r\n                <p>No media shared yet</p>\r\n              </EmptyState>\r\n            ) : (\r\n              <MediaGrid>\r\n                {media.map((item) => (\r\n                  <MediaItem key={item.id} darkMode={darkMode}>\r\n                    {item.fileType.startsWith(\"image/\") ? (\r\n                      <MediaImage\r\n                        src={item.url}\r\n                        alt={item.fileName}\r\n                        onClick={() => window.open(item.url, \"_blank\")}\r\n                      />\r\n                    ) : item.fileType.startsWith(\"video/\") ? (\r\n                      <MediaVideo controls>\r\n                        <source src={item.url} type={item.fileType} />\r\n                      </MediaVideo>\r\n                    ) : (\r\n                      <AudioContainer darkMode={darkMode}>\r\n                        <audio controls style={{ width: \"100%\" }}>\r\n                          <source src={item.url} type={item.fileType} />\r\n                        </audio>\r\n                      </AudioContainer>\r\n                    )}\r\n                    <MediaInfo darkMode={darkMode}>\r\n                      <MediaName>{item.fileName}</MediaName>\r\n                      <MediaMeta darkMode={darkMode}>\r\n                        {formatFileSize(item.fileSize)} ‚Ä¢{\" \"}\r\n                        {moment(item.timestamp).format(\"MMM D\")}\r\n                      </MediaMeta>\r\n                    </MediaInfo>\r\n                    <DownloadIconButton\r\n                      onClick={() => downloadFile(item.url, item.fileName)}\r\n                      size=\"small\"\r\n                    >\r\n                      <DownloadIcon fontSize=\"small\" />\r\n                    </DownloadIconButton>\r\n                  </MediaItem>\r\n                ))}\r\n              </MediaGrid>\r\n            )}\r\n          </TabContent>\r\n        </TabPanel>\r\n\r\n        {/* Documents Tab */}\r\n        <TabPanel value={tabValue} index={2}>\r\n          <TabContent darkMode={darkMode}>\r\n            {documents.length === 0 ? (\r\n              <EmptyState darkMode={darkMode}>\r\n                <DescriptionIcon style={{ fontSize: 48, opacity: 0.3 }} />\r\n                <p>No documents shared yet</p>\r\n              </EmptyState>\r\n            ) : (\r\n              documents.map((doc) => (\r\n                <DocumentItem key={doc.id} darkMode={darkMode}>\r\n                  <DescriptionIcon\r\n                    style={{ color: darkMode ? \"#64b5f6\" : \"#1976d2\", fontSize: 32 }}\r\n                  />\r\n                  <DocumentContent>\r\n                    <DocumentName darkMode={darkMode}>{doc.fileName}</DocumentName>\r\n                    <DocumentMeta darkMode={darkMode}>\r\n                      {formatFileSize(doc.fileSize)} ‚Ä¢ {doc.user} ‚Ä¢{\" \"}\r\n                      {moment(doc.timestamp).format(\"MMM D, YYYY\")}\r\n                    </DocumentMeta>\r\n                  </DocumentContent>\r\n                  <DownloadIconButton\r\n                    onClick={() => downloadFile(doc.url, doc.fileName)}\r\n                    size=\"small\"\r\n                  >\r\n                    <DownloadIcon fontSize=\"small\" />\r\n                  </DownloadIconButton>\r\n                </DocumentItem>\r\n              ))\r\n            )}\r\n          </TabContent>\r\n        </TabPanel>\r\n      </DialogContent>\r\n    </StyledDialog>\r\n  );\r\n}\r\n\r\nexport default ChatInfoDialog;\r\n\r\n// Styled Components\r\nconst StyledDialog = styled(Dialog)`\r\n  .MuiDialog-paper {\r\n    background-color: ${(props) => (props.darkMode ? \"#1e1e1e\" : \"#fff\")};\r\n    color: ${(props) => (props.darkMode ? \"#e0e0e0\" : \"#000\")};\r\n    min-height: 600px;\r\n  }\r\n`;\r\n\r\nconst HeaderContainer = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst ProfileSection = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 20px 0;\r\n  border-bottom: 1px solid ${(props) => (props.darkMode ? \"#333\" : \"#e0e0e0\")};\r\n`;\r\n\r\nconst LargeAvatar = styled(Avatar)`\r\n  && {\r\n    width: 100px;\r\n    height: 100px;\r\n    font-size: 48px;\r\n    margin-bottom: 16px;\r\n  }\r\n`;\r\n\r\nconst NameSection = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 12px;\r\n`;\r\n\r\nconst NameEditContainer = styled.div`\r\n  width: 100%;\r\n  max-width: 400px;\r\n`;\r\n\r\nconst EditButtonsContainer = styled.div`\r\n  display: flex;\r\n  gap: 12px;\r\n  margin-top: 8px;\r\n`;\r\n\r\nconst DisplayNameText = styled.h2`\r\n  margin: 0;\r\n  font-size: 24px;\r\n  font-weight: 500;\r\n  color: ${(props) => (props.darkMode ? \"#e0e0e0\" : \"#000\")};\r\n  text-align: center;\r\n`;\r\n\r\nconst EmailText = styled.p`\r\n  margin: 0;\r\n  color: ${(props) => (props.darkMode ? \"#888\" : \"#666\")};\r\n  font-size: 14px;\r\n`;\r\n\r\nconst ChangeNameButton = styled(Button)`\r\n  && {\r\n    margin-top: 12px;\r\n    color: ${(props) => (props.darkMode ? \"#25D366\" : \"#128C7E\")};\r\n    border-color: ${(props) => (props.darkMode ? \"#25D366\" : \"#128C7E\")};\r\n    text-transform: none;\r\n    \r\n    &:hover {\r\n      border-color: ${(props) => (props.darkMode ? \"#1fa855\" : \"#0d6b5f\")};\r\n      background-color: ${(props) => (props.darkMode ? \"rgba(37, 211, 102, 0.1)\" : \"rgba(18, 140, 126, 0.1)\")};\r\n    }\r\n  }\r\n`;\r\n\r\nconst StyledTabs = styled(Tabs)`\r\n  && {\r\n    margin-top: 16px;\r\n    border-bottom: 1px solid ${(props) => (props.darkMode ? \"#333\" : \"#e0e0e0\")};\r\n\r\n    .MuiTabs-indicator {\r\n      background-color: ${(props) => (props.darkMode ? \"#25D366\" : \"#128C7E\")};\r\n    }\r\n  }\r\n`;\r\n\r\nconst StyledTab = styled(Tab)`\r\n  && {\r\n    color: ${(props) => (props.darkMode ? \"#888\" : \"#666\")};\r\n    text-transform: none;\r\n    font-size: 13px;\r\n\r\n    &.Mui-selected {\r\n      color: ${(props) => (props.darkMode ? \"#25D366\" : \"#128C7E\")};\r\n    }\r\n  }\r\n`;\r\n\r\nconst TabContent = styled.div`\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 8px;\r\n  }\r\n\r\n  &::-webkit-scrollbar-track {\r\n    background: ${(props) => (props.darkMode ? \"#2a2a2a\" : \"#f1f1f1\")};\r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb {\r\n    background: ${(props) => (props.darkMode ? \"#555\" : \"#888\")};\r\n    border-radius: 4px;\r\n  }\r\n`;\r\n\r\nconst EmptyState = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 60px 20px;\r\n  color: ${(props) => (props.darkMode ? \"#666\" : \"#999\")};\r\n\r\n  p {\r\n    margin-top: 16px;\r\n    font-size: 16px;\r\n  }\r\n`;\r\n\r\nconst LinkItem = styled.div`\r\n  display: flex;\r\n  gap: 12px;\r\n  padding: 12px;\r\n  border-radius: 8px;\r\n  margin-bottom: 8px;\r\n  background-color: ${(props) => (props.darkMode ? \"#2a2a2a\" : \"#f5f5f5\")};\r\n  transition: background-color 0.2s;\r\n\r\n  &:hover {\r\n    background-color: ${(props) => (props.darkMode ? \"#333\" : \"#e8e8e8\")};\r\n  }\r\n`;\r\n\r\nconst LinkContent = styled.div`\r\n  flex: 1;\r\n  min-width: 0;\r\n`;\r\n\r\nconst LinkUrl = styled.a`\r\n  display: flex;\r\n  align-items: center;\r\n  color: ${(props) => (props.darkMode ? \"#64b5f6\" : \"#1976d2\")};\r\n  text-decoration: none;\r\n  font-size: 14px;\r\n  word-break: break-all;\r\n  margin-bottom: 4px;\r\n\r\n  &:hover {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nconst LinkMeta = styled.div`\r\n  font-size: 12px;\r\n  color: ${(props) => (props.darkMode ? \"#888\" : \"#666\")};\r\n`;\r\n\r\nconst MediaGrid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\r\n  gap: 12px;\r\n`;\r\n\r\nconst MediaItem = styled.div`\r\n  position: relative;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  background-color: ${(props) => (props.darkMode ? \"#2a2a2a\" : \"#f5f5f5\")};\r\n\r\n  &:hover {\r\n    .download-btn {\r\n      opacity: 1;\r\n    }\r\n  }\r\n`;\r\n\r\nconst MediaImage = styled.img`\r\n  width: 100%;\r\n  height: 150px;\r\n  object-fit: cover;\r\n  cursor: pointer;\r\n  transition: transform 0.2s;\r\n\r\n  &:hover {\r\n    transform: scale(1.05);\r\n  }\r\n`;\r\n\r\nconst MediaVideo = styled.video`\r\n  width: 100%;\r\n  height: 150px;\r\n  object-fit: cover;\r\n`;\r\n\r\nconst AudioContainer = styled.div`\r\n  padding: 12px;\r\n  background-color: ${(props) => (props.darkMode ? \"#2a2a2a\" : \"#f0f0f0\")};\r\n`;\r\n\r\nconst MediaInfo = styled.div`\r\n  padding: 8px;\r\n`;\r\n\r\nconst MediaName = styled.div`\r\n  font-size: 12px;\r\n  font-weight: 500;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nconst MediaMeta = styled.div`\r\n  font-size: 11px;\r\n  color: ${(props) => (props.darkMode ? \"#888\" : \"#666\")};\r\n  margin-top: 4px;\r\n`;\r\n\r\nconst DocumentItem = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  padding: 12px;\r\n  border-radius: 8px;\r\n  margin-bottom: 8px;\r\n  background-color: ${(props) => (props.darkMode ? \"#2a2a2a\" : \"#f5f5f5\")};\r\n  transition: background-color 0.2s;\r\n\r\n  &:hover {\r\n    background-color: ${(props) => (props.darkMode ? \"#333\" : \"#e8e8e8\")};\r\n  }\r\n`;\r\n\r\nconst DocumentContent = styled.div`\r\n  flex: 1;\r\n  min-width: 0;\r\n`;\r\n\r\nconst DocumentName = styled.div`\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: ${(props) => (props.darkMode ? \"#e0e0e0\" : \"#000\")};\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  margin-bottom: 4px;\r\n`;\r\n\r\nconst DocumentMeta = styled.div`\r\n  font-size: 12px;\r\n  color: ${(props) => (props.darkMode ? \"#888\" : \"#666\")};\r\n`;\r\n\r\nconst DownloadIconButton = styled(IconButton)`\r\n  && {\r\n    opacity: 0.7;\r\n    transition: opacity 0.2s;\r\n\r\n    &:hover {\r\n      opacity: 1;\r\n    }\r\n  }\r\n`;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6950, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/components/ReplyPreview.jsx"],"sourcesContent":["// components/ChatScreen/components/ReplyPreview.jsx\r\nimport React from \"react\";\r\nimport { IconButton } from \"@mui/material\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport {\r\n  ReplyPreviewBar,\r\n  ReplyBarIndicator,\r\n  ReplyPreviewContent,\r\n  ReplyPreviewHeader,\r\n  ReplyPreviewText,\r\n} from \"../ChatScreen.styles\";\r\n\r\nconst ReplyPreview = ({ replyingTo, userEmail, onCancel, darkMode }) => {\r\n  if (!replyingTo) return null;\r\n\r\n  return (\r\n    <ReplyPreviewBar darkMode={darkMode}>\r\n      <ReplyBarIndicator />\r\n      <ReplyPreviewContent>\r\n        <ReplyPreviewHeader>\r\n          <span>\r\n            Replying to {replyingTo.user === userEmail ? 'yourself' : replyingTo.user}\r\n          </span>\r\n          <IconButton onClick={onCancel} size=\"small\">\r\n            <CloseIcon fontSize=\"small\" style={{ color: darkMode ? '#e0e0e0' : 'inherit' }} />\r\n          </IconButton>\r\n        </ReplyPreviewHeader>\r\n        <ReplyPreviewText darkMode={darkMode}>\r\n          {replyingTo.message || replyingTo.fileName || 'üé§ Voice message'}\r\n        </ReplyPreviewText>\r\n      </ReplyPreviewContent>\r\n    </ReplyPreviewBar>\r\n  );\r\n};\r\n\r\nexport default ReplyPreview;"],"names":[],"mappings":"AAAA,oDAAoD;;;;;;AACpD;AACA;AACA;AACA;;;;;;AAQA,MAAM,eAAe,CAAC,EAAE,UAAU,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE;IACjE,IAAI,CAAC,YAAY,OAAO;IAExB,qBACE,0JAAC,+JAAe;QAAC,UAAU;;0BACzB,0JAAC,iKAAiB;;;;;0BAClB,0JAAC,mKAAmB;;kCAClB,0JAAC,kKAAkB;;0CACjB,0JAAC;;oCAAK;oCACS,WAAW,IAAI,KAAK,YAAY,aAAa,WAAW,IAAI;;;;;;;0CAE3E,0JAAC,gNAAU;gCAAC,SAAS;gCAAU,MAAK;0CAClC,cAAA,0JAAC,0JAAS;oCAAC,UAAS;oCAAQ,OAAO;wCAAE,OAAO,WAAW,YAAY;oCAAU;;;;;;;;;;;;;;;;;kCAGjF,0JAAC,gKAAgB;wBAAC,UAAU;kCACzB,WAAW,OAAO,IAAI,WAAW,QAAQ,IAAI;;;;;;;;;;;;;;;;;;AAKxD;KArBM;uCAuBS","debugId":null}},
    {"offset": {"line": 7045, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/waels/OneDrive/Desktop/Expo%20projects/P3/components/ChatScreen/index.jsx"],"sourcesContent":["// components/ChatScreen/index.jsx\r\nimport React, { useRef, useState, useEffect, useContext } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { auth, db } from \"../../firebase\";\r\nimport { \r\n  addDoc, \r\n  collection, \r\n  doc, \r\n  setDoc, \r\n  deleteDoc, \r\n  serverTimestamp, \r\n  enableNetwork, \r\n  disableNetwork,\r\n} from \"firebase/firestore\";\r\nimport { DarkModeContext } from \"../DarkModeProvider\";\r\n\r\n// Hooks\r\nimport { useEmojiPicker } from \"./hooks/useEmojiPicker\";\r\nimport { useFileUpload } from \"./hooks/useFileUpload\";\r\nimport { useVoiceRecording } from \"./hooks/useVoiceRecording\";\r\nimport { useCamera } from \"./hooks/useCamera\";\r\nimport { useLocation } from \"./hooks/useLocation\";\r\nimport { useRecipientData } from \"./hooks/useRecipientData\";\r\nimport { useMessages } from \"./hooks/useMessages\";\r\nimport { useMessageStatus } from \"./hooks/useMessageStatus\";\r\nimport { useDisplayName } from \"./hooks/useDisplayName\";\r\n\r\n// Components\r\nimport ChatHeader from \"./components/ChatHeader\";\r\nimport MessageList from \"./components/MessageList\";\r\nimport ChatInput from \"./components/ChatInput\";\r\nimport EmojiPicker from \"./components/EmojiPicker\";\r\nimport AttachMenu from \"./components/AttachMenu\";\r\nimport FileUploadDialog from \"./components/FileUploadDialog\";\r\nimport CameraDialog from \"./components/CameraDialog\";\r\nimport LocationPreviewDialog from \"./components/LocationPreviewDialog\";\r\nimport VoiceRecordingDialog from \"./components/VoiceRecordingDialog\";\r\nimport ChatInfoDialog from \"./components/ChatInfoDialog\";\r\nimport ReplyPreview from \"./components/ReplyPreview\";\r\n\r\n// Styled Components\r\nimport { Container, OfflineMessage, ErrorMessage } from \"./ChatScreen.styles\";\r\n\r\n// Utils\r\nimport { checkIfBlocked, buildReplyData } from \"./utils\";\r\nimport { MESSAGE_STATUS } from \"./constants\";\r\n\r\nfunction ChatScreen({ \r\n  chat, \r\n  messages, \r\n  isMobile = false, \r\n  onToggleSidebar = () => {} \r\n}) {\r\n  const [user] = useAuthState(auth);\r\n  const router = useRouter();\r\n  const endOfMessagesRef = useRef(null);\r\n  const inputRef = useRef(null);\r\n  \r\n  const [input, setInput] = useState(\"\");\r\n  const [isOnline, setIsOnline] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [sendingError, setSendingError] = useState(null);\r\n  const [showProfile, setShowProfile] = useState(false);\r\n  const [replyingTo, setReplyingTo] = useState(null);\r\n  const [attachMenuAnchor, setAttachMenuAnchor] = useState(null);\r\n\r\n  // Get dark mode context\r\n  const darkModeContext = useContext(DarkModeContext);\r\n  const { darkMode } = darkModeContext || { darkMode: false };\r\n  \r\n  const chatId = router?.query?.id || null;\r\n\r\n  // Custom Hooks\r\n  const { recipientEmail, recipient, recipientSnapshot, isSelfChat, isLoading } = useRecipientData(user, chat);\r\n  const { messagesSnapshot } = useMessages(chatId);\r\n  \r\n  // Fetch custom display name\r\n  const { displayName: customDisplayName, loading: displayNameLoading } = useDisplayName(\r\n    user?.uid,\r\n    recipientEmail\r\n  );\r\n  \r\n  useMessageStatus(\r\n    chatId, \r\n    isLoading ? null : recipientEmail,\r\n    user?.email,\r\n    isSelfChat\r\n  );\r\n  \r\n  const emojiPicker = useEmojiPicker();\r\n  const fileUpload = useFileUpload(chatId, user, recipientEmail);\r\n  const voiceRecording = useVoiceRecording(chatId, user, recipientEmail);\r\n  const camera = useCamera(chatId, user, recipientEmail);\r\n  const location = useLocation(chatId, user, recipientEmail);\r\n\r\n  // Debug logging\r\n  useEffect(() => {\r\n    if (user) {\r\n      console.log(\"üîç Current authenticated user:\", {\r\n        uid: user.uid,\r\n        email: user.email,\r\n      });\r\n    }\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"üìõ Custom display name:\", customDisplayName);\r\n  }, [customDisplayName]);\r\n\r\n  // Monitor online status\r\n  useEffect(() => {\r\n    const handleOnline = () => {\r\n      setIsOnline(true);\r\n      enableNetwork(db);\r\n    };\r\n\r\n    const handleOffline = () => {\r\n      setIsOnline(false);\r\n      disableNetwork(db);\r\n    };\r\n\r\n    window.addEventListener(\"online\", handleOnline);\r\n    window.addEventListener(\"offline\", handleOffline);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"online\", handleOnline);\r\n      window.removeEventListener(\"offline\", handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  // Scroll to bottom\r\n  const scrollToBottom = () => {\r\n    if (endOfMessagesRef?.current) {\r\n      endOfMessagesRef.current.scrollIntoView({\r\n        behavior: \"smooth\",\r\n        block: \"start\",\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messagesSnapshot]);\r\n\r\n  // Handle attach menu\r\n  const handlePlusClick = (event) => {\r\n    setAttachMenuAnchor(event.currentTarget);\r\n  };\r\n\r\n  const handleAttachMenuClose = () => {\r\n    setAttachMenuAnchor(null);\r\n  };\r\n\r\n  // Handle display name update\r\n  const handleUpdateDisplayName = async (newDisplayName) => {\r\n    if (!recipientEmail || isSelfChat || !user) {\r\n      console.error(\"‚ùå Cannot update display name:\", { recipientEmail, isSelfChat, hasUser: !!user });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      console.log(`üìù Updating display name for ${recipientEmail} to \"${newDisplayName}\"`);\r\n      console.log(`üë§ Current user:`, { uid: user.uid, email: user.email });\r\n      \r\n      const contactRef = doc(db, \"users\", user.uid, \"contacts\", recipientEmail);\r\n      \r\n      console.log(`üìç Document path: users/${user.uid}/contacts/${recipientEmail}`);\r\n      \r\n      await setDoc(contactRef, {\r\n        email: recipientEmail,\r\n        displayName: newDisplayName,\r\n        updatedAt: serverTimestamp(),\r\n      }, { merge: true });\r\n\r\n      console.log(\"‚úÖ Display name updated successfully\");\r\n      \r\n      // Show success message\r\n      setSendingError(null);\r\n    } catch (error) {\r\n      console.error(\"‚ùå Error updating display name:\", error);\r\n      console.error(\"Error code:\", error.code);\r\n      console.error(\"Error message:\", error.message);\r\n      setSendingError(`Failed to update display name: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  // Handle emoji selection\r\n  const handleEmojiClick = (emoji) => {\r\n    const cursorPosition = inputRef.current?.selectionStart || input.length;\r\n    const textBeforeCursor = input.slice(0, cursorPosition);\r\n    const textAfterCursor = input.slice(cursorPosition);\r\n    \r\n    setInput(textBeforeCursor + emoji + textAfterCursor);\r\n    emojiPicker.saveRecentEmoji(emoji);\r\n    \r\n    setTimeout(() => {\r\n      if (inputRef.current) {\r\n        inputRef.current.focus();\r\n        const newPosition = cursorPosition + emoji.length;\r\n        inputRef.current.setSelectionRange(newPosition, newPosition);\r\n      }\r\n    }, 0);\r\n  };\r\n\r\n  // Delete message\r\n  const deleteMessage = async (messageId) => {\r\n    if (!chatId || !messageId) return;\r\n    \r\n    try {\r\n      console.log(`üóëÔ∏è [Chat: ${chatId}] Deleting message ${messageId}`);\r\n      await deleteDoc(doc(db, \"chats\", chatId, \"messages\", messageId));\r\n      console.log(`‚úÖ [Chat: ${chatId}] Message deleted successfully`);\r\n    } catch (error) {\r\n      console.error(`‚ùå [Chat: ${chatId}] Error deleting message:`, error);\r\n      setSendingError(\"Failed to delete message. Please try again.\");\r\n    }\r\n  };\r\n\r\n  // Set reply\r\n  const handleReply = (messageData) => {\r\n    setReplyingTo(messageData);\r\n    inputRef.current?.focus();\r\n  };\r\n\r\n  // Cancel reply\r\n  const cancelReply = () => {\r\n    setReplyingTo(null);\r\n  };\r\n\r\n  // Send text message\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault();\r\n    setSendingError(null);\r\n\r\n    if (!input?.trim() || !chatId || !user || !recipientEmail) {\r\n      console.warn(\"‚ö†Ô∏è Cannot send message - missing required data\");\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      console.log(`üì§ [Chat: ${chatId}] Preparing to send message to ${recipientEmail}`);\r\n      \r\n      if (!isSelfChat) {\r\n        const isBlocked = await checkIfBlocked(user.email, recipientEmail);\r\n        if (isBlocked) {\r\n          setSendingError(\"You cannot send messages to this user. You have been blocked.\");\r\n          return;\r\n        }\r\n      }\r\n\r\n      const userRef = doc(db, \"users\", user.uid);\r\n      await setDoc(\r\n        userRef,\r\n        {\r\n          lastSeen: serverTimestamp(),\r\n          email: user.email,\r\n        },\r\n        { merge: true }\r\n      );\r\n\r\n      const messageData = {\r\n        timestamp: serverTimestamp(),\r\n        message: input,\r\n        user: user.email,\r\n        photoURL: user.photoURL,\r\n        status: MESSAGE_STATUS.SENT,\r\n      };\r\n\r\n      const replyData = buildReplyData(replyingTo);\r\n      if (replyData) {\r\n        messageData.replyTo = replyData;\r\n      }\r\n\r\n      await addDoc(collection(db, \"chats\", chatId, \"messages\"), messageData);\r\n\r\n      setInput(\"\");\r\n      setReplyingTo(null);\r\n      scrollToBottom();\r\n    } catch (error) {\r\n      console.error(`‚ùå [Chat: ${chatId}] Error sending message:`, error);\r\n      setSendingError(\"Failed to send message. Please try again.\");\r\n    }\r\n  };\r\n\r\n  if (!isOnline) {\r\n    return (\r\n      <Container darkMode={darkMode}>\r\n        <OfflineMessage darkMode={darkMode}>\r\n          You are currently offline. Please check your internet connection.\r\n        </OfflineMessage>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Container darkMode={darkMode}>\r\n        <ErrorMessage darkMode={darkMode}>{error}</ErrorMessage>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container darkMode={darkMode}>\r\n      <ChatHeader\r\n        recipient={recipient}\r\n        recipientEmail={recipientEmail}\r\n        recipientSnapshot={recipientSnapshot}\r\n        isSelfChat={isSelfChat}\r\n        customDisplayName={customDisplayName}\r\n        onMoreClick={() => setShowProfile(true)}\r\n        darkMode={darkMode}\r\n        isMobile={isMobile}\r\n        onToggleSidebar={onToggleSidebar}\r\n      />\r\n\r\n      <input\r\n        ref={fileUpload.fileInputRef}\r\n        type=\"file\"\r\n        hidden\r\n        onChange={fileUpload.handleFileSelect}\r\n        accept=\"*/*\"\r\n      />\r\n\r\n      <MessageList\r\n        ref={endOfMessagesRef}\r\n        messagesSnapshot={messagesSnapshot}\r\n        messages={messages}\r\n        sendingError={sendingError}\r\n        onDelete={deleteMessage}\r\n        onReply={handleReply}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <AttachMenu\r\n        anchorEl={attachMenuAnchor}\r\n        open={Boolean(attachMenuAnchor)}\r\n        onClose={handleAttachMenuClose}\r\n        onAttachFile={fileUpload.handleAttachClick}\r\n        onTakePhoto={camera.startCamera}\r\n        onShareLocation={location.getLocation}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <EmojiPicker\r\n        open={emojiPicker.openEmojiPicker}\r\n        anchorEl={emojiPicker.emojiAnchorEl}\r\n        onClose={emojiPicker.handleEmojiPickerClose}\r\n        selectedCategory={emojiPicker.selectedEmojiCategory}\r\n        onCategoryChange={emojiPicker.setSelectedEmojiCategory}\r\n        searchTerm={emojiPicker.emojiSearchTerm}\r\n        onSearchChange={emojiPicker.setEmojiSearchTerm}\r\n        emojis={emojiPicker.getFilteredEmojis()}\r\n        onEmojiSelect={handleEmojiClick}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <FileUploadDialog\r\n        open={fileUpload.showFileConfirmation}\r\n        onClose={fileUpload.cancelFileSelection}\r\n        file={fileUpload.selectedFile}\r\n        filePreview={fileUpload.filePreview}\r\n        input={input}\r\n        onInputChange={setInput}\r\n        uploadProgress={fileUpload.uploadProgress}\r\n        isUploading={fileUpload.isUploading}\r\n        onSend={() => fileUpload.sendFileMessage(\r\n          input,\r\n          replyingTo,\r\n          setSendingError,\r\n          setInput,\r\n          setReplyingTo,\r\n          scrollToBottom,\r\n          isSelfChat,\r\n        )}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <CameraDialog\r\n        open={camera.showCamera || camera.capturedImage !== null}\r\n        showCamera={camera.showCamera}\r\n        capturedImage={camera.capturedImage}\r\n        videoRef={camera.videoRef}\r\n        input={input}\r\n        onInputChange={setInput}\r\n        uploadProgress={camera.uploadProgress}\r\n        isUploading={camera.isUploading}\r\n        onCapture={camera.capturePhoto}\r\n        onRetake={camera.retakePhoto}\r\n        onCancel={camera.cancelPhoto}\r\n        onSend={() => camera.sendPhoto(\r\n          input,\r\n          replyingTo,\r\n          setSendingError,\r\n          setInput,\r\n          setReplyingTo,\r\n          scrollToBottom,\r\n          isSelfChat,\r\n        )}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <LocationPreviewDialog\r\n        open={location.showLocationPreview}\r\n        locationData={location.locationData}\r\n        input={input}\r\n        onInputChange={setInput}\r\n        onCancel={location.cancelLocation}\r\n        onSend={() => location.sendLocation(\r\n          input,\r\n          replyingTo,\r\n          setSendingError,\r\n          setInput,\r\n          setReplyingTo,\r\n          scrollToBottom,\r\n          isSelfChat,\r\n        )}\r\n        isGettingLocation={location.isGettingLocation}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <VoiceRecordingDialog\r\n        open={voiceRecording.audioBlob !== null}\r\n        audioBlob={voiceRecording.audioBlob}\r\n        recordingTime={voiceRecording.recordingTime}\r\n        uploadProgress={voiceRecording.uploadProgress}\r\n        isUploading={voiceRecording.isUploading}\r\n        onCancel={voiceRecording.cancelRecording}\r\n        onSend={() => voiceRecording.sendVoiceMessage(\r\n          replyingTo,\r\n          setSendingError,\r\n          setReplyingTo,\r\n          scrollToBottom,\r\n          isSelfChat,\r\n        )}\r\n        onError={setSendingError}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <ChatInfoDialog\r\n        open={showProfile}\r\n        onClose={() => setShowProfile(false)}\r\n        recipient={{ ...recipient, displayName: customDisplayName }}\r\n        recipientEmail={recipientEmail}\r\n        isSelfChat={isSelfChat}\r\n        messages={messagesSnapshot?.docs.map(doc => ({ \r\n          id: doc.id, \r\n          ...doc.data(),\r\n          timestamp: doc.data().timestamp?.toDate?.() || doc.data().timestamp\r\n        })) || []}\r\n        onUpdateDisplayName={handleUpdateDisplayName}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <ReplyPreview\r\n        replyingTo={replyingTo}\r\n        userEmail={user?.email}\r\n        onCancel={cancelReply}\r\n        darkMode={darkMode}\r\n      />\r\n\r\n      <ChatInput\r\n        input={input}\r\n        setInput={setInput}\r\n        inputRef={inputRef}\r\n        isRecording={voiceRecording.isRecording}\r\n        recordingTime={voiceRecording.recordingTime}\r\n        onSubmit={sendMessage}\r\n        onEmojiClick={emojiPicker.handleEmojiPickerOpen}\r\n        onPlusClick={handlePlusClick}\r\n        onStartRecording={() => voiceRecording.startRecording(setSendingError)}\r\n        onStopRecording={voiceRecording.stopRecording}\r\n        darkMode={darkMode}\r\n      />\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default ChatScreen;"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;AAClC;AACA;AACA;AACA;AACA;AAAA;AAUA;AAEA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,oBAAoB;AACpB;AAEA,QAAQ;AACR;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,SAAS,WAAW,EAClB,IAAI,EACJ,QAAQ,EACR,WAAW,KAAK,EAChB,kBAAkB,KAAO,CAAC,EAC3B;;IACC,MAAM,CAAC,KAAK,GAAG,IAAA,sLAAY,EAAC,4HAAI;IAChC,MAAM,SAAS,IAAA,uIAAS;IACxB,MAAM,mBAAmB,IAAA,oIAAM,EAAC;IAChC,MAAM,WAAW,IAAA,oIAAM,EAAC;IAExB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sIAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,sIAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sIAAQ,EAAC;IACnC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,sIAAQ,EAAC;IACjD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,sIAAQ,EAAC;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,sIAAQ,EAAC;IAC7C,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,sIAAQ,EAAC;IAEzD,wBAAwB;IACxB,MAAM,kBAAkB,IAAA,wIAAU,EAAC,6IAAe;IAClD,MAAM,EAAE,QAAQ,EAAE,GAAG,mBAAmB;QAAE,UAAU;IAAM;IAE1D,MAAM,SAAS,QAAQ,OAAO,MAAM;IAEpC,eAAe;IACf,MAAM,EAAE,cAAc,EAAE,SAAS,EAAE,iBAAiB,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,IAAA,qKAAgB,EAAC,MAAM;IACvG,MAAM,EAAE,gBAAgB,EAAE,GAAG,IAAA,2JAAW,EAAC;IAEzC,4BAA4B;IAC5B,MAAM,EAAE,aAAa,iBAAiB,EAAE,SAAS,kBAAkB,EAAE,GAAG,IAAA,iKAAc,EACpF,MAAM,KACN;IAGF,IAAA,qKAAgB,EACd,QACA,YAAY,OAAO,gBACnB,MAAM,OACN;IAGF,MAAM,cAAc,IAAA,iKAAc;IAClC,MAAM,aAAa,IAAA,+JAAa,EAAC,QAAQ,MAAM;IAC/C,MAAM,iBAAiB,IAAA,uKAAiB,EAAC,QAAQ,MAAM;IACvD,MAAM,SAAS,IAAA,uJAAS,EAAC,QAAQ,MAAM;IACvC,MAAM,WAAW,IAAA,2JAAW,EAAC,QAAQ,MAAM;IAE3C,gBAAgB;IAChB,IAAA,uIAAS;gCAAC;YACR,IAAI,MAAM;gBACR,QAAQ,GAAG,CAAC,kCAAkC;oBAC5C,KAAK,KAAK,GAAG;oBACb,OAAO,KAAK,KAAK;gBACnB;YACF;QACF;+BAAG;QAAC;KAAK;IAET,IAAA,uIAAS;gCAAC;YACR,QAAQ,GAAG,CAAC,2BAA2B;QACzC;+BAAG;QAAC;KAAkB;IAEtB,wBAAwB;IACxB,IAAA,uIAAS;gCAAC;YACR,MAAM;qDAAe;oBACnB,YAAY;oBACZ,IAAA,gLAAa,EAAC,0HAAE;gBAClB;;YAEA,MAAM;sDAAgB;oBACpB,YAAY;oBACZ,IAAA,iLAAc,EAAC,0HAAE;gBACnB;;YAEA,OAAO,gBAAgB,CAAC,UAAU;YAClC,OAAO,gBAAgB,CAAC,WAAW;YAEnC;wCAAO;oBACL,OAAO,mBAAmB,CAAC,UAAU;oBACrC,OAAO,mBAAmB,CAAC,WAAW;gBACxC;;QACF;+BAAG,EAAE;IAEL,mBAAmB;IACnB,MAAM,iBAAiB;QACrB,IAAI,kBAAkB,SAAS;YAC7B,iBAAiB,OAAO,CAAC,cAAc,CAAC;gBACtC,UAAU;gBACV,OAAO;YACT;QACF;IACF;IAEA,IAAA,uIAAS;gCAAC;YACR;QACF;+BAAG;QAAC;KAAiB;IAErB,qBAAqB;IACrB,MAAM,kBAAkB,CAAC;QACvB,oBAAoB,MAAM,aAAa;IACzC;IAEA,MAAM,wBAAwB;QAC5B,oBAAoB;IACtB;IAEA,6BAA6B;IAC7B,MAAM,0BAA0B,OAAO;QACrC,IAAI,CAAC,kBAAkB,cAAc,CAAC,MAAM;YAC1C,QAAQ,KAAK,CAAC,iCAAiC;gBAAE;gBAAgB;gBAAY,SAAS,CAAC,CAAC;YAAK;YAC7F;QACF;QAEA,IAAI;YACF,QAAQ,GAAG,CAAC,CAAC,6BAA6B,EAAE,eAAe,KAAK,EAAE,eAAe,CAAC,CAAC;YACnF,QAAQ,GAAG,CAAC,CAAC,gBAAgB,CAAC,EAAE;gBAAE,KAAK,KAAK,GAAG;gBAAE,OAAO,KAAK,KAAK;YAAC;YAEnE,MAAM,aAAa,IAAA,sKAAG,EAAC,0HAAE,EAAE,SAAS,KAAK,GAAG,EAAE,YAAY;YAE1D,QAAQ,GAAG,CAAC,CAAC,wBAAwB,EAAE,KAAK,GAAG,CAAC,UAAU,EAAE,gBAAgB;YAE5E,MAAM,IAAA,yKAAM,EAAC,YAAY;gBACvB,OAAO;gBACP,aAAa;gBACb,WAAW,IAAA,kLAAe;YAC5B,GAAG;gBAAE,OAAO;YAAK;YAEjB,QAAQ,GAAG,CAAC;YAEZ,uBAAuB;YACvB,gBAAgB;QAClB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kCAAkC;YAChD,QAAQ,KAAK,CAAC,eAAe,MAAM,IAAI;YACvC,QAAQ,KAAK,CAAC,kBAAkB,MAAM,OAAO;YAC7C,gBAAgB,CAAC,+BAA+B,EAAE,MAAM,OAAO,EAAE;QACnE;IACF;IAEA,yBAAyB;IACzB,MAAM,mBAAmB,CAAC;QACxB,MAAM,iBAAiB,SAAS,OAAO,EAAE,kBAAkB,MAAM,MAAM;QACvE,MAAM,mBAAmB,MAAM,KAAK,CAAC,GAAG;QACxC,MAAM,kBAAkB,MAAM,KAAK,CAAC;QAEpC,SAAS,mBAAmB,QAAQ;QACpC,YAAY,eAAe,CAAC;QAE5B,WAAW;YACT,IAAI,SAAS,OAAO,EAAE;gBACpB,SAAS,OAAO,CAAC,KAAK;gBACtB,MAAM,cAAc,iBAAiB,MAAM,MAAM;gBACjD,SAAS,OAAO,CAAC,iBAAiB,CAAC,aAAa;YAClD;QACF,GAAG;IACL;IAEA,iBAAiB;IACjB,MAAM,gBAAgB,OAAO;QAC3B,IAAI,CAAC,UAAU,CAAC,WAAW;QAE3B,IAAI;YACF,QAAQ,GAAG,CAAC,CAAC,WAAW,EAAE,OAAO,mBAAmB,EAAE,WAAW;YACjE,MAAM,IAAA,4KAAS,EAAC,IAAA,sKAAG,EAAC,0HAAE,EAAE,SAAS,QAAQ,YAAY;YACrD,QAAQ,GAAG,CAAC,CAAC,SAAS,EAAE,OAAO,8BAA8B,CAAC;QAChE,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,CAAC,SAAS,EAAE,OAAO,yBAAyB,CAAC,EAAE;YAC7D,gBAAgB;QAClB;IACF;IAEA,YAAY;IACZ,MAAM,cAAc,CAAC;QACnB,cAAc;QACd,SAAS,OAAO,EAAE;IACpB;IAEA,eAAe;IACf,MAAM,cAAc;QAClB,cAAc;IAChB;IAEA,oBAAoB;IACpB,MAAM,cAAc,OAAO;QACzB,EAAE,cAAc;QAChB,gBAAgB;QAEhB,IAAI,CAAC,OAAO,UAAU,CAAC,UAAU,CAAC,QAAQ,CAAC,gBAAgB;YACzD,QAAQ,IAAI,CAAC;YACb;QACF;QAEA,IAAI;YACF,QAAQ,GAAG,CAAC,CAAC,UAAU,EAAE,OAAO,+BAA+B,EAAE,gBAAgB;YAEjF,IAAI,CAAC,YAAY;gBACf,MAAM,YAAY,MAAM,IAAA,+IAAc,EAAC,KAAK,KAAK,EAAE;gBACnD,IAAI,WAAW;oBACb,gBAAgB;oBAChB;gBACF;YACF;YAEA,MAAM,UAAU,IAAA,sKAAG,EAAC,0HAAE,EAAE,SAAS,KAAK,GAAG;YACzC,MAAM,IAAA,yKAAM,EACV,SACA;gBACE,UAAU,IAAA,kLAAe;gBACzB,OAAO,KAAK,KAAK;YACnB,GACA;gBAAE,OAAO;YAAK;YAGhB,MAAM,cAAc;gBAClB,WAAW,IAAA,kLAAe;gBAC1B,SAAS;gBACT,MAAM,KAAK,KAAK;gBAChB,UAAU,KAAK,QAAQ;gBACvB,QAAQ,mJAAc,CAAC,IAAI;YAC7B;YAEA,MAAM,YAAY,IAAA,+IAAc,EAAC;YACjC,IAAI,WAAW;gBACb,YAAY,OAAO,GAAG;YACxB;YAEA,MAAM,IAAA,yKAAM,EAAC,IAAA,6KAAU,EAAC,0HAAE,EAAE,SAAS,QAAQ,aAAa;YAE1D,SAAS;YACT,cAAc;YACd;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,CAAC,SAAS,EAAE,OAAO,wBAAwB,CAAC,EAAE;YAC5D,gBAAgB;QAClB;IACF;IAEA,IAAI,CAAC,UAAU;QACb,qBACE,0JAAC,yJAAS;YAAC,UAAU;sBACnB,cAAA,0JAAC,8JAAc;gBAAC,UAAU;0BAAU;;;;;;;;;;;IAK1C;IAEA,IAAI,OAAO;QACT,qBACE,0JAAC,yJAAS;YAAC,UAAU;sBACnB,cAAA,0JAAC,4JAAY;gBAAC,UAAU;0BAAW;;;;;;;;;;;IAGzC;IAEA,qBACE,0JAAC,yJAAS;QAAC,UAAU;;0BACnB,0JAAC,4JAAU;gBACT,WAAW;gBACX,gBAAgB;gBAChB,mBAAmB;gBACnB,YAAY;gBACZ,mBAAmB;gBACnB,aAAa,IAAM,eAAe;gBAClC,UAAU;gBACV,UAAU;gBACV,iBAAiB;;;;;;0BAGnB,0JAAC;gBACC,KAAK,WAAW,YAAY;gBAC5B,MAAK;gBACL,MAAM;gBACN,UAAU,WAAW,gBAAgB;gBACrC,QAAO;;;;;;0BAGT,0JAAC,6JAAW;gBACV,KAAK;gBACL,kBAAkB;gBAClB,UAAU;gBACV,cAAc;gBACd,UAAU;gBACV,SAAS;gBACT,UAAU;;;;;;0BAGZ,0JAAC,4JAAU;gBACT,UAAU;gBACV,MAAM,QAAQ;gBACd,SAAS;gBACT,cAAc,WAAW,iBAAiB;gBAC1C,aAAa,OAAO,WAAW;gBAC/B,iBAAiB,SAAS,WAAW;gBACrC,UAAU;;;;;;0BAGZ,0JAAC,6JAAW;gBACV,MAAM,YAAY,eAAe;gBACjC,UAAU,YAAY,aAAa;gBACnC,SAAS,YAAY,sBAAsB;gBAC3C,kBAAkB,YAAY,qBAAqB;gBACnD,kBAAkB,YAAY,wBAAwB;gBACtD,YAAY,YAAY,eAAe;gBACvC,gBAAgB,YAAY,kBAAkB;gBAC9C,QAAQ,YAAY,iBAAiB;gBACrC,eAAe;gBACf,UAAU;;;;;;0BAGZ,0JAAC,kKAAgB;gBACf,MAAM,WAAW,oBAAoB;gBACrC,SAAS,WAAW,mBAAmB;gBACvC,MAAM,WAAW,YAAY;gBAC7B,aAAa,WAAW,WAAW;gBACnC,OAAO;gBACP,eAAe;gBACf,gBAAgB,WAAW,cAAc;gBACzC,aAAa,WAAW,WAAW;gBACnC,QAAQ,IAAM,WAAW,eAAe,CACtC,OACA,YACA,iBACA,UACA,eACA,gBACA;gBAEF,UAAU;;;;;;0BAGZ,0JAAC,8JAAY;gBACX,MAAM,OAAO,UAAU,IAAI,OAAO,aAAa,KAAK;gBACpD,YAAY,OAAO,UAAU;gBAC7B,eAAe,OAAO,aAAa;gBACnC,UAAU,OAAO,QAAQ;gBACzB,OAAO;gBACP,eAAe;gBACf,gBAAgB,OAAO,cAAc;gBACrC,aAAa,OAAO,WAAW;gBAC/B,WAAW,OAAO,YAAY;gBAC9B,UAAU,OAAO,WAAW;gBAC5B,UAAU,OAAO,WAAW;gBAC5B,QAAQ,IAAM,OAAO,SAAS,CAC5B,OACA,YACA,iBACA,UACA,eACA,gBACA;gBAEF,UAAU;;;;;;0BAGZ,0JAAC,uKAAqB;gBACpB,MAAM,SAAS,mBAAmB;gBAClC,cAAc,SAAS,YAAY;gBACnC,OAAO;gBACP,eAAe;gBACf,UAAU,SAAS,cAAc;gBACjC,QAAQ,IAAM,SAAS,YAAY,CACjC,OACA,YACA,iBACA,UACA,eACA,gBACA;gBAEF,mBAAmB,SAAS,iBAAiB;gBAC7C,UAAU;;;;;;0BAGZ,0JAAC,sKAAoB;gBACnB,MAAM,eAAe,SAAS,KAAK;gBACnC,WAAW,eAAe,SAAS;gBACnC,eAAe,eAAe,aAAa;gBAC3C,gBAAgB,eAAe,cAAc;gBAC7C,aAAa,eAAe,WAAW;gBACvC,UAAU,eAAe,eAAe;gBACxC,QAAQ,IAAM,eAAe,gBAAgB,CAC3C,YACA,iBACA,eACA,gBACA;gBAEF,SAAS;gBACT,UAAU;;;;;;0BAGZ,0JAAC,gKAAc;gBACb,MAAM;gBACN,SAAS,IAAM,eAAe;gBAC9B,WAAW;oBAAE,GAAG,SAAS;oBAAE,aAAa;gBAAkB;gBAC1D,gBAAgB;gBAChB,YAAY;gBACZ,UAAU,kBAAkB,KAAK,IAAI,CAAA,MAAO,CAAC;wBAC3C,IAAI,IAAI,EAAE;wBACV,GAAG,IAAI,IAAI,EAAE;wBACb,WAAW,IAAI,IAAI,GAAG,SAAS,EAAE,cAAc,IAAI,IAAI,GAAG,SAAS;oBACrE,CAAC,MAAM,EAAE;gBACT,qBAAqB;gBACrB,UAAU;;;;;;0BAGZ,0JAAC,8JAAY;gBACX,YAAY;gBACZ,WAAW,MAAM;gBACjB,UAAU;gBACV,UAAU;;;;;;0BAGZ,0JAAC,2JAAS;gBACR,OAAO;gBACP,UAAU;gBACV,UAAU;gBACV,aAAa,eAAe,WAAW;gBACvC,eAAe,eAAe,aAAa;gBAC3C,UAAU;gBACV,cAAc,YAAY,qBAAqB;gBAC/C,aAAa;gBACb,kBAAkB,IAAM,eAAe,cAAc,CAAC;gBACtD,iBAAiB,eAAe,aAAa;gBAC7C,UAAU;;;;;;;;;;;;AAIlB;GA7aS;;QAMQ,sLAAY;QACZ,uIAAS;QAmBwD,qKAAgB;QACnE,2JAAW;QAGgC,iKAAc;QAKtF,qKAAgB;QAOI,iKAAc;QACf,+JAAa;QACT,uKAAiB;QACzB,uJAAS;QACP,2JAAW;;;KA9CrB;uCA+aM","debugId":null}}]
}