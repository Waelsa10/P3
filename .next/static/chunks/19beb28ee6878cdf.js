(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3251,60283,53431,92859,e=>{"use strict";let t,r,n;var i,s,a=e.i(50461);let o=function(e){let t=[],r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:((64512&i)==55296&&n+1<e.length&&(64512&e.charCodeAt(n+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128):t[r++]=i>>12|224,t[r++]=i>>6&63|128),t[r++]=63&i|128)}return t},l=function(e){let t=[],r=0,n=0;for(;r<e.length;){let i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){let s=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){let s=((7&i)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else{let s=e[r++],a=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){let i=e[t],s=t+1<e.length,a=s?e[t+1]:0,o=t+2<e.length,l=o?e[t+2]:0,u=i>>2,c=(3&i)<<4|a>>4,h=(15&a)<<2|l>>6,d=63&l;!o&&(d=64,s||(h=64)),n.push(r[u],r[c],r[h],r[d])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(o(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):l(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){let i=r[e.charAt(t++)],s=t<e.length?r[e.charAt(t)]:0,a=++t<e.length?r[e.charAt(t)]:64,o=++t<e.length?r[e.charAt(t)]:64;if(++t,null==i||null==s||null==a||null==o)throw new c;let l=i<<2|s>>4;if(n.push(l),64!==a){let e=s<<4&240|a>>2;if(n.push(e),64!==o){let e=a<<6&192|o;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class c extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let h=function(e){let t=o(e);return u.encodeByteArray(t,!0)},d=function(e){return h(e).replace(/\./g,"")},f=function(e){try{return u.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},p=()=>{try{return("undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g).__FIREBASE_DEFAULTS__||(()=>{if(void 0===a.default||void 0===a.default.env)return;let e=a.default.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)})()||(()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&f(e[1]);return t&&JSON.parse(t)})()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},g=e=>{var t,r;return null==(r=null==(t=p())?void 0:t.emulatorHosts)?void 0:r[e]},m=e=>{let t=g(e);if(!t)return;let r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]},y=()=>{var e;return null==(e=p())?void 0:e.config},v=e=>{var t;return null==(t=p())?void 0:t[`_${e}`]};class w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function b(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let r=t||"demo-project",n=e.iat||0,i=e.sub||e.user_id;if(!i)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[d(JSON.stringify({alg:"none",type:"JWT"})),d(JSON.stringify(s)),""].join(".")}function _(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function E(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_())}function I(){var t;let r=null==(t=p())?void 0:t.forceEnvironment;if("node"===r)return!0;if("browser"===r)return!1;try{return"[object process]"===Object.prototype.toString.call(e.g.process)}catch(e){return!1}}function T(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function S(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function C(){let e=_();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function A(){return!I()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){try{return"object"==typeof indexedDB}catch(e){return!1}}function R(){return new Promise((e,t)=>{try{let r=!0,n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var e;t((null==(e=i.error)?void 0:e.message)||"")}}catch(e){t(e)}})}class N extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,N.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D.prototype.create)}}class D{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){var r,n;let i=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?(r=a,n=i,r.replace(O,(e,t)=>{let r=n[t];return null!=r?String(r):`<${t}?>`})):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new N(s,l,i)}}let O=/\{\$([^}]+)}/g;function x(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function P(e,t){if(e===t)return!0;let r=Object.keys(e),n=Object.keys(t);for(let i of r){if(!n.includes(i))return!1;let r=e[i],s=t[i];if(L(r)&&L(s)){if(!P(r,s))return!1}else if(r!==s)return!1}for(let e of n)if(!r.includes(e))return!1;return!0}function L(e){return null!==e&&"object"==typeof e}function M(e){let t=[];for(let[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function F(e){let t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){let[r,n]=e.split("=");t[decodeURIComponent(r)]=decodeURIComponent(n)}}),t}function U(e){let t=e.indexOf("?");if(!t)return"";let r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function V(e,t){let r=new j(e,t);return r.subscribe.bind(r)}class j{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let n;if(void 0===e&&void 0===t&&void 0===r)throw Error("Missing Observer.");void 0===(n=!function(e,t){if("object"!=typeof e||null===e)return!1;for(let r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}(e,["next","error","complete"])?{next:e,error:t,complete:r}:e).next&&(n.next=B),void 0===n.error&&(n.error=B),void 0===n.complete&&(n.complete=B);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(e){}}),this.observers.push(n),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function B(){}function $(e){return e&&e._delegate?e._delegate:e}e.s(["Deferred",()=>w,"ErrorFactory",()=>D,"FirebaseError",()=>N,"base64Decode",()=>f,"base64urlEncodeWithoutPadding",()=>d,"createMockUserToken",()=>b,"createSubscribe",()=>V,"deepEqual",()=>P,"extractQuerystring",()=>U,"getDefaultAppConfig",()=>y,"getDefaultEmulatorHost",()=>g,"getDefaultEmulatorHostnameAndPort",()=>m,"getExperimentalSetting",()=>v,"getModularInstance",()=>$,"getUA",()=>_,"isBrowserExtension",()=>T,"isEmpty",()=>x,"isIE",()=>C,"isIndexedDBAvailable",()=>k,"isMobileCordova",()=>E,"isNode",()=>I,"isReactNative",()=>S,"isSafari",()=>A,"querystring",()=>M,"querystringDecode",()=>F,"validateIndexedDBOpenable",()=>R],60283);class q{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let z="[DEFAULT]";class H{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new w;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!=(t=null==e?void 0:e.optional)&&t;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(n)return null;throw e}if(n)return null;throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:z})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=z){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=z){return this.instances.has(e)}getOptions(e=z){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[e,t]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){var r;let n=this.normalizeInstanceIdentifier(t),i=null!=(r=this.onInitCallbacks.get(n))?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);let s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){var r;let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e)===z?void 0:r,options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}return n||null}normalizeInstanceIdentifier(e=z){return this.component?this.component.multipleInstances?e:z:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class K{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new H(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}e.s(["Component",()=>q,"ComponentContainer",()=>K],53431);let G=[];(i=s||(s={}))[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";let W={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},Q=s.INFO,Y={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},X=(e,t,...r)=>{if(t<e.logLevel)return;let n=new Date().toISOString(),i=Y[t];if(i)console[i](`[${n}]  ${e.name}:`,...r);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class J{constructor(e){this.name=e,this._logLevel=Q,this._logHandler=X,this._userLogHandler=null,G.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in s))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?W[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...e),this._logHandler(this,s.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...e),this._logHandler(this,s.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,s.INFO,...e),this._logHandler(this,s.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,s.WARN,...e),this._logHandler(this,s.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,s.ERROR,...e),this._logHandler(this,s.ERROR,...e)}}function Z(e){G.forEach(t=>{t.setLogLevel(e)})}function ee(e,t){for(let r of G){let n=null;t&&t.level&&(n=W[t.level]),null===e?r.userLogHandler=null:r.userLogHandler=(t,r,...i)=>{let a=i.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");r>=(null!=n?n:t.logLevel)&&e({level:s[r].toLowerCase(),message:a,args:i,type:t.name})}}}e.s(["LogLevel",()=>s,"Logger",()=>J,"setLogLevel",()=>Z,"setUserLogHandler",()=>ee],92859);let et=new WeakMap,er=new WeakMap,en=new WeakMap,ei=new WeakMap,es=new WeakMap,ea={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return er.get(e);if("objectStoreNames"===t)return e.objectStoreNames||en.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return eo(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function eo(e){if(e instanceof IDBRequest){let t;return(t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(eo(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",s)})).then(t=>{t instanceof IDBCursor&&et.set(t,e)}).catch(()=>{}),es.set(t,e),t}if(ei.has(e))return ei.get(e);let n=function(e){if("function"==typeof e)return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(el(this),t),eo(et.get(this))}:function(...t){return eo(e.apply(el(this),t))}:function(t,...r){let n=e.call(el(this),t,...r);return en.set(n,t.sort?t.sort():[t]),eo(n)};return e instanceof IDBTransaction&&function(e){if(er.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});er.set(e,t)}(e),(t||(t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(e,ea):e}(e);return n!==e&&(ei.set(e,n),es.set(n,e)),n}let el=e=>es.get(e),eu=["get","getKey","getAll","getAllKeys","count"],ec=["put","add","delete","clear"],eh=new Map;function ed(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(eh.get(t))return eh.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,i=ec.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||eu.includes(r)))return;let s=async function(e,...t){let s=this.transaction(e,i?"readwrite":"readonly"),a=s.store;return n&&(a=a.index(t.shift())),(await Promise.all([a[r](...t),i&&s.done]))[0]};return eh.set(t,s),s}ea={...n=ea,get:(e,t,r)=>ed(e,t)||n.get(e,t,r),has:(e,t)=>!!ed(e,t)||n.has(e,t)};class ef{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{let t;if((null==(t=e.getComponent())?void 0:t.type)!=="VERSION")return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}let ep="@firebase/app",eg="0.9.13",em=new J("@firebase/app"),ey="[DEFAULT]",ev={[ep]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ew=new Map,eb=new Map;function e_(e,t){try{e.container.addComponent(t)}catch(r){em.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function eE(e,t){e.container.addOrOverwriteComponent(t)}function eI(e){let t=e.name;if(eb.has(t))return em.debug(`There were multiple attempts to register component ${t}.`),!1;for(let r of(eb.set(t,e),ew.values()))e_(r,e);return!0}function eT(e,t){let r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function eS(e,t,r=ey){eT(e,t).clearInstance(r)}function eC(){eb.clear()}let eA=new D("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ek{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new q("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eA.create("app-deleted",{appName:this._name})}}function eR(e,t={}){let r=e;"object"!=typeof t&&(t={name:t});let n=Object.assign({name:ey,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw eA.create("bad-app-name",{appName:String(i)});if(r||(r=y()),!r)throw eA.create("no-options");let s=ew.get(i);if(s)if(P(r,s.options)&&P(n,s.config))return s;else throw eA.create("duplicate-app",{appName:i});let a=new K(i);for(let e of eb.values())a.addComponent(e);let o=new ek(r,n,a);return ew.set(i,o),o}function eN(e=ey){let t=ew.get(e);if(!t&&e===ey&&y())return eR();if(!t)throw eA.create("no-app",{appName:e});return t}function eD(){return Array.from(ew.values())}async function eO(e){let t=e.name;ew.has(t)&&(ew.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function ex(e,t,r){var n;let i=null!=(n=ev[e])?n:e;r&&(i+=`-${r}`);let s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){let e=[`Unable to register library "${i}" with version "${t}":`];s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),em.warn(e.join(" "));return}eI(new q(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}function eP(e,t){if(null!==e&&"function"!=typeof e)throw eA.create("invalid-log-argument");ee(e,t)}function eL(e){Z(e)}let eM="firebase-heartbeat-store",eF=null;function eU(){return eF||(eF=(function(e,t,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){let a=indexedDB.open(e,1),o=eo(a);return n&&a.addEventListener("upgradeneeded",e=>{n(eo(a.result),e.oldVersion,e.newVersion,eo(a.transaction),e)}),r&&a.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o})("firebase-heartbeat-database",0,{upgrade:(e,t)=>{0===t&&e.createObjectStore(eM)}}).catch(e=>{throw eA.create("idb-open",{originalErrorMessage:e.message})})),eF}async function eV(e){try{let t=await eU();return await t.transaction(eM).objectStore(eM).get(eB(e))}catch(e){if(e instanceof N)em.warn(e.message);else{let t=eA.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});em.warn(t.message)}}}async function ej(e,t){try{let r=(await eU()).transaction(eM,"readwrite"),n=r.objectStore(eM);await n.put(t,eB(e)),await r.done}catch(e){if(e instanceof N)em.warn(e.message);else{let t=eA.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});em.warn(t.message)}}}function eB(e){return`${e.name}!${e.options.appId}`}class e${constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ez(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){let e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=eq();return(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))?void 0:(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";let e=eq(),{heartbeatsToSend:t,unsentEntries:r}=function(e,t=1024){let r=[],n=e.slice();for(let i of e){let e=r.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),eH(r)>t){e.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),eH(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}(this._heartbeatsCache.heartbeats),n=d(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}}function eq(){return new Date().toISOString().substring(0,10)}class ez{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!k()&&R().then(()=>!0).catch(()=>!1)}async read(){return await this._canUseIndexedDBPromise&&await eV(this.app)||{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return ej(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return ej(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function eH(e){return d(JSON.stringify({version:2,heartbeats:e})).length}eI(new q("platform-logger",e=>new ef(e),"PRIVATE")),eI(new q("heartbeat",e=>new e$(e),"PRIVATE")),ex(ep,eg,""),ex(ep,eg,"esm2017"),ex("fire-js",""),e.s(["SDK_VERSION",()=>"9.23.0","_DEFAULT_ENTRY_NAME",()=>ey,"_addComponent",()=>e_,"_addOrOverwriteComponent",()=>eE,"_apps",()=>ew,"_clearComponents",()=>eC,"_components",()=>eb,"_getProvider",()=>eT,"_registerComponent",()=>eI,"_removeServiceInstance",()=>eS,"deleteApp",()=>eO,"getApp",()=>eN,"getApps",()=>eD,"initializeApp",()=>eR,"onLog",()=>eP,"registerVersion",()=>ex,"setLogLevel",()=>eL],3251)},64376,85498,e=>{"use strict";var t,r=e.i(60283),n=e.i(3251);function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}var s=("function"==typeof SuppressedError&&SuppressedError,e.i(92859)),a=e.i(53431);function o(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}let l=new r.ErrorFactory("auth","Firebase",o()),u=new s.Logger("@firebase/auth");function c(e,...t){u.logLevel<=s.LogLevel.ERROR&&u.error(`Auth (${n.SDK_VERSION}): ${e}`,...t)}function h(e,...t){throw p(e,...t)}function d(e,...t){return p(e,...t)}function f(e,t,n){let i=Object.assign(Object.assign({},o()),{[t]:n});return new r.ErrorFactory("auth","Firebase",i).create(t,{appName:e.name})}function p(e,...t){if("string"!=typeof e){let r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return l.create(e,...t)}function g(e,t,...r){if(!e)throw p(t,...r)}function m(e){let t="INTERNAL ASSERTION FAILED: "+e;throw c(t),Error(t)}function y(){var e;return"undefined"!=typeof self&&(null==(e=self.location)?void 0:e.href)||""}function v(){var e;return"undefined"!=typeof self&&(null==(e=self.location)?void 0:e.protocol)||null}class w{constructor(e,t){var n;this.shortDelay=e,this.longDelay=t,n="Short delay should be less than long delay!",t>e||m(n),this.isMobile=(0,r.isMobileCordova)()||(0,r.isReactNative)()}get(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===v()||"https:"===v()||(0,r.isBrowserExtension)()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function b(e,t){var r,n;r=e.emulator,n="Emulator should always be set here",r||m(n);let{url:i}=e.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}class _{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void m("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void m("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void m("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}let E={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},I=new w(3e4,6e4);function T(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function S(e,t,n,i,s={}){return C(e,s,async()=>{let s={},a={};i&&("GET"===t?a=i:s={body:JSON.stringify(i)});let o=(0,r.querystring)(Object.assign({key:e.config.apiKey},a)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),_.fetch()(k(e,e.config.apiHost,n,o),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},s))})}async function C(e,t,n){e._canInitEmulator=!1;let i=Object.assign(Object.assign({},E),t);try{let t=new R(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let s=await r.json();if("needConfirmation"in s)throw N(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{let[t,n]=(r.ok?s.errorMessage:s.error.message).split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===t)throw N(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===t)throw N(e,"email-already-in-use",s);if("USER_DISABLED"===t)throw N(e,"user-disabled",s);let a=i[t]||t.toLowerCase().replace(/[_\s]+/g,"-");if(n)throw f(e,a,n);h(e,a)}}catch(t){if(t instanceof r.FirebaseError)throw t;h(e,"network-request-failed",{message:String(t)})}}async function A(e,t,r,n,i={}){let s=await S(e,t,r,n,i);return"mfaPendingCredential"in s&&h(e,"multi-factor-auth-required",{_serverResponse:s}),s}function k(e,t,r,n){let i=`${t}${r}?${n}`;return e.config.emulator?b(e.config,i):`${e.config.apiScheme}://${i}`}class R{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(d(this.auth,"network-request-failed")),I.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function N(e,t,r){let n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);let i=d(e,t,n);return i.customData._tokenResponse=r,i}async function D(e,t){return S(e,"POST","/v1/accounts:delete",t)}async function O(e,t){return S(e,"POST","/v1/accounts:lookup",t)}function x(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function P(e,t=!1){let n=(0,r.getModularInstance)(e),i=await n.getIdToken(t),s=M(i);g(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");let a="object"==typeof s.firebase?s.firebase:void 0,o=null==a?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:x(L(s.auth_time)),issuedAtTime:x(L(s.iat)),expirationTime:x(L(s.exp)),signInProvider:o||null,signInSecondFactor:(null==a?void 0:a.sign_in_second_factor)||null}}function L(e){return 1e3*Number(e)}function M(e){let[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return c("JWT malformed, contained fewer than 3 sections"),null;try{let e=(0,r.base64Decode)(n);if(!e)return c("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return c("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function F(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof r.FirebaseError&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class U{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(!e)return this.errorBackoff=3e4,Math.max(0,(null!=(t=this.user.stsTokenManager.expirationTime)?t:0)-Date.now()-3e5);{let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(null==e?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class V{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=x(this.lastLoginAt),this.creationTime=x(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function j(e){var t,r,n;let s=e.auth,a=await e.getIdToken(),o=await F(e,O(s,{idToken:a}));g(null==o?void 0:o.users.length,s,"internal-error");let l=o.users[0];e._notifyReloadListener(l);let u=(null==(t=l.providerUserInfo)?void 0:t.length)?l.providerUserInfo.map(e=>{var{providerId:t}=e,r=i(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}}):[],c=(r=e.providerData,n=u,[...r.filter(e=>!n.some(t=>t.providerId===e.providerId)),...n]),h=e.isAnonymous,d=!(e.email&&l.passwordHash)&&!(null==c?void 0:c.length);Object.assign(e,{uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new V(l.createdAt,l.lastLoginAt),isAnonymous:!!h&&d})}async function B(e){let t=(0,r.getModularInstance)(e);await j(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}async function $(e,t){let n=await C(e,{},async()=>{let n=(0,r.querystring)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,a=k(e,i,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",_.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}class q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){let t;g(e.idToken,"internal-error"),g(void 0!==e.idToken,"internal-error"),g(void 0!==e.refreshToken,"internal-error");let r="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):(g(t=M(e.idToken),"internal-error"),g(void 0!==t.exp,"internal-error"),g(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat));this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}async getToken(e,t=!1){return(g(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired)?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:n,expiresIn:i}=await $(e,t);this.updateTokensAndExpiration(r,n,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){let{refreshToken:r,accessToken:n,expirationTime:i}=t,s=new q;return r&&(g("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),n&&(g("string"==typeof n,"internal-error",{appName:e}),s.accessToken=n),i&&(g("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new q,this.toJSON())}_performRefresh(){return m("not implemented")}}function z(e,t){g("string"==typeof e||void 0===e,"internal-error",{appName:t})}class H{constructor(e){var{uid:t,auth:r,stsTokenManager:n}=e,s=i(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new U(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new V(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await F(this,this.stsTokenManager.getToken(this.auth,e));return g(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return P(this,e)}reload(){return B(this)}_assign(e){this!==e&&(g(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new H(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){g(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await j(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){let e=await this.getIdToken();return await F(this,D(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,n,i,s,a,o,l,u;let c=null!=(r=t.displayName)?r:void 0,h=null!=(n=t.email)?n:void 0,d=null!=(i=t.phoneNumber)?i:void 0,f=null!=(s=t.photoURL)?s:void 0,p=null!=(a=t.tenantId)?a:void 0,m=null!=(o=t._redirectEventId)?o:void 0,y=null!=(l=t.createdAt)?l:void 0,v=null!=(u=t.lastLoginAt)?u:void 0,{uid:w,emailVerified:b,isAnonymous:_,providerData:E,stsTokenManager:I}=t;g(w&&I,e,"internal-error");let T=q.fromJSON(this.name,I);g("string"==typeof w,e,"internal-error"),z(c,e.name),z(h,e.name),g("boolean"==typeof b,e,"internal-error"),g("boolean"==typeof _,e,"internal-error"),z(d,e.name),z(f,e.name),z(p,e.name),z(m,e.name),z(y,e.name),z(v,e.name);let S=new H({uid:w,auth:e,email:h,emailVerified:b,displayName:c,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:y,lastLoginAt:v});return E&&Array.isArray(E)&&(S.providerData=E.map(e=>Object.assign({},e))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t,r=!1){let n=new q;n.updateFromServerResponse(t);let i=new H({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await j(i),i}}let K=new Map;function G(e){var t,r;t="Expected a class definition",e instanceof Function||m(t);let n=K.get(e);return n?(r="Instance stored in cache mismatched with class",n instanceof e||m(r)):(n=new e,K.set(e,n)),n}class W{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}function Q(e,t,r){return`firebase:${e}:${t}:${r}`}W.type="NONE";class Y{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:n,name:i}=this.auth;this.fullUserKey=Q(this.userKey,n.apiKey,i),this.fullPersistenceKey=Q("persistence",n.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?H._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Y(G(W),e,r);let n=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),i=n[0]||G(W),s=Q(r,e.config.apiKey,e.name),a=null;for(let r of t)try{let t=await r._get(s);if(t){let n=H._fromJSON(e,t);r!==i&&(a=n),i=r;break}}catch(e){}let o=n.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length&&(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new Y(i,e,r)}}function X(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";{if(et(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(J(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(en(t))return"Blackberry";if(ei(t))return"Webos";if(Z(t))return"Safari";if((t.includes("chrome/")||ee(t))&&!t.includes("edge/"))return"Chrome";if(er(t))return"Android";let r=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if((null==r?void 0:r.length)===2)return r[1]}return"Other"}function J(e=(0,r.getUA)()){return/firefox\//i.test(e)}function Z(e=(0,r.getUA)()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ee(e=(0,r.getUA)()){return/crios\//i.test(e)}function et(e=(0,r.getUA)()){return/iemobile/i.test(e)}function er(e=(0,r.getUA)()){return/android/i.test(e)}function en(e=(0,r.getUA)()){return/blackberry/i.test(e)}function ei(e=(0,r.getUA)()){return/webos/i.test(e)}function es(e=(0,r.getUA)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ea(e=(0,r.getUA)()){return es(e)||er(e)||ei(e)||en(e)||/windows phone/i.test(e)||et(e)}function eo(e,t=[]){let i;switch(e){case"Browser":i=X((0,r.getUA)());break;case"Worker":i=`${X((0,r.getUA)())}-${e}`;break;default:i=e}let s=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${n.SDK_VERSION}/${s}`}async function el(e,t){return S(e,"GET","/v2/recaptchaConfig",T(e,t))}function eu(e){return void 0!==e&&void 0!==e.enterprise}class ec{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function eh(e){return new Promise((t,r)=>{var n,i;let s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=e=>{let t=d("internal-error");t.customData=e,r(t)},s.type="text/javascript",s.charset="UTF-8",(null!=(i=null==(n=document.getElementsByTagName("head"))?void 0:n[0])?i:document).appendChild(s)})}function ed(e){return`__${e}${Math.floor(1e6*Math.random())}`}class ef{constructor(e){this.type="recaptcha-enterprise",this.auth=ey(e)}async verify(e="verify",t=!1){async function r(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,r)=>{el(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(n=>{if(void 0===n.recaptchaKey)r(Error("recaptcha Enterprise site key undefined"));else{let r=new ec(n);return null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,t(r.siteKey)}}).catch(e=>{r(e)})})}function n(t,r,n){let i=window.grecaptcha;eu(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{r(e)}).catch(()=>{r("NO_RECAPTCHA")})}):n(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,i)=>{r(this.auth).then(r=>{if(!t&&eu(window.grecaptcha))n(r,e,i);else{if("undefined"==typeof window)return void i(Error("RecaptchaVerifier is only supported in browser"));eh("https://www.google.com/recaptcha/enterprise.js?render="+r).then(()=>{n(r,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function ep(e,t,r,n=!1){let i,s=new ef(e);try{i=await s.verify(r)}catch(e){i=await s.verify(r,!0)}let a=Object.assign({},t);return n?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}class eg{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=t=>new Promise((r,n)=>{try{let n=e(t);r(n)}catch(e){n(e)}});r.onAbort=t,this.queue.push(r);let n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(e){for(let e of(t.reverse(),t))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class em{constructor(e,t,r,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ev(this),this.idTokenSubscription=new ev(this),this.beforeStateQueue=new eg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=G(t)),this._initializationPromise=this.queue(async()=>{var r,n;if(!this._deleted){if(this.persistenceManager=await Y.create(this,e),!this._deleted){if(null==(r=this._popupRedirectResolver)?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null==(n=this.currentUser)?void 0:n.uid)||null,this._deleted||(this._isInitialized=!0)}}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;let r=await this.assertedPersistence.getCurrentUser(),n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let r=null==(t=this.redirectUser)?void 0:t._redirectEventId,s=null==n?void 0:n._redirectEventId,a=await this.tryRedirectSignIn(e);(!r||r===s)&&(null==a?void 0:a.user)&&(n=a.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return(g(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId)?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await j(e)}catch(e){if((null==e?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){let t=e?(0,r.getModularInstance)(e):null;return t&&g(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&g(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(G(e))})}async initializeRecaptchaConfig(){let e=new ec(await el(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}));null==this.tenantId?this._agentRecaptchaConfig=e:this._tenantRecaptchaConfigs[this.tenantId]=e,e.emailPasswordEnabled&&new ef(this).verify()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null==(e=this._currentUser)?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&G(e)||this._popupRedirectResolver;g(t,this,"argument-error"),this.redirectPersistenceManager=await Y.create(this,[G(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return(this._isInitialized&&await this.queue(async()=>{}),(null==(t=this._currentUser)?void 0:t._redirectEventId)===e)?this._currentUser:(null==(r=this.redirectUser)?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=null!=(t=null==(e=this.currentUser)?void 0:e.uid)?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,n){if(this._deleted)return()=>{};let i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return(g(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t)?e.addObserver(t,r,n):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return g(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await (null==(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var e;let t=await (null==(e=this.appCheckServiceProvider.getImmediate({optional:!0}))?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){u.logLevel<=s.LogLevel.WARN&&u.warn(`Auth (${n.SDK_VERSION}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function ey(e){return(0,r.getModularInstance)(e)}class ev{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,r.createSubscribe)(e=>this.observer=e)}get next(){return g(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ew(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function eb(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}class e_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return m("not implemented")}_getIdTokenResponse(e){return m("not implemented")}_linkToIdToken(e,t){return m("not implemented")}_getReauthenticationResolver(e){return m("not implemented")}}async function eE(e,t){return S(e,"POST","/v1/accounts:update",t)}async function eI(e,t){return A(e,"POST","/v1/accounts:signInWithPassword",T(e,t))}async function eT(e,t){return S(e,"POST","/v1/accounts:sendOobCode",T(e,t))}async function eS(e,t){return eT(e,t)}async function eC(e,t){return eT(e,t)}async function eA(e,t){return eT(e,t)}async function ek(e,t){return eT(e,t)}async function eR(e,t){return A(e,"POST","/v1/accounts:signInWithEmailLink",T(e,t))}async function eN(e,t){return A(e,"POST","/v1/accounts:signInWithEmailLink",T(e,t))}class eD extends e_{constructor(e,t,r,n=null){super("password",r),this._email=e,this._password=t,this._tenantId=n}static _fromEmailAndPassword(e,t){return new eD(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new eD(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);else if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":let r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null==(t=e._getRecaptchaConfig())||!t.emailPasswordEnabled)return eI(e,r).catch(async t=>{if("auth/missing-recaptcha-token"!==t.code)return Promise.reject(t);{console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");let t=await ep(e,r,"signInWithPassword");return eI(e,t)}});{let t=await ep(e,r,"signInWithPassword");return eI(e,t)}case"emailLink":return eR(e,{email:this._email,oobCode:this._password});default:h(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return eE(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return eN(e,{idToken:t,email:this._email,oobCode:this._password});default:h(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function eO(e,t){return A(e,"POST","/v1/accounts:signInWithIdp",T(e,t))}class ex extends e_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new ex(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):h("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:n}=t,s=i(t,["providerId","signInMethod"]);if(!r||!n)return null;let a=new ex(r,n);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return eO(e,this.buildRequest())}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,eO(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,eO(e,t)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,r.querystring)(t)}return e}}async function eP(e,t){return S(e,"POST","/v1/accounts:sendVerificationCode",T(e,t))}async function eL(e,t){return A(e,"POST","/v1/accounts:signInWithPhoneNumber",T(e,t))}async function eM(e,t){let r=await A(e,"POST","/v1/accounts:signInWithPhoneNumber",T(e,t));if(r.temporaryProof)throw N(e,"account-exists-with-different-credential",r);return r}let eF={USER_NOT_FOUND:"user-not-found"};async function eU(e,t){return A(e,"POST","/v1/accounts:signInWithPhoneNumber",T(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),eF)}class eV extends e_{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new eV({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new eV({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return eL(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return eM(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return eU(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:n}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}=e;return r||t||n||i?new eV({verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}):null}}class ej{constructor(e){var t,n,i,s,a,o;const l=(0,r.querystringDecode)((0,r.extractQuerystring)(e)),u=null!=(t=l.apiKey)?t:null,c=null!=(n=l.oobCode)?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!=(i=l.mode)?i:null);g(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=null!=(s=l.continueUrl)?s:null,this.languageCode=null!=(a=l.languageCode)?a:null,this.tenantId=null!=(o=l.tenantId)?o:null}static parseLink(e){let t,n,i,s=(n=(t=(0,r.querystringDecode)((0,r.extractQuerystring)(e)).link)?(0,r.querystringDecode)((0,r.extractQuerystring)(t)).deep_link_id:null,((i=(0,r.querystringDecode)((0,r.extractQuerystring)(e)).deep_link_id)?(0,r.querystringDecode)((0,r.extractQuerystring)(i)).link:null)||i||n||t||e);try{return new ej(s)}catch(e){return null}}}class eB{constructor(){this.providerId=eB.PROVIDER_ID}static credential(e,t){return eD._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let r=ej.parseLink(t);return g(r,"argument-error"),eD._fromEmailAndCode(e,r.code,r.tenantId)}}eB.PROVIDER_ID="password",eB.EMAIL_PASSWORD_SIGN_IN_METHOD="password",eB.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class e${constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class eq extends e${constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ez extends eq{static credentialFromJSON(e){let t="string"==typeof e?JSON.parse(e):e;return g("providerId"in t&&"signInMethod"in t,"argument-error"),ex._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return g(e.idToken||e.accessToken,"argument-error"),ex._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ez.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ez.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:n,pendingToken:i,nonce:s,providerId:a}=e;if(!r&&!n&&!t&&!i||!a)return null;try{return new ez(a)._credential({idToken:t,accessToken:r,nonce:s,pendingToken:i})}catch(e){return null}}}class eH extends eq{constructor(){super("facebook.com")}static credential(e){return ex._fromParams({providerId:eH.PROVIDER_ID,signInMethod:eH.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eH.credentialFromTaggedObject(e)}static credentialFromError(e){return eH.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eH.credential(e.oauthAccessToken)}catch(e){return null}}}eH.FACEBOOK_SIGN_IN_METHOD="facebook.com",eH.PROVIDER_ID="facebook.com";class eK extends eq{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ex._fromParams({providerId:eK.PROVIDER_ID,signInMethod:eK.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return eK.credentialFromTaggedObject(e)}static credentialFromError(e){return eK.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return eK.credential(t,r)}catch(e){return null}}}eK.GOOGLE_SIGN_IN_METHOD="google.com",eK.PROVIDER_ID="google.com";class eG extends eq{constructor(){super("github.com")}static credential(e){return ex._fromParams({providerId:eG.PROVIDER_ID,signInMethod:eG.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eG.credentialFromTaggedObject(e)}static credentialFromError(e){return eG.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eG.credential(e.oauthAccessToken)}catch(e){return null}}}eG.GITHUB_SIGN_IN_METHOD="github.com",eG.PROVIDER_ID="github.com";class eW extends eq{constructor(){super("twitter.com")}static credential(e,t){return ex._fromParams({providerId:eW.PROVIDER_ID,signInMethod:eW.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return eW.credentialFromTaggedObject(e)}static credentialFromError(e){return eW.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return eW.credential(t,r)}catch(e){return null}}}async function eQ(e,t){return A(e,"POST","/v1/accounts:signUp",T(e,t))}eW.TWITTER_SIGN_IN_METHOD="twitter.com",eW.PROVIDER_ID="twitter.com";class eY{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,n=!1){return new eY({user:await H._fromIdTokenResponse(e,r,n),providerId:eX(r),_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){return await e._updateTokensIfNecessary(r,!0),new eY({user:e,providerId:eX(r),_tokenResponse:r,operationType:t})}}function eX(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class eJ extends r.FirebaseError{constructor(e,t,r,n){var i;super(t.code,t.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,eJ.prototype),this.customData={appName:e.name,tenantId:null!=(i=e.tenantId)?i:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,n){return new eJ(e,t,r,n)}}function eZ(e,t,r,n){return("reauthenticate"===t?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(r=>{if("auth/multi-factor-auth-required"===r.code)throw eJ._fromErrorAndOperation(e,r,t,n);throw r})}async function e0(e,t,r=!1){let n=await F(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return eY._forOperation(e,"link",n)}async function e1(e,t,r=!1){let{auth:n}=e,i="reauthenticate";try{let s=await F(e,eZ(n,i,t,e),r);g(s.idToken,n,"internal-error");let a=M(s.idToken);g(a,n,"internal-error");let{sub:o}=a;return g(e.uid===o,n,"user-mismatch"),eY._forOperation(e,i,s)}catch(e){throw(null==e?void 0:e.code)==="auth/user-not-found"&&h(n,"user-mismatch"),e}}async function e2(e,t,r=!1){let n="signIn",i=await eZ(e,n,t),s=await eY._fromIdTokenResponse(e,n,i);return r||await e._updateCurrentUser(s.user),s}async function e3(e,t){return e2(ey(e),t)}class e4{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?e5._fromServerResponse(e,t):"totpInfo"in t?e6._fromServerResponse(e,t):h(e,"internal-error")}}class e5 extends e4{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new e5(t)}}class e6 extends e4{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new e6(t)}}function e8(e,t,r){var n;g((null==(n=r.url)?void 0:n.length)>0,e,"invalid-continue-uri"),g(void 0===r.dynamicLinkDomain||r.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=r.url,t.dynamicLinkDomain=r.dynamicLinkDomain,t.canHandleCodeInApp=r.handleCodeInApp,r.iOS&&(g(r.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=r.iOS.bundleId),r.android&&(g(r.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=r.android.installApp,t.androidMinimumVersionCode=r.android.minimumVersion,t.androidPackageName=r.android.packageName)}async function e9(e,t,r){var n;let i=ey(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null==(n=i._getRecaptchaConfig())?void 0:n.emailPasswordEnabled){let e=await ep(i,s,"getOobCode",!0);r&&e8(i,e,r),await eC(i,e)}else r&&e8(i,s,r),await eC(i,s).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");let e=await ep(i,s,"getOobCode",!0);r&&e8(i,e,r),await eC(i,e)}})}async function e7(e,t,r){var n;let i,s=ey(e),a={returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"};if(null==(n=s._getRecaptchaConfig())?void 0:n.emailPasswordEnabled){let e=await ep(s,a,"signUpPassword");i=eQ(s,e)}else i=eQ(s,a).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");let e=await ep(s,a,"signUpPassword");return eQ(s,e)}});let o=await i.catch(e=>Promise.reject(e)),l=await eY._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function te(e,t,n){return e3((0,r.getModularInstance)(e),eB.credential(t,n))}async function tt(e,t,r){var n;let i=ey(e),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function a(e,t){g(t.handleCodeInApp,i,"argument-error"),t&&e8(i,e,t)}if(null==(n=i._getRecaptchaConfig())?void 0:n.emailPasswordEnabled){let e=await ep(i,s,"getOobCode",!0);a(e,r),await eA(i,e)}else a(s,r),await eA(i,s).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");let e=await ep(i,s,"getOobCode",!0);a(e,r),await eA(i,e)}})}async function tr(e,t,n){let i=(0,r.getModularInstance)(e),s=eB.credentialWithLink(t,n||y());return g(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e3(i,s)}async function tn(e,t){let n=(0,r.getModularInstance)(e),i={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&e8(n.auth,i,t);let{email:s}=await eS(n.auth,i);s!==e.email&&await e.reload()}async function ti(e,t,n){let i=(0,r.getModularInstance)(e),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&e8(i.auth,s,n);let{email:a}=await ek(i.auth,s);a!==e.email&&await e.reload()}async function ts(e,t){return S(e,"POST","/v1/accounts:update",t)}async function ta(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;let i=(0,r.getModularInstance)(e),s=await i.getIdToken(),a=await F(i,ts(i.auth,{idToken:s,displayName:t,photoUrl:n,returnSecureToken:!0}));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;let o=i.providerData.find(({providerId:e})=>"password"===e);o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function to(e,t){return tu((0,r.getModularInstance)(e),t,null)}function tl(e,t){return tu((0,r.getModularInstance)(e),null,t)}async function tu(e,t,r){let{auth:n}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),r&&(i.password=r);let s=await F(e,eE(n,i));await e._updateTokensIfNecessary(s,!0)}function tc(e,t,n,i){return(0,r.getModularInstance)(e).onIdTokenChanged(t,n,i)}function th(e,t,n,i){return(0,r.getModularInstance)(e).onAuthStateChanged(t,n,i)}new WeakMap;let td="__sak";class tf{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(td,"1"),this.storage.removeItem(td),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class tp extends tf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){let e=(0,r.getUA)();return Z(e)||es(e)}()&&function(){try{return!!(window&&window!==window.top)}catch(e){return!1}}(),this.fallbackToPolling=ea(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let r=this.storage.getItem(t),n=this.localCache[t];r!==n&&e(t,n,r)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,r)=>{this.notifyListeners(e,r)});let n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}let i=()=>{let e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,r.isIE)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let e of Array.from(r))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}tp.type="LOCAL";class tg extends tf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tg.type="SESSION";class tm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;let r=new tm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:t,eventType:r,data:n}=e.data,i=this.handlersMap[r];if(!(null==i?void 0:i.size))return;e.ports[0].postMessage({status:"ack",eventId:t,eventType:r});let s=Array.from(i).map(async t=>t(e.origin,n)),a=await Promise.all(s.map(async e=>{try{let t=await e;return{fulfilled:!0,value:t}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:t,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ty(e="",t=10){let r="";for(let e=0;e<t;e++)r+=Math.floor(10*Math.random());return e+r}tm.receivers=[];class tv{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let n,i,s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw Error("connection_unavailable");return new Promise((a,o)=>{let l=ty("",20);s.port1.start();let u=setTimeout(()=>{o(Error("unsupported_event"))},r);i={messageChannel:s,onMessage(e){if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(u),n=setTimeout(()=>{o(Error("timeout"))},3e3);break;case"done":clearTimeout(n),a(e.data.response);break;default:clearTimeout(u),clearTimeout(n),o(Error("invalid_response"))}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function tw(){return window}function tb(){return void 0!==tw().WorkerGlobalScope&&"function"==typeof tw().importScripts}async function t_(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}let tE="firebaseLocalStorageDb",tI="firebaseLocalStorage",tT="fbase_key";class tS{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tC(e,t){return e.transaction([tI],t?"readwrite":"readonly").objectStore(tI)}function tA(){let e=indexedDB.open(tE,1);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{let t=e.result;try{t.createObjectStore(tI,{keyPath:tT})}catch(e){r(e)}}),e.addEventListener("success",async()=>{let r=e.result;r.objectStoreNames.contains(tI)?t(r):(r.close(),await new tS(indexedDB.deleteDatabase(tE)).toPromise(),t(await tA()))})})}async function tk(e,t,r){return new tS(tC(e,!0).put({[tT]:t,value:r})).toPromise()}async function tR(e,t){let r=tC(e,!1).get(t),n=await new tS(r).toPromise();return void 0===n?null:n.value}function tN(e,t){return new tS(tC(e,!0).delete(t)).toPromise()}class tD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await tA()),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tm._getInstance(tb()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await t_(),!this.activeServiceWorker)return;this.sender=new tv(this.activeServiceWorker);let r=await this.sender._send("ping",{},800);r&&(null==(e=r[0])?void 0:e.fulfilled)&&(null==(t=r[0])?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null==(t=null==navigator?void 0:navigator.serviceWorker)?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await tA();return await tk(e,td,"1"),await tN(e,td),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>tk(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>tR(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>tN(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new tS(tC(e,!1).getAll()).toPromise());if(!e||0!==this.pendingWrites)return[];let t=[],r=new Set;for(let{fbase_key:n,value:i}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(i)&&(this.notifyListeners(n,i),t.push(n));for(let e of Object.keys(this.localCache))this.localCache[e]&&!r.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let e of Array.from(r))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}async function tO(e,t,r){var n,i,s;let a=await r.verify();try{let o;if(g("string"==typeof a,e,"argument-error"),g("recaptcha"===r.type,e,"argument-error"),o="string"==typeof t?{phoneNumber:t}:t,"session"in o){let t=o.session;if("phoneNumber"in o)return g("enroll"===t.type,e,"internal-error"),(await (i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}},S(e,"POST","/v2/accounts/mfaEnrollment:start",T(e,i)))).phoneSessionInfo.sessionInfo;{g("signin"===t.type,e,"internal-error");let r=(null==(n=o.multiFactorHint)?void 0:n.uid)||o.multiFactorUid;return g(r,e,"missing-multi-factor-info"),(await (s={mfaPendingCredential:t.credential,mfaEnrollmentId:r,phoneSignInInfo:{recaptchaToken:a}},S(e,"POST","/v2/accounts/mfaSignIn:start",T(e,s)))).phoneResponseInfo.sessionInfo}}{let{sessionInfo:t}=await eP(e,{phoneNumber:o.phoneNumber,recaptchaToken:a});return t}}finally{r._reset()}}tD.type="LOCAL",ed("rcb"),new w(3e4,6e4);class tx{constructor(e){this.providerId=tx.PROVIDER_ID,this.auth=ey(e)}verifyPhoneNumber(e,t){return tO(this.auth,e,(0,r.getModularInstance)(t))}static credential(e,t){return eV._fromVerification(e,t)}static credentialFromResult(e){return tx.credentialFromTaggedObject(e)}static credentialFromError(e){return tx.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:r}=e;return t&&r?eV._fromTokenResponse(t,r):null}}function tP(e,t){return t?G(t):(g(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}tx.PROVIDER_ID="phone",tx.PHONE_SIGN_IN_METHOD="phone";class tL extends e_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eO(e,this._buildIdpRequest())}_linkToIdToken(e,t){return eO(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return eO(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function tM(e){return e2(e.auth,new tL(e),e.bypassAuthState)}function tF(e){let{auth:t,user:r}=e;return g(r,t,"internal-error"),e1(r,new tL(e),e.bypassAuthState)}async function tU(e){let{auth:t,user:r}=e;return g(r,t,"internal-error"),e0(r,new tL(e),e.bypassAuthState)}class tV{constructor(e,t,r,n,i=!1){this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:n,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);let o={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tM;case"linkViaPopup":case"linkViaRedirect":return tU;case"reauthViaPopup":case"reauthViaRedirect":return tF;default:h(this.auth,"internal-error")}}resolve(e){var t,r;t=this.pendingPromise,r="Pending promise was never set",t||m(r),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){var t,r;t=this.pendingPromise,r="Pending promise was never set",t||m(r),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}let tj=new w(2e3,1e4);async function tB(e,t,r){let n=ey(e);if(!(t instanceof e$))throw e$.name!==t.constructor.name&&h(e,"argument-error"),f(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`);let i=tP(n,r);return new t$(n,"signInViaPopup",t,i).executeNotNull()}class t$ extends tV{constructor(e,t,r,n,i){super(e,t,n,i),this.provider=r,this.authWindow=null,this.pollId=null,t$.currentPopupAction&&t$.currentPopupAction.cancel(),t$.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return g(e,this.auth,"internal-error"),e}async onExecution(){var e,t;e=1===this.filter.length,t="Popup operations only handle one event",e||m(t);let r=ty();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],r),this.authWindow.associatedEvent=r,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(d(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null==(e=this.authWindow)?void 0:e.associatedEvent)||null}cancel(){this.reject(d(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t$.currentPopupAction=null}pollUserCancellation(){let e=()=>{var t,r;if(null==(r=null==(t=this.authWindow)?void 0:t.window)?void 0:r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(d(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tj.get())};e()}}t$.currentPopupAction=null;let tq=new Map;class tz extends tV{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=tq.get(this.auth._key());if(!e){try{let t=await tH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}tq.set(this.auth._key(),e)}return this.bypassAuthState||tq.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type)return void this.resolve(null);if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tH(e,t){var r;let n=Q("pendingRedirect",(r=t).config.apiKey,r.name),i=G(e._redirectPersistence);if(!await i._isAvailable())return!1;let s=await i._get(n)==="true";return await i._remove(n),s}function tK(e,t){tq.set(e._key(),t)}async function tG(e,t,r=!1){let n=ey(e),i=tP(n,t),s=new tz(n,i,r),a=await s.execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,t)),a}class tW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tY(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!tY(e)){let n=(null==(r=e.error.code)?void 0:r.split("auth/")[1])||"internal-error";t.onError(d(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tQ(e))}saveEventToCache(e){this.cachedEventUids.add(tQ(e)),this.lastProcessedEventTime=Date.now()}}function tQ(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function tY({type:e,error:t}){return"unknown"===e&&(null==t?void 0:t.code)==="auth/no-auth-event"}async function tX(e,t={}){return S(e,"GET","/v1/projects",t)}let tJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tZ=/^https?/;async function t0(e){if(e.config.emulator)return;let{authorizedDomains:t}=await tX(e);for(let e of t)try{if(function(e){let t=y(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){let i=new URL(e);return""===i.hostname&&""===n?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&i.hostname===n}if(!tZ.test(r))return!1;if(tJ.test(e))return n===e;let i=e.replace(/\./g,"\\.");return RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}(e))return}catch(e){}h(e,"unauthorized-domain")}let t1=new w(3e4,6e4);function t2(){let e=tw().___jsl;if(null==e?void 0:e.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}let t3=null,t4=new w(5e3,15e3),t5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},t6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function t8(e){let t,i,s,a,o,l=await (t3=t3||new Promise((t,r)=>{var n,i,s;function a(){t2(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{t2(),r(d(e,"network-request-failed"))},timeout:t1.get()})}if(null==(i=null==(n=tw().gapi)?void 0:n.iframes)?void 0:i.Iframe)t(gapi.iframes.getContext());else if(null==(s=tw().gapi)?void 0:s.load)a();else{let t=ed("iframefcb");return tw()[t]=()=>{gapi.load?a():r(d(e,"network-request-failed"))},eh(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>r(e))}}).catch(e=>{throw t3=null,e})),u=tw().gapi;return g(u,e,"internal-error"),l.open({where:document.body,url:(g((t=e.config).authDomain,e,"auth-domain-config-required"),i=t.emulator?b(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,s={apiKey:t.apiKey,appName:e.name,v:n.SDK_VERSION},(a=t6.get(e.config.apiHost))&&(s.eid=a),(o=e._getFrameworks()).length&&(s.fw=o.join(",")),`${i}?${(0,r.querystring)(s).slice(1)}`),messageHandlersFilter:u.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:t5,dontclear:!0},t=>new Promise(async(r,n)=>{await t.restyle({setHideOnLeave:!1});let i=d(e,"network-request-failed"),s=tw().setTimeout(()=>{n(i)},t4.get());function a(){tw().clearTimeout(s),r(t)}t.ping(a).then(a,()=>{n(i)})}))}let t9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class t7{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}let re=encodeURIComponent("fac");async function rt(e,t,i,s,a,o){g(e.config.authDomain,e,"auth-domain-config-required"),g(e.config.apiKey,e,"invalid-api-key");let l={apiKey:e.config.apiKey,appName:e.name,authType:i,redirectUrl:s,v:n.SDK_VERSION,eventId:a};if(t instanceof e$)for(let[n,i]of(t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,r.isEmpty)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters())),Object.entries(o||{})))l[n]=i;if(t instanceof eq){let e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}for(let t of(e.tenantId&&(l.tid=e.tenantId),Object.keys(l)))void 0===l[t]&&delete l[t];let u=await e._getAppCheckToken(),c=u?`#${re}=${encodeURIComponent(u)}`:"";return`${function({config:e}){return e.emulator?b(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,r.querystring)(l).slice(1)}${c}`}let rr="webStorageSupport",rn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tg,this._completeRedirectFn=tG,this._overrideRedirectResult=tK}async _openPopup(e,t,n,i){var s,a,o;a=null==(s=this.eventManagers[e._key()])?void 0:s.manager,o="_initialize() not called before _openPopup()",a||m(o);let l=await rt(e,t,n,y(),i);return function(e,t,n,i=500,s=600){let a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),l="",u=Object.assign(Object.assign({},t9),{width:i.toString(),height:s.toString(),top:a,left:o}),c=(0,r.getUA)().toLowerCase();n&&(l=ee(c)?"_blank":n),J(c)&&(t=t||"http://localhost",u.scrollbars="yes");let h=Object.entries(u).reduce((e,[t,r])=>`${e}${t}=${r},`,"");if(function(e=(0,r.getUA)()){var t;return es(e)&&!!(null==(t=window.navigator)?void 0:t.standalone)}(c)&&"_self"!==l){var d,f;let e,r;return d=t||"",f=l,(e=document.createElement("a")).href=d,e.target=f,(r=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r),new t7(null)}let p=window.open(t||"",l,h);g(p,e,"popup-blocked");try{p.focus()}catch(e){}return new t7(p)}(e,l,ty())}async _openRedirect(e,t,r,n){var i;return await this._originValidation(e),i=await rt(e,t,r,y(),n),tw().location.href=i,new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){var r;let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(r="If manager is not set, promise should be",n||m(r),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await t8(e),r=new tW(e);return t.register("authEvent",t=>(g(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rr,{type:rr},r=>{var n;let i=null==(n=null==r?void 0:r[0])?void 0:n[rr];void 0!==i&&t(!!i),h(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=t0(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ea()||Z()||es()}};var ri="@firebase/auth",rs="0.23.2";class ra{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null==(e=this.auth.currentUser)?void 0:e.uid)||null}async getToken(e){return(this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser)?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){g(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}let ro=(0,r.getExperimentalSetting)("authIdTokenMaxAge")||300,rl=null;function ru(e=(0,n.getApp)()){let t=(0,n._getProvider)(e,"auth");if(t.isInitialized())return t.getImmediate();let i=function(e,t){let i=(0,n._getProvider)(e,"auth");if(i.isInitialized()){let e=i.getImmediate(),n=i.getOptions();if((0,r.deepEqual)(n,null!=t?t:{}))return e;h(e,"already-initialized")}return i.initialize({options:t})}(e,{popupRedirectResolver:rn,persistence:[tD,tp,tg]}),s=(0,r.getExperimentalSetting)("authTokenSyncURL");if(s){let e=async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>ro)return;let n=null==t?void 0:t.token;rl!==n&&(rl=n,await fetch(s,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};(0,r.getModularInstance)(i).beforeAuthStateChanged(e,()=>e(i.currentUser)),tc(i,t=>e(t))}let a=(0,r.getDefaultEmulatorHost)("auth");return a&&function(e,t,r){let n=ey(e);g(n._canInitEmulator,n,"emulator-config-failed"),g(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");let i=ew(t),{host:s,port:a}=function(e){let t=ew(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};let n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){let e=i[1];return{host:e,port:eb(n.substr(e.length+1))}}{let[e,t]=n.split(":");return{host:e,port:eb(t)}}}(t),o=null===a?"":`:${a}`;n.config.emulator={url:`${i}//${s}${o}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:s,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:!1})}),function(){function e(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(i,`http://${a}`),i}t="Browser",(0,n._registerComponent)(new a.Component("auth",(e,{options:r})=>{let n,i,s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=s.options;g(l&&!l.includes(":"),"invalid-api-key",{appName:s.name});let c=new em(s,a,o,{apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eo(t)});return i=(Array.isArray(n=(null==r?void 0:r.persistence)||[])?n:[n]).map(G),(null==r?void 0:r.errorMap)&&c._updateErrorMap(r.errorMap),c._initializeWithPersistence(i,null==r?void 0:r.popupRedirectResolver),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),(0,n._registerComponent)(new a.Component("auth-internal",e=>new ra(ey(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,n.registerVersion)(ri,rs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),(0,n.registerVersion)(ri,rs,"esm2017"),e.s([],44353),e.s([],64376),e.i(44353),e.s(["FacebookAuthProvider",()=>eH,"GithubAuthProvider",()=>eG,"GoogleAuthProvider",()=>eK,"OAuthProvider",()=>ez,"TwitterAuthProvider",()=>eW,"createUserWithEmailAndPassword",()=>e7,"getAuth",()=>ru,"onAuthStateChanged",()=>th,"onIdTokenChanged",()=>tc,"sendEmailVerification",()=>tn,"sendPasswordResetEmail",()=>e9,"sendSignInLinkToEmail",()=>tt,"signInWithEmailAndPassword",()=>te,"signInWithEmailLink",()=>tr,"signInWithPopup",()=>tB,"updateEmail",()=>to,"updatePassword",()=>tl,"updateProfile",()=>ta,"verifyBeforeUpdateEmail",()=>ti],85498)},15754,83274,e=>{"use strict";var t=e.i(3251);(0,t.registerVersion)("firebase","9.23.0","app"),e.s([],15754),e.i(60283),e.s(["initializeApp",()=>t.initializeApp],83274)},38770,59385,81516,e=>{"use strict";e.i(15754);var t,r,n,i,s,a,o,l,u,c,h=e.i(83274);e.i(64376);var d=e.i(85498);e.i(50461);var f,p=e.i(3251),g=e.i(53431),m=e.i(92859),y=e.i(60283),v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:e.g,w={},b=b||{},_=v||self;function E(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function I(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function T(e,t,r){return e.call.apply(e.bind,arguments)}function S(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function C(e,t,r){return(C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?T:S).apply(null,arguments)}function A(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function k(e,t){function r(){}r.prototype=t.prototype,e.$=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.ac=function(e,r,n){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[r].apply(e,i)}}function R(){this.s=this.s,this.o=this.o}R.prototype.s=!1,R.prototype.sa=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};let N=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let r=0;r<e.length;r++)if(r in e&&e[r]===t)return r;return -1};function D(e){let t=e.length;if(0<t){let r=Array(t);for(let n=0;n<t;n++)r[n]=e[n];return r}return[]}function O(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];if(E(r)){let t=e.length||0,n=r.length||0;e.length=t+n;for(let i=0;i<n;i++)e[t+i]=r[i]}else e.push(r)}}function x(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!_.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{_.addEventListener("test",()=>{},t),_.removeEventListener("test",()=>{},t)}catch(e){}return e}();function L(e){return/^[\s\xa0]*$/.test(e)}function M(){var e=_.navigator;return e&&(e=e.userAgent)?e:""}function F(e){return -1!=M().indexOf(e)}function U(e){return U[" "](e),e}U[" "]=function(){};var V=F("Opera"),j=F("Trident")||F("MSIE"),B=F("Edge"),$=B||j,q=F("Gecko")&&!(-1!=M().toLowerCase().indexOf("webkit")&&!F("Edge"))&&!(F("Trident")||F("MSIE"))&&!F("Edge"),z=-1!=M().toLowerCase().indexOf("webkit")&&!F("Edge");function H(){var e=_.document;return e?e.documentMode:void 0}e:{var K,G="",W=(K=M(),q?/rv:([^\);]+)(\)|;)/.exec(K):B?/Edge\/([\d\.]+)/.exec(K):j?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(K):z?/WebKit\/(\S+)/.exec(K):V?/(?:Version)[ \/]?(\S+)/.exec(K):void 0);if(W&&(G=W?W[1]:""),j){var Q=H();if(null!=Q&&Q>parseFloat(G)){i=String(Q);break e}}i=G}var Y=s=_.document&&j&&(H()||parseInt(i,10))||void 0;function X(e,t){if(x.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var r=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(q){e:{try{U(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==r?t=e.fromElement:"mouseout"==r&&(t=e.toElement);this.relatedTarget=t,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:J[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&X.$.h.call(this)}}k(X,x);var J={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Z="closure_listenable_"+(1e6*Math.random()|0),ee=0;function et(e,t,r,n,i){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!n,this.la=i,this.key=++ee,this.fa=this.ia=!1}function er(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function en(e,t,r){for(let n in e)t.call(r,e[n],n,e)}function ei(e){let t={};for(let r in e)t[r]=e[r];return t}let es="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ea(e,t){let r,n;for(let t=1;t<arguments.length;t++){for(r in n=arguments[t])e[r]=n[r];for(let t=0;t<es.length;t++)r=es[t],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}function eo(e){this.src=e,this.g={},this.h=0}function el(e,t){var r=t.type;if(r in e.g){var n,i=e.g[r],s=N(i,t);(n=0<=s)&&Array.prototype.splice.call(i,s,1),n&&(er(t),0==e.g[r].length&&(delete e.g[r],e.h--))}}function eu(e,t,r,n){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&!!r==s.capture&&s.la==n)return i}return -1}eo.prototype.add=function(e,t,r,n,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=eu(e,t,n,i);return -1<a?(t=e[a],r||(t.ia=!1)):((t=new et(t,this.src,s,!!n,i)).ia=r,e.push(t)),t};var ec="closure_lm_"+(1e6*Math.random()|0),eh={};function ed(e,t,r,n,i,s){if(!t)throw Error("Invalid event type");var a=I(i)?!!i.capture:!!i,o=em(e);if(o||(e[ec]=o=new eo(e)),(r=o.add(t,r,n,a,s)).proxy)return r;if(n=function e(t){return eg.call(e.src,e.listener,t)},r.proxy=n,n.src=e,n.listener=r,e.addEventListener)P||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),n,i);else if(e.attachEvent)e.attachEvent(ep(t.toString()),n);else if(e.addListener&&e.removeListener)e.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function ef(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Z])el(t.i,e);else{var r=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(r,n,e.capture):t.detachEvent?t.detachEvent(ep(r),n):t.addListener&&t.removeListener&&t.removeListener(n),(r=em(t))?(el(r,e),0==r.h&&(r.src=null,t[ec]=null)):er(e)}}}function ep(e){return e in eh?eh[e]:eh[e]="on"+e}function eg(e,t){if(e.fa)e=!0;else{t=new X(t,this);var r=e.listener,n=e.la||e.src;e.ia&&ef(e),e=r.call(n,t)}return e}function em(e){return(e=e[ec])instanceof eo?e:null}var ey="__closure_events_fn_"+(1e9*Math.random()>>>0);function ev(e){return"function"==typeof e?e:(e[ey]||(e[ey]=function(t){return e.handleEvent(t)}),e[ey])}function ew(){R.call(this),this.i=new eo(this),this.S=this,this.J=null}function eb(e,t){var r,n=e.J;if(n)for(r=[];n;n=n.J)r.push(n);if(e=e.S,n=t.type||t,"string"==typeof t)t=new x(t,e);else if(t instanceof x)t.target=t.target||e;else{var i=t;ea(t=new x(n,e),i)}if(i=!0,r)for(var s=r.length-1;0<=s;s--){var a=t.g=r[s];i=e_(a,n,!0,t)&&i}if(i=e_(a=t.g=e,n,!0,t)&&i,i=e_(a,n,!1,t)&&i,r)for(s=0;s<r.length;s++)i=e_(a=t.g=r[s],n,!1,t)&&i}function e_(e,t,r,n){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.fa&&a.capture==r){var o=a.listener,l=a.la||a.src;a.ia&&el(e.i,a),i=!1!==o.call(l,n)&&i}}return i&&!n.defaultPrevented}k(ew,R),ew.prototype[Z]=!0,ew.prototype.removeEventListener=function(e,t,r,n){!function e(t,r,n,i,s){if(Array.isArray(r))for(var a=0;a<r.length;a++)e(t,r[a],n,i,s);else(i=I(i)?!!i.capture:!!i,n=ev(n),t&&t[Z])?(t=t.i,(r=String(r).toString())in t.g&&-1<(n=eu(a=t.g[r],n,i,s))&&(er(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete t.g[r],t.h--))):t&&(t=em(t))&&(r=t.g[r.toString()],t=-1,r&&(t=eu(r,n,i,s)),(n=-1<t?r[t]:null)&&ef(n))}(this,e,t,r,n)},ew.prototype.N=function(){if(ew.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)er(r[n]);delete t.g[e],t.h--}}this.J=null},ew.prototype.O=function(e,t,r,n){return this.i.add(String(e),t,!1,r,n)},ew.prototype.P=function(e,t,r,n){return this.i.add(String(e),t,!0,r,n)};var eE=_.JSON.stringify,eI=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new eT,e=>e.reset());class eT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let eS,eC=!1,eA=new class{constructor(){this.h=this.g=null}add(e,t){let r=eI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},ek=()=>{let e=_.Promise.resolve(void 0);eS=()=>{e.then(eR)}};var eR=()=>{let e;for(var t;e=null,eA.g&&(e=eA.g,eA.g=eA.g.next,eA.g||(eA.h=null),e.next=null),t=e;){try{t.h.call(t.g)}catch(e){!function(e){_.setTimeout(()=>{throw e},0)}(e)}eI.j(t),100>eI.h&&(eI.h++,t.next=eI.g,eI.g=t)}eC=!1};function eN(e,t){ew.call(this),this.h=e||1,this.g=t||_,this.j=C(this.qb,this),this.l=Date.now()}function eD(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function eO(e,t,r){if("function"==typeof e)r&&(e=C(e,r));else if(e&&"function"==typeof e.handleEvent)e=C(e.handleEvent,e);else throw Error("Invalid listener argument");return 0x7fffffff<Number(t)?-1:_.setTimeout(e,t||0)}k(eN,ew),(f=eN.prototype).ga=!1,f.T=null,f.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),eb(this,"tick"),this.ga&&(eD(this),this.start()))}},f.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},f.N=function(){eN.$.N.call(this),eD(this),delete this.g};class ex extends R{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=eO(()=>{t.g=null,t.i&&(t.i=!1,e(t))},t.j);let r=t.h;t.h=null,t.m.apply(null,r)}(this)}N(){super.N(),this.g&&(_.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eP(e){R.call(this),this.h=e,this.g={}}k(eP,R);var eL=[];function eM(e,t,r,n){Array.isArray(r)||(r&&(eL[0]=r.toString()),r=eL);for(var i=0;i<r.length;i++){var s=function e(t,r,n,i,s){if(i&&i.once)return function e(t,r,n,i,s){if(Array.isArray(r)){for(var a=0;a<r.length;a++)e(t,r[a],n,i,s);return null}return n=ev(n),t&&t[Z]?t.P(r,n,I(i)?!!i.capture:!!i,s):ed(t,r,n,!0,i,s)}(t,r,n,i,s);if(Array.isArray(r)){for(var a=0;a<r.length;a++)e(t,r[a],n,i,s);return null}return n=ev(n),t&&t[Z]?t.O(r,n,I(i)?!!i.capture:!!i,s):ed(t,r,n,!1,i,s)}(t,r[i],n||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function eF(e){en(e.g,function(e,t){this.g.hasOwnProperty(t)&&ef(e)},e),e.g={}}function eU(){this.g=!0}function eV(e,t,r,n){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var r=JSON.parse(t);if(r){for(e=0;e<r.length;e++)if(Array.isArray(r[e])){var n=r[e];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}}return eE(r)}catch(e){return t}}(e,r)+(n?" "+n:"")})}eP.prototype.N=function(){eP.$.N.call(this),eF(this)},eP.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},eU.prototype.Ea=function(){this.g=!1},eU.prototype.info=function(){};var ej={},eB=null;function e$(){return eB=eB||new ew}function eq(e){x.call(this,ej.Ta,e)}function ez(e){let t=e$();eb(t,new eq(t))}function eH(e,t){x.call(this,ej.STAT_EVENT,e),this.stat=t}function eK(e){let t=e$();eb(t,new eH(t,e))}function eG(e,t){x.call(this,ej.Ua,e),this.size=t}function eW(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return _.setTimeout(function(){e()},t)}ej.Ta="serverreachability",k(eq,x),ej.STAT_EVENT="statevent",k(eH,x),ej.Ua="timingevent",k(eG,x);var eQ={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},eY={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function eX(){}function eJ(e){return e.h||(e.h=e.i())}function eZ(){}eX.prototype.h=null;var e0={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function e1(){x.call(this,"d")}function e2(){x.call(this,"c")}function e3(){}function e4(e,t,r,n){this.l=e,this.j=t,this.m=r,this.W=n||1,this.U=new eP(this),this.P=e6,e=$?125:void 0,this.V=new eN(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new e5}function e5(){this.i=null,this.g="",this.h=!1}k(e1,x),k(e2,x),k(e3,eX),e3.prototype.g=function(){return new XMLHttpRequest},e3.prototype.i=function(){return{}},a=new e3;var e6=45e3,e8={},e9={};function e7(e,t,r){e.L=1,e.v=ty(td(t)),e.s=r,e.S=!0,te(e,null)}function te(e,t){e.G=Date.now(),tn(e),e.A=td(e.v);var r,n,i,s,a,o,l=e.A,u=e.W;Array.isArray(u)||(u=[String(u)]),tN(l.i,"t",u),e.C=0,l=e.l.J,e.h=new e5,e.g=rw(e.l,l?t:null,!e.s),0<e.O&&(e.M=new ex(C(e.Pa,e,e.g),e.O)),eM(e.U,e.g,"readystatechange",e.nb),t=e.I?ei(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),ez(),r=e.j,n=e.u,i=e.A,s=e.m,a=e.W,o=e.s,r.info(function(){if(r.g)if(o)for(var e="",t=o.split("&"),l=0;l<t.length;l++){var u=t[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");e=2<=h.length&&"type"==h[1]?e+(c+"=")+u+"&":e+(c+"=redacted&")}}else e=null;else e=o;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+n+"\n"+i+"\n"+e})}function tt(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.l.Ha}function tr(e,t,r){let n=!0,i;for(;!e.J&&e.C<r.length;)if((i=function(e,t){var r=e.C,n=t.indexOf("\n",r);return -1==n?e9:isNaN(r=Number(t.substring(r,n)))?e8:(n+=1)+r>t.length?e9:(t=t.slice(n,n+r),e.C=n+r,t)}(e,r))==e9){4==t&&(e.o=4,eK(14),n=!1),eV(e.j,e.m,null,"[Incomplete Response]");break}else if(i==e8){e.o=4,eK(15),eV(e.j,e.m,r,"[Invalid Chunk]"),n=!1;break}else eV(e.j,e.m,i,null),tl(e,i);tt(e)&&i!=e9&&i!=e8&&(e.h.g="",e.C=0),4!=t||0!=r.length||e.h.h||(e.o=1,eK(16),n=!1),e.i=e.i&&n,n?0<r.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+r.length),rh(t),t.M=!0,eK(11))):(eV(e.j,e.m,r,"[Invalid Chunked Response]"),to(e),ta(e))}function tn(e){e.Y=Date.now()+e.P,ti(e,e.P)}function ti(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=eW(C(e.lb,e),t)}function ts(e){e.B&&(_.clearTimeout(e.B),e.B=null)}function ta(e){0==e.l.H||e.J||rp(e.l,e)}function to(e){ts(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,eD(e.V),eF(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function tl(e,t){try{var r=e.l;if(0!=r.H&&(r.g==e||tF(r.i,e))){if(!e.K&&tF(r.i,e)&&3==r.H){try{var n=r.Ja.g.parse(t)}catch(e){n=null}if(Array.isArray(n)&&3==n.length){var i=n;if(0==i[0]){e:if(!r.u){if(r.g)if(r.g.G+3e3<e.G)rf(r),rn(r);else break e;rc(r),eK(18)}}else r.Fa=i[1],0<r.Fa-r.V&&37500>i[2]&&r.G&&0==r.A&&!r.v&&(r.v=eW(C(r.ib,r),6e3));if(1>=tM(r.i)&&r.oa){try{r.oa()}catch(e){}r.oa=void 0}}else rm(r,11)}else if((e.K||r.g==e)&&rf(r),!L(t))for(i=r.Ja.g.parse(t),t=0;t<i.length;t++){let o=i[t];if(r.V=o[0],o=o[1],2==r.H)if("c"==o[0]){r.K=o[1],r.pa=o[2];let t=o[3];null!=t&&(r.ra=t,r.l.info("VER="+r.ra));let i=o[4];null!=i&&(r.Ga=i,r.l.info("SVER="+r.Ga));let l=o[5];null!=l&&"number"==typeof l&&0<l&&(r.L=n=1.5*l,r.l.info("backChannelRequestTimeoutMs_="+n)),n=r;let u=e.g;if(u){let e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=n.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(tU(s,s.h),s.h=null))}if(n.F){let e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(n.Da=e,tm(n.I,n.F,e))}}if(r.H=3,r.h&&r.h.Ba(),r.ca&&(r.S=Date.now()-e.G,r.l.info("Handshake RTT: "+r.S+"ms")),(n=r).wa=rv(n,n.J?n.pa:null,n.Y),e.K){tV(n.i,e);var a=n.L;a&&e.setTimeout(a),e.B&&(ts(e),tn(e)),n.g=e}else ru(n);0<r.j.length&&rs(r)}else"stop"!=o[0]&&"close"!=o[0]||rm(r,7);else 3==r.H&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?rm(r,7):rr(r):"noop"!=o[0]&&r.h&&r.h.Aa(o),r.A=0)}}ez(4)}catch(e){}}function tu(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(E(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var r=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(E(e)||"string"==typeof e){var t=[];e=e.length;for(var r=0;r<e;r++)t.push(r);return t}for(let n in t=[],r=0,e)t[r++]=n;return t}}}(e),n=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(E(e)){for(var t=[],r=e.length,n=0;n<r;n++)t.push(e[n]);return t}for(n in t=[],r=0,e)t[r++]=e[n];return t}(e),i=n.length,s=0;s<i;s++)t.call(void 0,n[s],r&&r[s],e)}(f=e4.prototype).setTimeout=function(e){this.P=e},f.nb=function(e){e=e.target;let t=this.M;t&&3==t6(e)?t.l():this.Pa(e)},f.Pa=function(e){try{if(e==this.g)e:{let m=t6(this.g);var t=this.g.Ia();let y=this.g.da();if(!(3>m)&&(3!=m||$||this.g&&(this.h.h||this.g.ja()||t8(this.g)))){this.J||4!=m||7==t||(8==t||0>=y?ez(3):ez(2)),ts(this);var r=this.g.da();this.ca=r;t:if(tt(this)){var n=t8(this.g);e="";var i=n.length,s=4==t6(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){to(this),ta(this);var a="";break t}this.h.i=new _.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(n[t],{stream:s&&t==i-1});n.splice(0,i),this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=200==r,o=this.j,l=this.u,u=this.A,c=this.m,h=this.W,d=r,o.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+h+"]: "+l+"\n"+u+"\n"+m+" "+d}),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,l,u,c,h,d,f,p=this.g;if((f=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(f)){var g=f;break t}}g=null}if(r=g)eV(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tl(this,r);else{this.i=!1,this.o=3,eK(12),to(this),ta(this);break e}}this.S?(tr(this,m,a),$&&this.i&&3==m&&(eM(this.U,this.V,"tick",this.mb),this.V.start())):(eV(this.j,this.m,a,null),tl(this,a)),4==m&&to(this),this.i&&!this.J&&(4==m?rp(this.l,this):(this.i=!1,tn(this)))}else(function(e){let t={};e=(e.g&&2<=t6(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let n=0;n<e.length;n++){if(L(e[n]))continue;var r=function(e){var t=1;e=e.split(":");let r=[];for(;0<t&&e.length;)r.push(e.shift()),t--;return e.length&&r.push(e.join(":")),r}(e[n]);let i=r[0];if("string"!=typeof(r=r[1]))continue;r=r.trim();let s=t[i]||[];t[i]=s,s.push(r)}var n=function(e){return e.join(", ")};for(let e in t)n.call(void 0,t[e],e,t)})(this.g),400==r&&0<a.indexOf("Unknown SID")?(this.o=3,eK(12)):(this.o=0,eK(13)),to(this),ta(this)}}}catch(e){}finally{}},f.mb=function(){if(this.g){var e=t6(this.g),t=this.g.ja();this.C<t.length&&(ts(this),tr(this,e,t),this.i&&4!=e&&tn(this))}},f.cancel=function(){this.J=!0,to(this)},f.lb=function(){var e,t;this.B=null;let r=Date.now();0<=r-this.Y?(e=this.j,t=this.A,e.info(function(){return"TIMEOUT: "+t}),2!=this.L&&(ez(),eK(17)),to(this),this.o=2,ta(this)):ti(this,this.Y-r)};var tc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function th(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof th){this.h=e.h,tf(this,e.j),this.s=e.s,this.g=e.g,tp(this,e.m),this.l=e.l;var t=e.i,r=new tC;r.i=t.i,t.g&&(r.g=new Map(t.g),r.h=t.h),tg(this,r),this.o=e.o}else e&&(t=String(e).match(tc))?(this.h=!1,tf(this,t[1]||"",!0),this.s=tv(t[2]||""),this.g=tv(t[3]||"",!0),tp(this,t[4]),this.l=tv(t[5]||"",!0),tg(this,t[6]||"",!0),this.o=tv(t[7]||"")):(this.h=!1,this.i=new tC(null,this.h))}function td(e){return new th(e)}function tf(e,t,r){e.j=r?tv(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function tp(e,t){if(t){if(isNaN(t=Number(t))||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function tg(e,t,r){var n,i;t instanceof tC?(e.i=t,n=e.i,(i=e.h)&&!n.j&&(tA(n),n.i=null,n.g.forEach(function(e,t){var r=t.toLowerCase();t!=r&&(tk(this,t),tN(this,r,e))},n)),n.j=i):(r||(t=tw(t,tT)),e.i=new tC(t,e.h))}function tm(e,t,r){e.i.set(t,r)}function ty(e){return tm(e,"zx",Math.floor(0x80000000*Math.random()).toString(36)+Math.abs(Math.floor(0x80000000*Math.random())^Date.now()).toString(36)),e}function tv(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function tw(e,t,r){return"string"==typeof e?(e=encodeURI(e).replace(t,tb),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function tb(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}th.prototype.toString=function(){var e=[],t=this.j;t&&e.push(tw(t,t_,!0),":");var r=this.g;return(r||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(tw(t,t_,!0),"@"),e.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&e.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&e.push("/"),e.push(tw(r,"/"==r.charAt(0)?tI:tE,!0))),(r=this.i.toString())&&e.push("?",r),(r=this.o)&&e.push("#",tw(r,tS)),e.join("")};var t_=/[#\/\?@]/g,tE=/[#\?:]/g,tI=/[#\?]/g,tT=/[#\?@]/g,tS=/#/g;function tC(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function tA(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var r=0;r<e.length;r++){var n=e[r].indexOf("="),i=null;if(0<=n){var s=e[r].substring(0,n);i=e[r].substring(n+1)}else s=e[r];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,r){e.add(decodeURIComponent(t.replace(/\+/g," ")),r)}))}function tk(e,t){tA(e),t=tD(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function tR(e,t){return tA(e),t=tD(e,t),e.g.has(t)}function tN(e,t,r){tk(e,t),0<r.length&&(e.i=null,e.g.set(tD(e,t),D(r)),e.h+=r.length)}function tD(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(f=tC.prototype).add=function(e,t){tA(this),this.i=null,e=tD(this,e);var r=this.g.get(e);return r||this.g.set(e,r=[]),r.push(t),this.h+=1,this},f.forEach=function(e,t){tA(this),this.g.forEach(function(r,n){r.forEach(function(r){e.call(t,r,n,this)},this)},this)},f.ta=function(){tA(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),r=[];for(let n=0;n<t.length;n++){let i=e[n];for(let e=0;e<i.length;e++)r.push(t[n])}return r},f.Z=function(e){tA(this);let t=[];if("string"==typeof e)tR(this,e)&&(t=t.concat(this.g.get(tD(this,e))));else{e=Array.from(this.g.values());for(let r=0;r<e.length;r++)t=t.concat(e[r])}return t},f.set=function(e,t){return tA(this),this.i=null,tR(this,e=tD(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},f.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},f.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(var r=0;r<t.length;r++){var n=t[r];let s=encodeURIComponent(String(n)),a=this.Z(n);for(n=0;n<a.length;n++){var i=s;""!==a[n]&&(i+="="+encodeURIComponent(String(a[n]))),e.push(i)}}return this.i=e.join("&")};var tO=class{constructor(e,t){this.g=e,this.map=t}};function tx(e){this.l=e||tP,e=_.PerformanceNavigationTiming?0<(e=_.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(_.g&&_.g.Ka&&_.g.Ka()&&_.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var tP=10;function tL(e){return!!e.h||!!e.g&&e.g.size>=e.j}function tM(e){return e.h?1:e.g?e.g.size:0}function tF(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function tU(e,t){e.g?e.g.add(t):e.h=t}function tV(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function tj(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(let r of e.g.values())t=t.concat(r.F);return t}return D(e.i)}tx.prototype.cancel=function(){if(this.i=tj(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let e of this.g.values())e.cancel();this.g.clear()}};var tB=class{stringify(e){return _.JSON.stringify(e,void 0)}parse(e){return _.JSON.parse(e,void 0)}};function t$(){this.g=new tB}function tq(e,t,r,n,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(n)}catch(e){}}function tz(e){this.l=e.fc||null,this.j=e.ob||!1}function tH(e,t){ew.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=tK,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}k(tz,eX),tz.prototype.g=function(){return new tH(this.l,this.j)},tz.prototype.i=(t={},function(){return t}),k(tH,ew);var tK=0;function tG(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function tW(e){e.readyState=4,e.l=null,e.j=null,e.A=null,tQ(e)}function tQ(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(f=tH.prototype).open=function(e,t){if(this.readyState!=tK)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,tQ(this)},f.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||_).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},f.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tW(this)),this.readyState=tK},f.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tQ(this)),this.g&&(this.readyState=3,tQ(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==_.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tG(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},f.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?tW(this):tQ(this),3==this.readyState&&tG(this)}},f.Za=function(e){this.g&&(this.response=this.responseText=e,tW(this))},f.Ya=function(e){this.g&&(this.response=e,tW(this))},f.ka=function(){this.g&&tW(this)},f.setRequestHeader=function(e,t){this.v.append(e,t)},f.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},f.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var r=t.next();!r.done;)e.push((r=r.value)[0]+": "+r[1]),r=t.next();return e.join("\r\n")},Object.defineProperty(tH.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var tY=_.JSON.parse;function tX(e){ew.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=tJ,this.L=this.M=!1}k(tX,ew);var tJ="",tZ=/^https?$/i,t0=["POST","PUT"];function t1(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,t2(e),t4(e)}function t2(e){e.F||(e.F=!0,eb(e,"complete"),eb(e,"error"))}function t3(e){if(e.h&&void 0!==b&&(!e.C[1]||4!=t6(e)||2!=e.da())){if(e.v&&4==t6(e))eO(e.La,0,e);else if(eb(e,"readystatechange"),4==t6(e)){e.h=!1;try{let a=e.da();switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t,r,n=!0;break;default:n=!1}if(!(t=n)){if(r=0===a){var i=String(e.I).match(tc)[1]||null;!i&&_.self&&_.self.location&&(i=_.self.location.protocol.slice(0,-1)),r=!tZ.test(i?i.toLowerCase():"")}t=r}if(t)eb(e,"complete"),eb(e,"success");else{e.m=6;try{var s=2<t6(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.da()+"]",t2(e)}}finally{t4(e)}}}}function t4(e,t){if(e.g){t5(e);let r=e.g,n=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||eb(e,"ready");try{r.onreadystatechange=n}catch(e){}}}function t5(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(_.clearTimeout(e.A),e.A=null)}function t6(e){return e.g?e.g.readyState:0}function t8(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case tJ:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function t9(e){let t="";return en(e,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}function t7(e,t,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=t9(r),"string"==typeof e?null!=r&&encodeURIComponent(String(r)):tm(e,t,r))}function re(e,t,r){return r&&r.internalChannelParams&&r.internalChannelParams[e]||t}function rt(e){this.Ga=0,this.j=[],this.l=new eU,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=re("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=re("baseRetryDelayMs",5e3,e),this.hb=re("retryDelaySeedMs",1e4,e),this.eb=re("forwardChannelMaxRetries",2,e),this.xa=re("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new tx(e&&e.concurrentRequestLimit),this.Ja=new t$,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function rr(e){if(ri(e),3==e.H){var t=e.W++,r=td(e.I);if(tm(r,"SID",e.K),tm(r,"RID",t),tm(r,"TYPE","terminate"),ro(e,r),(t=new e4(e,e.l,t)).L=2,t.v=ty(td(r)),r=!1,_.navigator&&_.navigator.sendBeacon)try{r=_.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!r&&_.Image&&((new Image).src=t.v,r=!0),r||(t.g=rw(t.l,null),t.g.ha(t.v)),t.G=Date.now(),tn(t)}ry(e)}function rn(e){e.g&&(rh(e),e.g.cancel(),e.g=null)}function ri(e){rn(e),e.u&&(_.clearTimeout(e.u),e.u=null),rf(e),e.i.cancel(),e.m&&("number"==typeof e.m&&_.clearTimeout(e.m),e.m=null)}function rs(e){if(!tL(e.i)&&!e.m){e.m=!0;var t=e.Na;eS||ek(),eC||(eS(),eC=!0),eA.add(t,e),e.C=0}}function ra(e,t){var r;r=t?t.m:e.W++;let n=td(e.I);tm(n,"SID",e.K),tm(n,"RID",r),tm(n,"AID",e.V),ro(e,n),e.o&&e.s&&t7(n,e.o,e.s),r=new e4(e,e.l,r,e.C+1),null===e.o&&(r.I=e.s),t&&(e.j=t.F.concat(e.j)),t=rl(e,r,1e3),r.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),tU(e.i,r),e7(r,n,t)}function ro(e,t){e.na&&en(e.na,function(e,r){tm(t,r,e)}),e.h&&tu({},function(e,r){tm(t,r,e)})}function rl(e,t,r){r=Math.min(e.j.length,r);var n=e.h?C(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){let e=["count="+r];-1==t?0<r?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<r;a++){let r=i[a].g,o=i[a].map;if(0>(r-=t))t=Math.max(0,i[a].g-100),s=!1;else try{!function(e,t,r){let n=r||"";try{tu(e,function(e,r){let i=e;I(e)&&(i=eE(e)),t.push(n+r+"="+encodeURIComponent(i))})}catch(e){throw t.push(n+"type="+encodeURIComponent("_badmap")),e}}(o,e,"req"+r+"_")}catch(e){n&&n(o)}}if(s){n=e.join("&");break e}}}return t.F=e=e.j.splice(0,r),n}function ru(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;eS||ek(),eC||(eS(),eC=!0),eA.add(t,e),e.A=0}}function rc(e){return!e.g&&!e.u&&!(3<=e.A)&&(e.ba++,e.u=eW(C(e.Ma,e),rg(e,e.A)),e.A++,!0)}function rh(e){null!=e.B&&(_.clearTimeout(e.B),e.B=null)}function rd(e){e.g=new e4(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=td(e.wa);tm(t,"RID","rpc"),tm(t,"SID",e.K),tm(t,"AID",e.V),tm(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&tm(t,"TO",e.qa),tm(t,"TYPE","xmlhttp"),ro(e,t),e.o&&e.s&&t7(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var r=e.g;e=e.pa,r.L=1,r.v=ty(td(t)),r.s=null,r.S=!0,te(r,e)}function rf(e){null!=e.v&&(_.clearTimeout(e.v),e.v=null)}function rp(e,t){var r,n=null;if(e.g==t){rf(e),rh(e),e.g=null;var i=2}else{if(!tF(e.i,t))return;n=t.F,tV(e.i,t),i=1}if(0!=e.H){if(t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.G;var s=e.C;eb(i=e$(),new eG(i,n)),rs(e)}else ru(e);else if(3==(s=t.o)||0==s&&0<t.ca||!(1==i&&(r=t,!(tM(e.i)>=e.i.j-!!e.m)&&(e.m?(e.j=r.F.concat(e.j),!0):1!=e.H&&2!=e.H&&!(e.C>=(e.cb?0:e.eb))&&(e.m=eW(C(e.Na,e,r),rg(e,e.C)),e.C++,!0)))||2==i&&rc(e)))switch(n&&0<n.length&&((t=e.i).i=t.i.concat(n)),s){case 1:rm(e,5);break;case 4:rm(e,10);break;case 3:rm(e,6);break;default:rm(e,2)}}}function rg(e,t){let r=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(r*=2),r*t}function rm(e,t){if(e.l.info("Error code "+t),2==t){var r=null;e.h&&(r=null);var n=C(e.pb,e);r||(r=new th("//www.google.com/images/cleardot.gif"),_.location&&"http"==_.location.protocol||tf(r,"https"),ty(r));var i=r.toString();let t=new eU;if(_.Image){let e=new Image;e.onload=A(tq,t,e,"TestLoadImage: loaded",!0,n),e.onerror=A(tq,t,e,"TestLoadImage: error",!1,n),e.onabort=A(tq,t,e,"TestLoadImage: abort",!1,n),e.ontimeout=A(tq,t,e,"TestLoadImage: timeout",!1,n),_.setTimeout(function(){e.ontimeout&&e.ontimeout()},1e4),e.src=i}else n(!1)}else eK(2);e.H=0,e.h&&e.h.za(t),ry(e),ri(e)}function ry(e){if(e.H=0,e.ma=[],e.h){let t=tj(e.i);(0!=t.length||0!=e.j.length)&&(O(e.ma,t),O(e.ma,e.j),e.i.i.length=0,D(e.j),e.j.length=0),e.h.ya()}}function rv(e,t,r){var n=r instanceof th?td(r):new th(r);if(""!=n.g)t&&(n.g=t+"."+n.g),tp(n,n.m);else{var i=_.location;n=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new th(null);n&&tf(s,n),t&&(s.g=t),i&&tp(s,i),r&&(s.l=r),n=s}return r=e.F,t=e.Da,r&&t&&tm(n,r,t),tm(n,"VER",e.ra),ro(e,n),n}function rw(e,t,r){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new tX(r&&e.Ha&&!e.va?new tz({ob:!0}):e.va)).Oa(e.J),t}function rb(){}function r_(){if(j&&!(10<=Number(Y)))throw Error("Environmental error: no available transport.")}function rE(e,t){ew.call(this),this.g=new rt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!L(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!L(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new rS(this)}function rI(e){e1.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(let r in t){e=r;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function rT(){e2.call(this),this.status=1}function rS(e){this.g=e}function rC(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function rA(e,t,r){r||(r=0);var n=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)n[i]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^r&(i^s))+n[0]+0xd76aa478|0;a=s+(i^(t=r+(a<<7|a>>>25))&(r^i))+n[1]+0xe8c7b756|0,a=i+(r^(s=t+(a<<12|a>>>20))&(t^r))+n[2]+0x242070db|0,a=r+(t^(i=s+(a<<17|a>>>15))&(s^t))+n[3]+0xc1bdceee|0,a=t+(s^(r=i+(a<<22|a>>>10))&(i^s))+n[4]+0xf57c0faf|0,a=s+(i^(t=r+(a<<7|a>>>25))&(r^i))+n[5]+0x4787c62a|0,a=i+(r^(s=t+(a<<12|a>>>20))&(t^r))+n[6]+0xa8304613|0,a=r+(t^(i=s+(a<<17|a>>>15))&(s^t))+n[7]+0xfd469501|0,a=t+(s^(r=i+(a<<22|a>>>10))&(i^s))+n[8]+0x698098d8|0,a=s+(i^(t=r+(a<<7|a>>>25))&(r^i))+n[9]+0x8b44f7af|0,a=i+(r^(s=t+(a<<12|a>>>20))&(t^r))+n[10]+0xffff5bb1|0,a=r+(t^(i=s+(a<<17|a>>>15))&(s^t))+n[11]+0x895cd7be|0,a=t+(s^(r=i+(a<<22|a>>>10))&(i^s))+n[12]+0x6b901122|0,a=s+(i^(t=r+(a<<7|a>>>25))&(r^i))+n[13]+0xfd987193|0,a=i+(r^(s=t+(a<<12|a>>>20))&(t^r))+n[14]+0xa679438e|0,a=r+(t^(i=s+(a<<17|a>>>15))&(s^t))+n[15]+0x49b40821|0,r=i+(a<<22|a>>>10),a=t+(i^s&(r^i))+n[1]+0xf61e2562|0,t=r+(a<<5|a>>>27),a=s+(r^i&(t^r))+n[6]+0xc040b340|0,s=t+(a<<9|a>>>23),a=i+(t^r&(s^t))+n[11]+0x265e5a51|0,i=s+(a<<14|a>>>18),a=r+(s^t&(i^s))+n[0]+0xe9b6c7aa|0,r=i+(a<<20|a>>>12),a=t+(i^s&(r^i))+n[5]+0xd62f105d|0,t=r+(a<<5|a>>>27),a=s+(r^i&(t^r))+n[10]+0x2441453|0,s=t+(a<<9|a>>>23),a=i+(t^r&(s^t))+n[15]+0xd8a1e681|0,i=s+(a<<14|a>>>18),a=r+(s^t&(i^s))+n[4]+0xe7d3fbc8|0,r=i+(a<<20|a>>>12),a=t+(i^s&(r^i))+n[9]+0x21e1cde6|0,t=r+(a<<5|a>>>27),a=s+(r^i&(t^r))+n[14]+0xc33707d6|0,s=t+(a<<9|a>>>23),a=i+(t^r&(s^t))+n[3]+0xf4d50d87|0,i=s+(a<<14|a>>>18),a=r+(s^t&(i^s))+n[8]+0x455a14ed|0,r=i+(a<<20|a>>>12),a=t+(i^s&(r^i))+n[13]+0xa9e3e905|0,t=r+(a<<5|a>>>27),a=s+(r^i&(t^r))+n[2]+0xfcefa3f8|0,s=t+(a<<9|a>>>23),a=i+(t^r&(s^t))+n[7]+0x676f02d9|0,i=s+(a<<14|a>>>18),a=r+(s^t&(i^s))+n[12]+0x8d2a4c8a|0,a=t+((r=i+(a<<20|a>>>12))^i^s)+n[5]+0xfffa3942|0,a=s+((t=r+(a<<4|a>>>28))^r^i)+n[8]+0x8771f681|0,a=i+((s=t+(a<<11|a>>>21))^t^r)+n[11]+0x6d9d6122|0,a=r+((i=s+(a<<16|a>>>16))^s^t)+n[14]+0xfde5380c|0,a=t+((r=i+(a<<23|a>>>9))^i^s)+n[1]+0xa4beea44|0,a=s+((t=r+(a<<4|a>>>28))^r^i)+n[4]+0x4bdecfa9|0,a=i+((s=t+(a<<11|a>>>21))^t^r)+n[7]+0xf6bb4b60|0,a=r+((i=s+(a<<16|a>>>16))^s^t)+n[10]+0xbebfbc70|0,a=t+((r=i+(a<<23|a>>>9))^i^s)+n[13]+0x289b7ec6|0,a=s+((t=r+(a<<4|a>>>28))^r^i)+n[0]+0xeaa127fa|0,a=i+((s=t+(a<<11|a>>>21))^t^r)+n[3]+0xd4ef3085|0,a=r+((i=s+(a<<16|a>>>16))^s^t)+n[6]+0x4881d05|0,a=t+((r=i+(a<<23|a>>>9))^i^s)+n[9]+0xd9d4d039|0,a=s+((t=r+(a<<4|a>>>28))^r^i)+n[12]+0xe6db99e5|0,a=i+((s=t+(a<<11|a>>>21))^t^r)+n[15]+0x1fa27cf8|0,a=r+((i=s+(a<<16|a>>>16))^s^t)+n[2]+0xc4ac5665|0,r=i+(a<<23|a>>>9),a=t+(i^(r|~s))+n[0]+0xf4292244|0,t=r+(a<<6|a>>>26),a=s+(r^(t|~i))+n[7]+0x432aff97|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~r))+n[14]+0xab9423a7|0,i=s+(a<<15|a>>>17),a=r+(s^(i|~t))+n[5]+0xfc93a039|0,r=i+(a<<21|a>>>11),a=t+(i^(r|~s))+n[12]+0x655b59c3|0,t=r+(a<<6|a>>>26),a=s+(r^(t|~i))+n[3]+0x8f0ccc92|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~r))+n[10]+0xffeff47d|0,i=s+(a<<15|a>>>17),a=r+(s^(i|~t))+n[1]+0x85845dd1|0,r=i+(a<<21|a>>>11),a=t+(i^(r|~s))+n[8]+0x6fa87e4f|0,t=r+(a<<6|a>>>26),a=s+(r^(t|~i))+n[15]+0xfe2ce6e0|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~r))+n[6]+0xa3014314|0,i=s+(a<<15|a>>>17),a=r+(s^(i|~t))+n[13]+0x4e0811a1|0,r=i+(a<<21|a>>>11),a=t+(i^(r|~s))+n[4]+0xf7537e82|0,t=r+(a<<6|a>>>26),a=s+(r^(t|~i))+n[11]+0xbd3af235|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~r))+n[2]+0x2ad7d2bb|0,i=s+(a<<15|a>>>17),a=r+(s^(i|~t))+n[9]+0xeb86d391|0,e.g[0]=e.g[0]+t|0,e.g[1]=e.g[1]+(i+(a<<21|a>>>11))|0,e.g[2]=e.g[2]+i|0,e.g[3]=e.g[3]+s|0}function rk(e,t){this.h=t;for(var r=[],n=!0,i=e.length-1;0<=i;i--){var s=0|e[i];n&&s==t||(r[i]=s,n=!1)}this.g=r}(f=tX.prototype).Oa=function(e){this.M=e},f.ha=function(e,t,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():a.g(),this.C=this.u?eJ(this.u):eJ(a),this.g.onreadystatechange=C(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(e){t1(this,e);return}if(e=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var i in n)r.set(i,n[i]);else if("function"==typeof n.keys&&"function"==typeof n.get)for(let e of n.keys())r.set(e,n.get(e));else throw Error("Unknown input type for opt_headers: "+String(n));for(let[s,a]of(n=Array.from(r.keys()).find(e=>"content-type"==e.toLowerCase()),i=_.FormData&&e instanceof _.FormData,!(0<=N(t0,t))||n||i||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r))this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{var s;t5(this),0<this.B&&((this.L=(s=this.g,j&&"number"==typeof s.timeout&&void 0!==s.ontimeout))?(this.g.timeout=this.B,this.g.ontimeout=C(this.ua,this)):this.A=eO(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){t1(this,e)}},f.ua=function(){void 0!==b&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,eb(this,"timeout"),this.abort(8))},f.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,eb(this,"complete"),eb(this,"abort"),t4(this))},f.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),t4(this,!0)),tX.$.N.call(this)},f.La=function(){this.s||(this.G||this.v||this.l?t3(this):this.kb())},f.kb=function(){t3(this)},f.isActive=function(){return!!this.g},f.da=function(){try{return 2<t6(this)?this.g.status:-1}catch(e){return -1}},f.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},f.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),tY(t)}},f.Ia=function(){return this.m},f.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(f=rt.prototype).ra=8,f.H=1,f.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;let i=new e4(this,this.l,e),s=this.s;if(this.U&&(s?ea(s=ei(s),this.U):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,r=0;r<this.j.length;r++){t:{var n=this.j[r];if("__data__"in n.map&&"string"==typeof(n=n.map.__data__)){n=n.length;break t}n=void 0}if(void 0===n)break;if(4096<(t+=n)){t=r;break e}if(4096===t||r===this.j.length-1){t=r+1;break e}}t=1e3}else t=1e3;t=rl(this,i,t),tm(r=td(this.I),"RID",e),tm(r,"CVER",22),this.F&&tm(r,"X-HTTP-Session-Id",this.F),ro(this,r),s&&(this.O?t="headers="+encodeURIComponent(String(t9(s)))+"&"+t:this.o&&t7(r,this.o,s)),tU(this.i,i),this.bb&&tm(r,"TYPE","init"),this.P?(tm(r,"$req",t),tm(r,"SID","null"),i.aa=!0,e7(i,r,null)):e7(i,r,t),this.H=2}}else 3==this.H&&(e?ra(this,e):0==this.j.length||tL(this.i)||ra(this))},f.Ma=function(){if(this.u=null,rd(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=eW(C(this.jb,this),e)}},f.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,eK(10),rn(this),rd(this))},f.ib=function(){null!=this.v&&(this.v=null,rn(this),rc(this),eK(19))},f.pb=function(e){e?(this.l.info("Successfully pinged google.com"),eK(2)):(this.l.info("Failed to ping google.com"),eK(1))},f.isActive=function(){return!!this.h&&this.h.isActive(this)},(f=rb.prototype).Ba=function(){},f.Aa=function(){},f.za=function(){},f.ya=function(){},f.isActive=function(){return!0},f.Va=function(){},r_.prototype.g=function(e,t){return new rE(e,t)},k(rE,ew),rE.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,r=this.h||void 0;eK(0),e.Y=t,e.na=r||{},e.G=e.aa,e.I=rv(e,null,e.Y),rs(e)},rE.prototype.close=function(){rr(this.g)},rE.prototype.u=function(e){var t=this.g;if("string"==typeof e){var r={};r.__data__=e,e=r}else this.v&&((r={}).__data__=eE(e),e=r);t.j.push(new tO(t.fb++,e)),3==t.H&&rs(t)},rE.prototype.N=function(){this.g.h=null,delete this.j,rr(this.g),delete this.g,rE.$.N.call(this)},k(rI,e1),k(rT,e2),k(rS,rb),rS.prototype.Ba=function(){eb(this.g,"a")},rS.prototype.Aa=function(e){eb(this.g,new rI(e))},rS.prototype.za=function(e){eb(this.g,new rT)},rS.prototype.ya=function(){eb(this.g,"b")},k(rC,function(){this.blockSize=-1}),rC.prototype.reset=function(){this.g[0]=0x67452301,this.g[1]=0xefcdab89,this.g[2]=0x98badcfe,this.g[3]=0x10325476,this.i=this.h=0},rC.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,n=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=r;)rA(this,e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(n[i++]=e.charCodeAt(s++),i==this.blockSize){rA(this,n),i=0;break}}else for(;s<t;)if(n[i++]=e[s++],i==this.blockSize){rA(this,n),i=0;break}}this.h=i,this.i+=t},rC.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var r=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&r,r/=256;for(this.j(e),e=Array(16),t=r=0;4>t;++t)for(var n=0;32>n;n+=8)e[r++]=this.g[t]>>>n&255;return e};var rR={};function rN(e){var t;return -128<=e&&128>e?(t=function(e){return new rk([0|e],0>e?-1:0)},Object.prototype.hasOwnProperty.call(rR,e)?rR[e]:rR[e]=t(e)):new rk([0|e],0>e?-1:0)}function rD(e){if(isNaN(e)||!isFinite(e))return rx;if(0>e)return rU(rD(-e));for(var t=[],r=1,n=0;e>=r;n++)t[n]=e/r|0,r*=rO;return new rk(t,0)}var rO=0x100000000,rx=rN(0),rP=rN(1),rL=rN(0x1000000);function rM(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function rF(e){return -1==e.h}function rU(e){for(var t=e.g.length,r=[],n=0;n<t;n++)r[n]=~e.g[n];return new rk(r,~e.h).add(rP)}function rV(e,t){return e.add(rU(t))}function rj(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function rB(e,t){this.g=e,this.h=t}function r$(e,t){if(rM(t))throw Error("division by zero");if(rM(e))return new rB(rx,rx);if(rF(e))return t=r$(rU(e),t),new rB(rU(t.g),rU(t.h));if(rF(t))return t=r$(e,rU(t)),new rB(rU(t.g),t.h);if(30<e.g.length){if(rF(e)||rF(t))throw Error("slowDivide_ only works with positive integers.");for(var r=rP,n=t;0>=n.X(e);)r=rq(r),n=rq(n);var i=rz(r,1),s=rz(n,1);for(n=rz(n,2),r=rz(r,2);!rM(n);){var a=s.add(n);0>=a.X(e)&&(i=i.add(r),s=a),n=rz(n,1),r=rz(r,1)}return t=rV(e,i.R(t)),new rB(i,t)}for(i=rx;0<=e.X(t);){for(n=48>=(n=Math.ceil(Math.log(r=Math.max(1,Math.floor(e.ea()/t.ea())))/Math.LN2))?1:Math.pow(2,n-48),a=(s=rD(r)).R(t);rF(a)||0<a.X(e);)r-=n,a=(s=rD(r)).R(t);rM(s)&&(s=rP),i=i.add(s),e=rV(e,a)}return new rB(i,e)}function rq(e){for(var t=e.g.length+1,r=[],n=0;n<t;n++)r[n]=e.D(n)<<1|e.D(n-1)>>>31;return new rk(r,e.h)}function rz(e,t){var r=t>>5;t%=32;for(var n=e.g.length-r,i=[],s=0;s<n;s++)i[s]=0<t?e.D(s+r)>>>t|e.D(s+r+1)<<32-t:e.D(s+r);return new rk(i,e.h)}(f=rk.prototype).ea=function(){if(rF(this))return-rU(this).ea();for(var e=0,t=1,r=0;r<this.g.length;r++){var n=this.D(r);e+=(0<=n?n:rO+n)*t,t*=rO}return e},f.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(rM(this))return"0";if(rF(this))return"-"+rU(this).toString(e);for(var t=rD(Math.pow(e,6)),r=this,n="";;){var i=r$(r,t).g,s=((0<(r=rV(r,i.R(t))).g.length?r.g[0]:r.h)>>>0).toString(e);if(rM(r=i))return s+n;for(;6>s.length;)s="0"+s;n=s+n}},f.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},f.X=function(e){return rF(e=rV(this,e))?-1:+!rM(e)},f.abs=function(){return rF(this)?rU(this):this},f.add=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0,i=0;i<=t;i++){var s=n+(65535&this.D(i))+(65535&e.D(i)),a=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);n=a>>>16,s&=65535,a&=65535,r[i]=a<<16|s}return new rk(r,-0x80000000&r[r.length-1]?-1:0)},f.R=function(e){if(rM(this)||rM(e))return rx;if(rF(this))return rF(e)?rU(this).R(rU(e)):rU(rU(this).R(e));if(rF(e))return rU(this.R(rU(e)));if(0>this.X(rL)&&0>e.X(rL))return rD(this.ea()*e.ea());for(var t=this.g.length+e.g.length,r=[],n=0;n<2*t;n++)r[n]=0;for(n=0;n<this.g.length;n++)for(var i=0;i<e.g.length;i++){var s=this.D(n)>>>16,a=65535&this.D(n),o=e.D(i)>>>16,l=65535&e.D(i);r[2*n+2*i]+=a*l,rj(r,2*n+2*i),r[2*n+2*i+1]+=s*l,rj(r,2*n+2*i+1),r[2*n+2*i+1]+=a*o,rj(r,2*n+2*i+1),r[2*n+2*i+2]+=s*o,rj(r,2*n+2*i+2)}for(n=0;n<t;n++)r[n]=r[2*n+1]<<16|r[2*n];for(n=t;n<2*t;n++)r[n]=0;return new rk(r,0)},f.gb=function(e){return r$(this,e).h},f.and=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)&e.D(n);return new rk(r,this.h&e.h)},f.or=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)|e.D(n);return new rk(r,this.h|e.h)},f.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)^e.D(n);return new rk(r,this.h^e.h)},r_.prototype.createWebChannel=r_.prototype.g,rE.prototype.send=rE.prototype.u,rE.prototype.open=rE.prototype.m,rE.prototype.close=rE.prototype.close,eQ.NO_ERROR=0,eQ.TIMEOUT=8,eQ.HTTP_ERROR=6,eY.COMPLETE="complete",eZ.EventType=e0,e0.OPEN="a",e0.CLOSE="b",e0.ERROR="c",e0.MESSAGE="d",ew.prototype.listen=ew.prototype.O,tX.prototype.listenOnce=tX.prototype.P,tX.prototype.getLastError=tX.prototype.Sa,tX.prototype.getLastErrorCode=tX.prototype.Ia,tX.prototype.getStatus=tX.prototype.da,tX.prototype.getResponseJson=tX.prototype.Wa,tX.prototype.getResponseText=tX.prototype.ja,tX.prototype.send=tX.prototype.ha,tX.prototype.setWithCredentials=tX.prototype.Oa,rC.prototype.digest=rC.prototype.l,rC.prototype.reset=rC.prototype.reset,rC.prototype.update=rC.prototype.j,rk.prototype.add=rk.prototype.add,rk.prototype.multiply=rk.prototype.R,rk.prototype.modulo=rk.prototype.gb,rk.prototype.compare=rk.prototype.X,rk.prototype.toNumber=rk.prototype.ea,rk.prototype.toString=rk.prototype.toString,rk.prototype.getBits=rk.prototype.D,rk.fromNumber=rD,rk.fromString=function e(t,r){if(0==t.length)throw Error("number format error: empty string");if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if("-"==t.charAt(0))return rU(e(t.substring(1),r));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=rD(Math.pow(r,8)),i=rx,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+a),r);8>a?(a=rD(Math.pow(r,a)),i=i.R(a).add(rD(o))):i=(i=i.R(n)).add(rD(o))}return i};var rH=w.createWebChannelTransport=function(){return new r_},rK=w.getStatEventTarget=function(){return e$()},rG=w.ErrorCode=eQ,rW=w.EventType=eY,rQ=w.Event=ej,rY=w.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},rX=w.FetchXmlHttpFactory=tz,rJ=w.WebChannel=eZ,rZ=w.XhrIo=tX,r0=w.Md5=rC,r1=w.Integer=rk;let r2="@firebase/firestore";class r3{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}r3.UNAUTHENTICATED=new r3(null),r3.GOOGLE_CREDENTIALS=new r3("google-credentials-uid"),r3.FIRST_PARTY=new r3("first-party-uid"),r3.MOCK_USER=new r3("mock-user");let r4="9.23.0",r5=new m.Logger("@firebase/firestore");function r6(){return r5.logLevel}function r8(e,...t){if(r5.logLevel<=m.LogLevel.DEBUG){let r=t.map(ne);r5.debug(`Firestore (${r4}): ${e}`,...r)}}function r9(e,...t){if(r5.logLevel<=m.LogLevel.ERROR){let r=t.map(ne);r5.error(`Firestore (${r4}): ${e}`,...r)}}function r7(e,...t){if(r5.logLevel<=m.LogLevel.WARN){let r=t.map(ne);r5.warn(`Firestore (${r4}): ${e}`,...r)}}function ne(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function nt(e="Unexpected state"){let t=`FIRESTORE (${r4}) INTERNAL ASSERTION FAILED: `+e;throw r9(t),Error(t)}let nr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nn extends y.FirebaseError{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ni{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ns{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class na{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(r3.UNAUTHENTICATED))}shutdown(){}}class no{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nl{constructor(e){this.t=e,this.currentUser=r3.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,n=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve(),i=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ni,e.enqueueRetryable(()=>n(this.currentUser))};let s=()=>{let t=i;e.enqueueRetryable(async()=>{await t.promise,await n(this.currentUser)})},a=e=>{r8("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?a(e):(r8("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ni)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(r8("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?("string"==typeof t.accessToken||nt(),new ns(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return null===e||"string"==typeof e||nt(),new r3(e)}}class nu{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=r3.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);let e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class nc{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new nu(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(r3.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nd{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){let r=e=>{null!=e.error&&r8("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let r=e.token!==this.T;return this.T=e.token,r8("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>r(t))};let n=e=>{r8("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){let e=this.I.getImmediate({optional:!0});e?n(e):r8("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?("string"==typeof e.token||nt(),this.T=e.token,new nh(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class nf{static A(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let n=function(e){let t="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let e=0;e<40;e++)r[e]=Math.floor(256*Math.random());return r}(0);for(let i=0;i<n.length;++i)r.length<20&&n[i]<t&&(r+=e.charAt(n[i]%e.length))}return r}}function np(e,t){return e<t?-1:+(e>t)}function ng(e,t,r){return e.length===t.length&&e.every((e,n)=>r(e,t[n]))}class nm{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new nn(nr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-0xe7791f700||e>=0x3afff44180)throw new nn(nr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nm.fromMillis(Date.now())}static fromDate(e){return nm.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new nm(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?np(this.nanoseconds,e.nanoseconds):np(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -0xe7791f700).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ny{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ny(e)}static min(){return new ny(new nm(0,0))}static max(){return new ny(new nm(0x3afff4417f,0x3b9ac9ff))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class nv{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===nv.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof nv?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let n=0;n<r;n++){let r=e.get(n),i=t.get(n);if(r<i)return -1;if(r>i)return 1}return e.length<t.length?-1:+(e.length>t.length)}}class nw extends nv{construct(e,t,r){return new nw(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new nn(nr.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(e=>e.length>0))}return new nw(t)}static emptyPath(){return new nw([])}}let nb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class n_ extends nv{construct(e,t,r){return new n_(e,t,r)}static isValidIdentifier(e){return nb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n_.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new n_(["__name__"])}static fromServerFormat(e){let t=[],r="",n=0,i=()=>{if(0===r.length)throw new nn(nr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;n<e.length;){let t=e[n];if("\\"===t){if(n+1===e.length)throw new nn(nr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[n+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new nn(nr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,n+=2}else"`"===t?s=!s:"."!==t||s?r+=t:i(),n++}if(i(),s)throw new nn(nr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n_(t)}static emptyPath(){return new n_([])}}class nE{constructor(e){this.path=e}static fromPath(e){return new nE(nw.fromString(e))}static fromName(e){return new nE(nw.fromString(e).popFirst(5))}static empty(){return new nE(nw.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nw.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nw.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nE(new nw(e.slice()))}}class nI{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new nI(ny.min(),nE.empty(),-1)}static max(){return new nI(ny.max(),nE.empty(),-1)}}class nT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function nS(e){if(e.code!==nr.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;r8("LocalStore","Unexpectedly lost primary lease")}class nC{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new nC((r,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,n)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof nC?t:nC.resolve(t)}catch(e){return nC.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):nC.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):nC.reject(t)}static resolve(e){return new nC((t,r)=>{t(e)})}static reject(e){return new nC((t,r)=>{r(e)})}static waitFor(e){return new nC((t,r)=>{let n=0,i=0,s=!1;e.forEach(e=>{++n,e.next(()=>{++i,s&&i===n&&t()},e=>r(e))}),s=!0,i===n&&t()})}static or(e){let t=nC.resolve(!1);for(let r of e)t=t.next(e=>e?nC.resolve(e):r());return t}static forEach(e,t){let r=[];return e.forEach((e,n)=>{r.push(t.call(this,e,n))}),this.waitFor(r)}static mapArray(e,t){return new nC((r,n)=>{let i=e.length,s=Array(i),a=0;for(let o=0;o<i;o++){let l=o;t(e[l]).next(e=>{s[l]=e,++a===i&&r(s)},e=>n(e))}})}static doWhile(e,t){return new nC((r,n)=>{let i=()=>{!0===e()?t().next(()=>{i()},n):r()};i()})}}function nA(e){return"IndexedDbTransactionError"===e.name}class nk{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ut&&this.ut(e),e}}function nR(e){return 0===e&&1/e==-1/0}function nN(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function nD(e,t){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function nO(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}nk.ct=-1;class nx{constructor(e,t){this.comparator=e,this.root=t||nL.EMPTY}insert(e,t){return new nx(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nL.BLACK,null,null))}remove(e){return new nx(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nL.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let n=this.comparator(e,r.key);if(0===n)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nP(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nP(this.root,e,this.comparator,!1)}getReverseIterator(){return new nP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nP(this.root,e,this.comparator,!0)}}class nP{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nL{constructor(e,t,r,n,i){this.key=e,this.value=t,this.color=null!=r?r:nL.RED,this.left=null!=n?n:nL.EMPTY,this.right=null!=i?i:nL.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,i){return new nL(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this,i=r(e,n.key);return(n=i<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===i?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r))).fixUp()}removeMin(){if(this.left.isEmpty())return nL.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let r,n=this;if(0>t(e,n.key))n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key)){if(n.right.isEmpty())return nL.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,nL.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,nL.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();let e=this.left.check();if(e!==this.right.check())throw nt();return e+ +!this.isRed()}}nL.EMPTY=null,nL.RED=!0,nL.BLACK=!1,nL.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(e,t,r,n,i){return this}insert(e,t,r){return new nL(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nM{constructor(e){this.comparator=e,this.data=new nx(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nF(this.data.getIterator())}getIteratorFrom(e){return new nF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof nM)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new nM(this.comparator);return t.data=e,t}}class nF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class nU{constructor(e){this.fields=e,e.sort(n_.comparator)}static empty(){return new nU([])}unionWith(e){let t=new nM(n_.comparator);for(let e of this.fields)t=t.add(e);for(let r of e)t=t.add(r);return new nU(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ng(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class nV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nj{constructor(e){this.binaryString=e}static fromBase64String(e){return new nj(function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new nV("Invalid base64 string: "+e):e}}(e))}static fromUint8Array(e){return new nj(function(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){var e=this.binaryString;let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return np(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nj.EMPTY_BYTE_STRING=new nj("");let nB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function n$(e){if(e||nt(),"string"==typeof e){let t=0,r=nB.exec(e);if(r||nt(),r[1]){let e=r[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:nq(e.seconds),nanos:nq(e.nanos)}}function nq(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function nz(e){return"string"==typeof e?nj.fromBase64String(e):nj.fromUint8Array(e)}function nH(e){var t,r;return"server_timestamp"===(null==(r=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{}).__type__)?void 0:r.stringValue)}function nK(e){let t=e.mapValue.fields.__previous_value__;return nH(t)?nK(t):t}function nG(e){let t=n$(e.mapValue.fields.__local_write_time__.timestampValue);return new nm(t.seconds,t.nanos)}class nW{constructor(e,t,r,n,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class nQ{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nQ("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nQ&&e.projectId===this.projectId&&e.database===this.database}}let nY={};function nX(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?nH(e)?4:ie(e)?0x1fffffffffffff:10:nt()}function nJ(e,t){if(e===t)return!0;let r=nX(e);if(r!==nX(t))return!1;switch(r){case 0:case 0x1fffffffffffff:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return nG(e).isEqual(nG(t));case 3:if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=n$(e.timestampValue),i=n$(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos;case 5:return e.stringValue===t.stringValue;case 6:return nz(e.bytesValue).isEqual(nz(t.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return nq(e.geoPointValue.latitude)===nq(t.geoPointValue.latitude)&&nq(e.geoPointValue.longitude)===nq(t.geoPointValue.longitude);case 2:if("integerValue"in e&&"integerValue"in t)return nq(e.integerValue)===nq(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let r=nq(e.doubleValue),n=nq(t.doubleValue);return r===n?nR(r)===nR(n):isNaN(r)&&isNaN(n)}return!1;case 9:return ng(e.arrayValue.values||[],t.arrayValue.values||[],nJ);case 10:let s=e.mapValue.fields||{},a=t.mapValue.fields||{};if(nN(s)!==nN(a))return!1;for(let e in s)if(s.hasOwnProperty(e)&&(void 0===a[e]||!nJ(s[e],a[e])))return!1;return!0;default:return nt()}}function nZ(e,t){return void 0!==(e.values||[]).find(e=>nJ(e,t))}function n0(e,t){var r,n,i,s;if(e===t)return 0;let a=nX(e),o=nX(t);if(a!==o)return np(a,o);switch(a){case 0:case 0x1fffffffffffff:return 0;case 1:return np(e.booleanValue,t.booleanValue);case 2:let l,u;return l=nq(e.integerValue||e.doubleValue),l<(u=nq(t.integerValue||t.doubleValue))?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1;case 3:return n1(e.timestampValue,t.timestampValue);case 4:return n1(nG(e),nG(t));case 5:return np(e.stringValue,t.stringValue);case 6:let c,h;return r=e.bytesValue,n=t.bytesValue,c=nz(r),h=nz(n),c.compareTo(h);case 7:return function(e,t){let r=e.split("/"),n=t.split("/");for(let e=0;e<r.length&&e<n.length;e++){let t=np(r[e],n[e]);if(0!==t)return t}return np(r.length,n.length)}(e.referenceValue,t.referenceValue);case 8:let d;return i=e.geoPointValue,s=t.geoPointValue,0!==(d=np(nq(i.latitude),nq(s.latitude)))?d:np(nq(i.longitude),nq(s.longitude));case 9:return function(e,t){let r=e.values||[],n=t.values||[];for(let e=0;e<r.length&&e<n.length;++e){let t=n0(r[e],n[e]);if(t)return t}return np(r.length,n.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===nY&&t===nY)return 0;if(e===nY)return 1;if(t===nY)return -1;let r=e.fields||{},n=Object.keys(r),i=t.fields||{},s=Object.keys(i);n.sort(),s.sort();for(let e=0;e<n.length&&e<s.length;++e){let t=np(n[e],s[e]);if(0!==t)return t;let a=n0(r[n[e]],i[s[e]]);if(0!==a)return a}return np(n.length,s.length)}(e.mapValue,t.mapValue);default:throw nt()}}function n1(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return np(e,t);let r=n$(e),n=n$(t),i=np(r.seconds,n.seconds);return 0!==i?i:np(r.nanos,n.nanos)}function n2(e){var t,r;let n;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(n=n$(e.timestampValue),`time(${n.seconds},${n.nanos})`):"stringValue"in e?e.stringValue:"bytesValue"in e?nz(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,nE.fromName(r).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",r=!0;for(let n of e.values||[])r?r=!1:t+=",",t+=n2(n);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){let t=Object.keys(e.fields||{}).sort(),r="{",n=!0;for(let i of t)n?n=!1:r+=",",r+=`${i}:${n2(e.fields[i])}`;return r+"}"}(e.mapValue):nt()}function n3(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function n4(e){return!!e&&"integerValue"in e}function n5(e){return!!e&&"arrayValue"in e}function n6(e){return!!e&&"nullValue"in e}function n8(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function n9(e){return!!e&&"mapValue"in e}function n7(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return nD(e.mapValue.fields,(e,r)=>t.mapValue.fields[e]=n7(r)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=n7(e.arrayValue.values[r]);return t}return Object.assign({},e)}function ie(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class it{constructor(e){this.value=e}static empty(){return new it({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(!n9(t=(t.mapValue.fields||{})[e.get(r)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=n7(t)}setAll(e){let t=n_.emptyPath(),r={},n=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,r,n),r={},n=[],t=i.popLast()}e?r[i.lastSegment()]=n7(e):n.push(i.lastSegment())});let i=this.getFieldsMap(t);this.applyChanges(i,r,n)}delete(e){let t=this.field(e.popLast());n9(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nJ(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=t.mapValue.fields[e.get(r)];n9(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,r){for(let n of(nD(t,(t,r)=>e[t]=r),r))delete e[n]}clone(){return new it(n7(this.value))}}class ir{constructor(e,t,r,n,i,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=n,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new ir(e,0,ny.min(),ny.min(),ny.min(),it.empty(),0)}static newFoundDocument(e,t,r,n){return new ir(e,1,t,ny.min(),r,n,0)}static newNoDocument(e,t){return new ir(e,2,t,ny.min(),ny.min(),it.empty(),0)}static newUnknownDocument(e,t){return new ir(e,3,t,ny.min(),ny.min(),it.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(ny.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=it.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=it.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ny.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ii{constructor(e,t){this.position=e,this.inclusive=t}}function is(e,t,r){let n=0;for(let i=0;i<e.position.length;i++){let s=t[i],a=e.position[i];if(n=s.field.isKeyField()?nE.comparator(nE.fromName(a.referenceValue),r.key):n0(a,r.data.field(s.field)),"desc"===s.dir&&(n*=-1),0!==n)break}return n}function ia(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!nJ(e.position[r],t.position[r]))return!1;return!0}class io{constructor(e,t="asc"){this.field=e,this.dir=t}}class il{}class iu extends il{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new ip(e,t,r):"array-contains"===t?new iv(e,r):"in"===t?new iw(e,r):"not-in"===t?new ib(e,r):"array-contains-any"===t?new i_(e,r):new iu(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new ig(e,r):new im(e,r)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(n0(t,this.value)):null!==t&&nX(this.value)===nX(t)&&this.matchesComparison(n0(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ic extends il{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new ic(e,t)}matches(e){return ih(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){let e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(let t of this.getFlattenedFilters())if(e(t))return t;return null}}function ih(e){return"and"===e.op}function id(e){for(let t of e.filters)if(t instanceof ic)return!1;return!0}class ip extends iu{constructor(e,t,r){super(e,t,r),this.key=nE.fromName(r.referenceValue)}matches(e){let t=nE.comparator(e.key,this.key);return this.matchesComparison(t)}}class ig extends iu{constructor(e,t){super(e,"in",t),this.keys=iy("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class im extends iu{constructor(e,t){super(e,"not-in",t),this.keys=iy("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function iy(e,t){var r;return((null==(r=t.arrayValue)?void 0:r.values)||[]).map(e=>nE.fromName(e.referenceValue))}class iv extends iu{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return n5(t)&&nZ(t.arrayValue,this.value)}}class iw extends iu{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&nZ(this.value.arrayValue,t)}}class ib extends iu{constructor(e,t){super(e,"not-in",t)}matches(e){if(nZ(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&!nZ(this.value.arrayValue,t)}}class i_ extends iu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!n5(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>nZ(this.value.arrayValue,e))}}class iE{constructor(e,t=null,r=[],n=[],i=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=s,this.endAt=a,this.dt=null}}function iI(e,t=null,r=[],n=[],i=null,s=null,a=null){return new iE(e,t,r,n,i,s,a)}function iT(e){if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(e=>(function e(t){if(t instanceof iu)return t.field.canonicalString()+t.op.toString()+n2(t.value);if(id(t)&&ih(t))return t.filters.map(t=>e(t)).join(",");{let r=t.filters.map(t=>e(t)).join(",");return`${t.op}(${r})`}})(e)).join(","),t+="|ob:",t+=e.orderBy.map(e=>e.field.canonicalString()+e.dir).join(","),null==e.limit||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>n2(e)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>n2(e)).join(",")),e.dt=t}return e.dt}function iS(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++){var r,n;if(r=e.orderBy[i],n=t.orderBy[i],!(r.dir===n.dir&&r.field.isEqual(n.field)))return!1}if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!function e(t,r){return t instanceof iu?r instanceof iu&&t.op===r.op&&t.field.isEqual(r.field)&&nJ(t.value,r.value):t instanceof ic?r instanceof ic&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((t,n,i)=>t&&e(n,r.filters[i]),!0):void nt()}(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ia(e.startAt,t.startAt)&&ia(e.endAt,t.endAt)}function iC(e){return nE.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class iA{constructor(e,t=null,r=[],n=[],i=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=n,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.wt=null,this._t=null,this.startAt,this.endAt}}function ik(e){return new iA(e)}function iR(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function iN(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function iD(e){for(let t of e.filters){let e=t.getFirstInequalityField();if(null!==e)return e}return null}function iO(e){return null!==e.collectionGroup}function ix(e){if(null===e.wt){e.wt=[];let t=iD(e),r=iN(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new io(t)),e.wt.push(new io(n_.keyField(),"asc"));else{let t=!1;for(let r of e.explicitOrderBy)e.wt.push(r),r.field.isKeyField()&&(t=!0);if(!t){let t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new io(n_.keyField(),t))}}}return e.wt}function iP(e){if(!e._t)if("F"===e.limitType)e._t=iI(e.path,e.collectionGroup,ix(e),e.filters,e.limit,e.startAt,e.endAt);else{let t=[];for(let r of ix(e)){let e="desc"===r.dir?"asc":"desc";t.push(new io(r.field,e))}let r=e.endAt?new ii(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new ii(e.startAt.position,e.startAt.inclusive):null;e._t=iI(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}return e._t}function iL(e,t){t.getFirstInequalityField(),iD(e);let r=e.filters.concat([t]);return new iA(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function iM(e,t,r){return new iA(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function iF(e,t){return iS(iP(e),iP(t))&&e.limitType===t.limitType}function iU(e){return`${iT(iP(e))}|lt:${e.limitType}`}function iV(e){var t;let r;return`Query(target=${r=(t=iP(e)).path.canonicalString(),null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(e=>(function e(t){return t instanceof iu?`${t.field.canonicalString()} ${t.op} ${n2(t.value)}`:t instanceof ic?t.op.toString()+" {"+t.getFilters().map(e).join(" ,")+"}":"Filter"})(e)).join(", ")}]`),null==t.limit||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(e=>`${e.field.canonicalString()} (${e.dir})`).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(e=>n2(e)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(e=>n2(e)).join(",")),`Target(${r})`}; limitType=${e.limitType})`}function ij(e,t){var r,n,i,s;let a,o,l;return t.isFoundDocument()&&(a=t.key.path,null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(a):nE.isDocumentKey(e.path)?e.path.isEqual(a):e.path.isImmediateParentOf(a))&&function(e,t){for(let r of ix(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}(e,t)&&function(e,t){for(let r of e.filters)if(!r.matches(t))return!1;return!0}(e,t)&&(r=e,n=t,(!r.startAt||(i=r.startAt,o=is(i,ix(r),n),i.inclusive?!!(o<=0):!!(o<0)))&&(!r.endAt||(s=r.endAt,l=is(s,ix(r),n),s.inclusive?!!(l>=0):!!(l>0))))}function iB(e){return(t,r)=>{let n=!1;for(let i of ix(e)){let e=function(e,t,r){var n;let i,s,a=e.field.isKeyField()?nE.comparator(t.key,r.key):(n=e.field,i=t.data.field(n),s=r.data.field(n),null!==i&&null!==s?n0(i,s):nt());switch(e.dir){case"asc":return a;case"desc":return -1*a;default:return nt()}}(i,t,r);if(0!==e)return e;n=n||i.field.isKeyField()}return 0}}class i${constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r){for(let[t,n]of r)if(this.equalsFn(t,e))return n}}has(e){return void 0!==this.get(e)}set(e,t){let r=this.mapKeyFn(e),n=this.inner[r];if(void 0===n)return this.inner[r]=[[e,t]],void this.innerSize++;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return void(n[r]=[e,t]);n.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return 1===r.length?delete this.inner[t]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){nD(this.inner,(t,r)=>{for(let[t,n]of r)e(t,n)})}isEmpty(){return nO(this.inner)}size(){return this.innerSize}}let iq=new nx(nE.comparator),iz=new nx(nE.comparator);function iH(...e){let t=iz;for(let r of e)t=t.insert(r.key,r);return t}function iK(e){let t=iz;return e.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function iG(){return new i$(e=>e.toString(),(e,t)=>e.isEqual(t))}let iW=new nx(nE.comparator),iQ=new nM(nE.comparator);function iY(...e){let t=iQ;for(let r of e)t=t.add(r);return t}let iX=new nM(np);function iJ(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nR(t)?"-0":t}}function iZ(e){return{integerValue:""+e}}class i0{constructor(){this._=void 0}}function i1(e,t){return e instanceof i8?n4(t)||t&&"doubleValue"in t?t:{integerValue:0}:null}class i2 extends i0{}class i3 extends i0{constructor(e){super(),this.elements=e}}function i4(e,t){let r=i7(t);for(let t of e.elements)r.some(e=>nJ(e,t))||r.push(t);return{arrayValue:{values:r}}}class i5 extends i0{constructor(e){super(),this.elements=e}}function i6(e,t){let r=i7(t);for(let t of e.elements)r=r.filter(e=>!nJ(e,t));return{arrayValue:{values:r}}}class i8 extends i0{constructor(e,t){super(),this.serializer=e,this.gt=t}}function i9(e){return nq(e.integerValue||e.doubleValue)}function i7(e){return n5(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class se{constructor(e,t){this.field=e,this.transform=t}}class st{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sn(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class si{}function ss(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new sf(e.key,sr.none()):new sl(e.key,e.data,sr.none());{let r=e.data,n=it.empty(),i=new nM(n_.comparator);for(let e of t.fields)if(!i.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?n.delete(e):n.set(e,t),i=i.add(e)}return new su(e.key,n,new nU(i.toArray()),sr.none())}}function sa(e,t,r,n){return e instanceof sl?function(e,t,r,n){if(!sn(e.precondition,t))return r;let i=e.value.clone(),s=sd(e.fieldTransforms,n,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,r,n):e instanceof su?function(e,t,r,n){if(!sn(e.precondition,t))return r;let i=sd(e.fieldTransforms,n,t),s=t.data;return(s.setAll(sc(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===r)?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,r,n):sn(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}function so(e,t){var r,n;return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=e.fieldTransforms,n=t.fieldTransforms,!!(void 0===r&&void 0===n||!(!r||!n)&&ng(r,n,(e,t)=>{var r,n;return e.field.isEqual(t.field)&&(r=e.transform,n=t.transform,r instanceof i3&&n instanceof i3||r instanceof i5&&n instanceof i5?ng(r.elements,n.elements,nJ):r instanceof i8&&n instanceof i8?nJ(r.gt,n.gt):r instanceof i2&&n instanceof i2)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class sl extends si{constructor(e,t,r,n=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class su extends si{constructor(e,t,r,n,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function sc(e){let t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){let n=e.data.field(r);t.set(r,n)}}),t}function sh(e,t,r){var n;let i=new Map;e.length===r.length||nt();for(let s=0;s<r.length;s++){let a=e[s],o=a.transform,l=t.data.field(a.field);i.set(a.field,(n=r[s],o instanceof i3?i4(o,l):o instanceof i5?i6(o,l):n))}return i}function sd(e,t,r){let n=new Map;for(let i of e){let e=i.transform,s=r.data.field(i.field);n.set(i.field,function(e,t,r){var n;let i,s,a;return e instanceof i2?(n=t,i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}},n&&nH(n)&&(n=nK(n)),n&&(i.fields.__previous_value__=n),{mapValue:i}):e instanceof i3?i4(e,t):e instanceof i5?i6(e,t):(a=i9(s=i1(e,t))+i9(e.gt),n4(s)&&n4(e.gt)?iZ(a):iJ(e.serializer,a))}(e,s,t))}return n}class sf extends si{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sp extends si{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sg{constructor(e,t,r,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let n=this.mutations[t];n.key.isEqual(e.key)&&function(e,t,r){let n,i;e instanceof sl?(n=e.value.clone(),i=sh(e.fieldTransforms,t,r.transformResults),n.setAll(i),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()):e instanceof su?function(e,t,r){if(!sn(e.precondition,t))return t.convertToUnknownDocument(r.version);let n=sh(e.fieldTransforms,t,r.transformResults),i=t.data;i.setAll(sc(e)),i.setAll(n),t.convertToFoundDocument(r.version,i).setHasCommittedMutations()}(e,t,r):t.convertToNoDocument(r.version).setHasCommittedMutations()}(n,e,r[t])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=sa(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=sa(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=iG();return this.mutations.forEach(n=>{let i=e.get(n.key),s=i.overlayedDocument,a=this.applyToLocalView(s,i.mutatedFields),o=ss(s,a=t.has(n.key)?null:a);null!==o&&r.set(n.key,o),s.isValidDocument()||s.convertToNoDocument(ny.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),iY())}isEqual(e){return this.batchId===e.batchId&&ng(this.mutations,e.mutations,(e,t)=>so(e,t))&&ng(this.baseMutations,e.baseMutations,(e,t)=>so(e,t))}}class sm{constructor(e,t,r,n){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=n}static from(e,t,r){e.mutations.length===r.length||nt();let n=iW,i=e.mutations;for(let e=0;e<i.length;e++)n=n.insert(i[e].key,r[e].version);return new sm(e,t,r,n)}}class sy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class sv{constructor(e,t){this.count=e,this.unchangedNames=t}}function sw(e){if(void 0===e)return r9("GRPC error has no .code"),nr.UNKNOWN;switch(e){case o.OK:return nr.OK;case o.CANCELLED:return nr.CANCELLED;case o.UNKNOWN:return nr.UNKNOWN;case o.DEADLINE_EXCEEDED:return nr.DEADLINE_EXCEEDED;case o.RESOURCE_EXHAUSTED:return nr.RESOURCE_EXHAUSTED;case o.INTERNAL:return nr.INTERNAL;case o.UNAVAILABLE:return nr.UNAVAILABLE;case o.UNAUTHENTICATED:return nr.UNAUTHENTICATED;case o.INVALID_ARGUMENT:return nr.INVALID_ARGUMENT;case o.NOT_FOUND:return nr.NOT_FOUND;case o.ALREADY_EXISTS:return nr.ALREADY_EXISTS;case o.PERMISSION_DENIED:return nr.PERMISSION_DENIED;case o.FAILED_PRECONDITION:return nr.FAILED_PRECONDITION;case o.ABORTED:return nr.ABORTED;case o.OUT_OF_RANGE:return nr.OUT_OF_RANGE;case o.UNIMPLEMENTED:return nr.UNIMPLEMENTED;case o.DATA_LOSS:return nr.DATA_LOSS;default:return nt()}}(l=o||(o={}))[l.OK=0]="OK",l[l.CANCELLED=1]="CANCELLED",l[l.UNKNOWN=2]="UNKNOWN",l[l.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",l[l.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",l[l.NOT_FOUND=5]="NOT_FOUND",l[l.ALREADY_EXISTS=6]="ALREADY_EXISTS",l[l.PERMISSION_DENIED=7]="PERMISSION_DENIED",l[l.UNAUTHENTICATED=16]="UNAUTHENTICATED",l[l.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",l[l.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",l[l.ABORTED=10]="ABORTED",l[l.OUT_OF_RANGE=11]="OUT_OF_RANGE",l[l.UNIMPLEMENTED=12]="UNIMPLEMENTED",l[l.INTERNAL=13]="INTERNAL",l[l.UNAVAILABLE=14]="UNAVAILABLE",l[l.DATA_LOSS=15]="DATA_LOSS";class sb{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return s_}static getOrCreateInstance(){return null===s_&&(s_=new sb),s_}onExistenceFilterMismatch(e){let t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let s_=null,sE=new r1([0xffffffff,0xffffffff],0);function sI(e){let t=(new TextEncoder).encode(e),r=new r0;return r.update(t),new Uint8Array(r.digest())}function sT(e){let t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new r1([r,n],0),new r1([i,s],0)]}class sS{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new sC(`Invalid padding: ${t}`);if(r<0||e.length>0&&0===this.hashCount)throw new sC(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new sC(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=r1.fromNumber(this.It)}Et(e,t,r){let n=e.add(t.multiply(r1.fromNumber(r)));return 1===n.compare(sE)&&(n=new r1([n.getBits(0),n.getBits(1)],0)),n.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;let[t,r]=sT(sI(e));for(let e=0;e<this.hashCount;e++){let n=this.Et(t,r,e);if(!this.At(n))return!1}return!0}static create(e,t,r){let n=new sS(new Uint8Array(Math.ceil(e/8)),e%8==0?0:8-e%8,t);return r.forEach(e=>n.insert(e)),n}insert(e){if(0===this.It)return;let[t,r]=sT(sI(e));for(let e=0;e<this.hashCount;e++){let n=this.Et(t,r,e);this.Rt(n)}}Rt(e){let t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class sC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sA{constructor(e,t,r,n,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let n=new Map;return n.set(e,sk.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new sA(ny.min(),n,new nx(np),iq,iY())}}class sk{constructor(e,t,r,n,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new sk(r,t,iY(),iY(),iY())}}class sR{constructor(e,t,r,n){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=n}}class sN{constructor(e,t){this.targetId=e,this.Vt=t}}class sD{constructor(e,t,r=nj.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=n}}class sO{constructor(){this.St=0,this.Dt=sL(),this.Ct=nj.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=iY(),t=iY(),r=iY();return this.Dt.forEach((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:r=r.add(n);break;default:nt()}}),new sk(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=sL()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class sx{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=iq,this.zt=sP(),this.Wt=new nx(np)}Ht(e){for(let t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(let t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{let r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,r)=>{this.te(r)&&t(r)})}ne(e){var t,r,n,i,s,a,o,l;let u=e.targetId,c=e.Vt.count,h=this.se(u);if(h){let d=h.target;if(iC(d))if(0===c){let e=new nE(d.path);this.Yt(u,e,ir.newNoDocument(e,ny.min()))}else 1===c||nt();else{let h=this.ie(u);if(h!==c){let c,d,f=this.re(e,h);0!==f&&(this.ee(u),this.Wt=this.Wt.insert(u,2===f?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null==(t=sb.instance)||t.notifyOnExistenceFilterMismatch((c={localCacheCount:h,existenceFilterCount:(r=e.Vt).count},(d=r.unchangedNames)&&(c.bloomFilter={applied:0===f,hashCount:null!=(n=null==d?void 0:d.hashCount)?n:0,bitmapLength:null!=(a=null==(s=null==(i=null==d?void 0:d.bits)?void 0:i.bitmap)?void 0:s.length)?a:0,padding:null!=(l=null==(o=null==d?void 0:d.bits)?void 0:o.padding)?l:0}),c))}}}}re(e,t){let r,n,{unchangedNames:i,count:s}=e.Vt;if(!i||!i.bits)return 1;let{bits:{bitmap:a="",padding:o=0},hashCount:l=0}=i;try{r=nz(a).toUint8Array()}catch(e){if(e instanceof nV)return r7("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{n=new sS(r,o,l)}catch(e){return r7(e instanceof sC?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===n.It?1:2*(s!==t-this.oe(e.targetId,n))}oe(e,t){let r=this.Gt.getRemoteKeysForTarget(e),n=0;return r.forEach(r=>{let i=this.Gt.ue(),s=`projects/${i.projectId}/databases/${i.database}/documents/${r.path.canonicalString()}`;t.vt(s)||(this.Yt(e,r,null),n++)}),n}ce(e){let t=new Map;this.Qt.forEach((r,n)=>{let i=this.se(n);if(i){if(r.current&&iC(i.target)){let t=new nE(i.target.path);null!==this.jt.get(t)||this.ae(n,t)||this.Yt(n,t,ir.newNoDocument(t,e))}r.Mt&&(t.set(n,r.Ot()),r.Ft())}});let r=iY();this.zt.forEach((e,t)=>{let n=!0;t.forEachWhile(e=>{let t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(n=!1,!1)}),n&&(r=r.add(e))}),this.jt.forEach((t,r)=>r.setReadTime(e));let n=new sA(e,t,this.Wt,this.jt,r);return this.jt=iq,this.zt=sP(),this.Wt=new nx(np),n}Jt(e,t){if(!this.te(e))return;let r=2*!!this.ae(e,t.key);this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;let n=this.Zt(e);this.ae(e,t)?n.Bt(t,1):n.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){let t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new sO,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new nM(np),this.zt=this.zt.insert(e,t)),t}te(e){let t=null!==this.se(e);return t||r8("WatchChangeAggregator","Detected inactive target",e),t}se(e){let t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new sO),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function sP(){return new nx(nE.comparator)}function sL(){return new nx(nE.comparator)}let sM={asc:"ASCENDING",desc:"DESCENDING"},sF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sU={and:"AND",or:"OR"};class sV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sj(e,t){return e.useProto3Json||null==t?t:{value:t}}function sB(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function s$(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function sq(e){let t;return e||nt(),ny.fromTimestamp(new nm((t=n$(e)).seconds,t.nanos))}function sz(e,t){return new nw(["projects",e.projectId,"databases",e.database]).child("documents").child(t).canonicalString()}function sH(e){let t=nw.fromString(e);return s0(t)||nt(),t}function sK(e,t){return sz(e.databaseId,t.path)}function sG(e,t){let r=sH(t);if(r.get(1)!==e.databaseId.projectId)throw new nn(nr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new nn(nr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new nE(sY(r))}function sW(e,t){return sz(e.databaseId,t)}function sQ(e){return new nw(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function sY(e){return e.length>4&&"documents"===e.get(4)||nt(),e.popFirst(5)}function sX(e,t,r){return{name:sK(e,t),fields:r.value.mapValue.fields}}function sJ(e){return{fieldPath:e.canonicalString()}}function sZ(e){return n_.fromServerFormat(e.fieldPath)}function s0(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class s1{constructor(e,t,r,n,i=ny.min(),s=ny.min(),a=nj.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new s1(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new s1(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new s1(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new s1(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class s2{constructor(e){this.fe=e}}class s3{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(+!!e.booleanValue);else if("integerValue"in e)this.ye(t,15),t.pe(nq(e.integerValue));else if("doubleValue"in e){let r=nq(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),nR(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(nz(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?ie(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):nt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){let r=e.fields||{};for(let e of(this.ye(t,55),Object.keys(r)))this.Te(e,t),this.me(r[e],t)}Pe(e,t){let r=e.values||[];for(let e of(this.ye(t,50),r))this.me(e,t)}ve(e,t){this.ye(t,37),nE.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}s3.Ve=new s3;class s4{constructor(){this.rn=new s5}addToCollectionParentIndex(e,t){return this.rn.add(t),nC.resolve()}getCollectionParents(e,t){return nC.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return nC.resolve()}deleteFieldIndex(e,t){return nC.resolve()}getDocumentsMatchingTarget(e,t){return nC.resolve(null)}getIndexType(e,t){return nC.resolve(0)}getFieldIndexes(e,t){return nC.resolve([])}getNextCollectionGroupToUpdate(e){return nC.resolve(null)}getMinOffset(e,t){return nC.resolve(nI.min())}getMinOffsetFromCollectionGroup(e,t){return nC.resolve(nI.min())}updateCollectionGroup(e,t,r){return nC.resolve()}updateIndexEntries(e,t){return nC.resolve()}}class s5{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t]||new nM(nw.comparator),i=!n.has(r);return this.index[t]=n.add(r),i}has(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t];return n&&n.has(r)}getEntries(e){return(this.index[e]||new nM(nw.comparator)).toArray()}}new Uint8Array(0);class s6{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new s6(e,s6.DEFAULT_COLLECTION_PERCENTILE,s6.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}s6.DEFAULT_COLLECTION_PERCENTILE=10,s6.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,s6.DEFAULT=new s6(0x2800000,s6.DEFAULT_COLLECTION_PERCENTILE,s6.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),s6.DISABLED=new s6(-1,0,0);class s8{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new s8(0)}static Mn(){return new s8(-1)}}class s9{constructor(){this.changes=new i$(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ir.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return void 0!==r?nC.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class s7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ae{constructor(e,t,r,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==r&&sa(r.mutation,e,nU.empty(),nm.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,iY()).next(()=>t))}getLocalViewOfDocuments(e,t,r=iY()){let n=iG();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,r).next(e=>{let t=iH();return e.forEach((e,r)=>{t=t.insert(e,r.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let r=iG();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,iY()))}populateOverlays(e,t,r){let n=[];return r.forEach(e=>{t.has(e)||n.push(e)}),this.documentOverlayCache.getOverlays(e,n).next(e=>{e.forEach((e,r)=>{t.set(e,r)})})}computeViews(e,t,r,n){let i=iq,s=iG(),a=iG();return t.forEach((e,t)=>{let a=r.get(t.key);n.has(t.key)&&(void 0===a||a.mutation instanceof su)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),sa(a.mutation,t,a.mutation.getFieldMask(),nm.now())):s.set(t.key,nU.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var r;return a.set(e,new s7(t,null!=(r=s.get(e))?r:null))}),a))}recalculateAndSaveOverlays(e,t){let r=iG(),n=new nx((e,t)=>e-t),i=iY();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let i of e)i.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let a=r.get(e)||nU.empty();a=i.applyToLocalView(s,a),r.set(e,a);let o=(n.get(i.batchId)||iY()).add(e);n=n.insert(i.batchId,o)})}).next(()=>{let s=[],a=n.getReverseIterator();for(;a.hasNext();){let n=a.getNext(),o=n.key,l=n.value,u=iG();l.forEach(e=>{if(!i.has(e)){let n=ss(t.get(e),r.get(e));null!==n&&u.set(e,n),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,u))}return nC.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,r){return nE.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):iO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r)}getNextDocuments(e,t,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,n).next(i=>{let s=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,n-i.size):nC.resolve(iG()),a=-1,o=i;return s.next(t=>nC.forEach(t,(t,r)=>(a<r.largestBatchId&&(a=r.largestBatchId),i.get(t)?nC.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,iY())).next(e=>({batchId:a,changes:iK(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nE(t)).next(e=>{let t=iH();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,r){let n=t.collectionGroup,i=iH();return this.indexManager.getCollectionParents(e,n).next(s=>nC.forEach(s,s=>{let a=new iA(s.child(n),null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt);return this.getDocumentsMatchingCollectionQuery(e,a,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,r){let n;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(i=>(n=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,n))).next(e=>{n.forEach((t,r)=>{let n=r.getKey();null===e.get(n)&&(e=e.insert(n,ir.newInvalidDocument(n)))});let r=iH();return e.forEach((e,i)=>{let s=n.get(e);void 0!==s&&sa(s.mutation,i,nU.empty(),nm.now()),ij(t,i)&&(r=r.insert(e,i))}),r})}}class at{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return nC.resolve(this.cs.get(t))}saveBundleMetadata(e,t){return this.cs.set(t.id,{id:t.id,version:t.version,createTime:sq(t.createTime)}),nC.resolve()}getNamedQuery(e,t){return nC.resolve(this.hs.get(t))}saveNamedQuery(e,t){var r;let n;return this.hs.set(t.name,{name:t.name,query:(n=function(e){var t,r,n,i;let s,a,o,l,u,c=4===(s=sH(e.parent)).length?nw.emptyPath():sY(s),h=e.structuredQuery,d=h.from?h.from.length:0,f=null;if(d>0){1===d||nt();let e=h.from[0];e.allDescendants?f=e.collectionId:c=c.child(e.collectionId)}let p=[];h.where&&(p=(a=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":let t=sZ(e.unaryFilter.field);return iu.create(t,"==",{doubleValue:NaN});case"IS_NULL":let r=sZ(e.unaryFilter.field);return iu.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let n=sZ(e.unaryFilter.field);return iu.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=sZ(e.unaryFilter.field);return iu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}(t):void 0!==t.fieldFilter?iu.create(sZ(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==t.compositeFilter?ic.create(t.compositeFilter.filters.map(t=>e(t)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return nt()}}(t.compositeFilter.op)):nt()}(h.where))instanceof ic&&id(t=a)&&ih(t)?a.getFilters():[a]);let g=[];h.orderBy&&(g=h.orderBy.map(e=>new io(sZ(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))));let m=null;h.limit&&(m=null==(o="object"==typeof(r=h.limit)?r.value:r)?null:o);let y=null;h.startAt&&(l=!!(n=h.startAt).before,y=new ii(n.values||[],l));let v=null;return h.endAt&&(u=!(i=h.endAt).before,v=new ii(i.values||[],u)),new iA(c,f,g,p,m,"F",y,v)}({parent:(r=t.bundledQuery).parent,structuredQuery:r.structuredQuery}),"LAST"===r.limitType?iM(n,n.limit,"L"):n),readTime:sq(t.readTime)}),nC.resolve()}}class ar{constructor(){this.overlays=new nx(nE.comparator),this.ls=new Map}getOverlay(e,t){return nC.resolve(this.overlays.get(t))}getOverlays(e,t){let r=iG();return nC.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((r,n)=>{this.we(e,t,n)}),nC.resolve()}removeOverlaysForBatchId(e,t,r){let n=this.ls.get(r);return void 0!==n&&(n.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(r)),nC.resolve()}getOverlaysForCollection(e,t,r){let n=iG(),i=t.length+1,s=new nE(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>r&&n.set(e.getKey(),e)}return nC.resolve(n)}getOverlaysForCollectionGroup(e,t,r,n){let i=new nx((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=i.get(e.largestBatchId);null===t&&(t=iG(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let a=iG(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=n)););return nC.resolve(a)}we(e,t,r){let n=this.overlays.get(r.key);if(null!==n){let e=this.ls.get(n.largestBatchId).delete(r.key);this.ls.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new sy(t,r));let i=this.ls.get(t);void 0===i&&(i=iY(),this.ls.set(t,i)),this.ls.set(t,i.add(r.key))}}class an{constructor(){this.fs=new nM(ai.ds),this.ws=new nM(ai._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){let r=new ai(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new ai(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){let t=new nE(new nw([])),r=new ai(t,e),n=new ai(t,e+1),i=[];return this.ws.forEachInRange([r,n],e=>{this.ys(e),i.push(e.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){let t=new nE(new nw([])),r=new ai(t,e),n=new ai(t,e+1),i=iY();return this.ws.forEachInRange([r,n],e=>{i=i.add(e.key)}),i}containsKey(e){let t=new ai(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ai{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return nE.comparator(e.key,t.key)||np(e.As,t.As)}static _s(e,t){return np(e.As,t.As)||nE.comparator(e.key,t.key)}}class as{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new nM(ai.ds)}checkEmpty(e){return nC.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,n){let i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new sg(i,t,r,n);for(let t of(this.mutationQueue.push(s),n))this.Rs=this.Rs.add(new ai(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return nC.resolve(s)}lookupMutationBatch(e,t){return nC.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){let r=this.bs(t+1),n=r<0?0:r;return nC.resolve(this.mutationQueue.length>n?this.mutationQueue[n]:null)}getHighestUnacknowledgedBatchId(){return nC.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return nC.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ai(t,0),n=new ai(t,1/0),i=[];return this.Rs.forEachInRange([r,n],e=>{let t=this.Ps(e.As);i.push(t)}),nC.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nM(np);return t.forEach(e=>{let t=new ai(e,0),n=new ai(e,1/0);this.Rs.forEachInRange([t,n],e=>{r=r.add(e.As)})}),nC.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=r;nE.isDocumentKey(i)||(i=i.child(""));let s=new ai(new nE(i),0),a=new nM(np);return this.Rs.forEachWhile(e=>{let t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===n&&(a=a.add(e.As)),!0)},s),nC.resolve(this.Vs(a))}Vs(e){let t=[];return e.forEach(e=>{let r=this.Ps(e);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){0===this.Ss(t.batchId,"removed")||nt(),this.mutationQueue.shift();let r=this.Rs;return nC.forEach(t.mutations,n=>{let i=new ai(n.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){let r=new ai(t,0),n=this.Rs.firstAfterOrEqual(r);return nC.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,nC.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){let t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class aa{constructor(e){this.Ds=e,this.docs=new nx(nE.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,n=this.docs.get(r),i=n?n.size:0,s=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return nC.resolve(r?r.document.mutableCopy():ir.newInvalidDocument(t))}getEntries(e,t){let r=iq;return t.forEach(e=>{let t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():ir.newInvalidDocument(e))}),nC.resolve(r)}getDocumentsMatchingQuery(e,t,r,n){let i=iq,s=t.path,a=new nE(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){let{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||0>=function(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r||0!==(r=nE.comparator(e.documentKey,t.documentKey))?r:np(e.largestBatchId,t.largestBatchId)}(new nI(a.readTime,a.key,-1),r)||(n.has(a.key)||ij(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return nC.resolve(i)}getAllFromCollectionGroup(e,t,r,n){nt()}Cs(e,t){return nC.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ao(this)}getSize(e){return nC.resolve(this.size)}}class ao extends s9{constructor(e){super(),this.os=e}applyChanges(e){let t=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?t.push(this.os.addEntry(e,n)):this.os.removeEntry(r)}),nC.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class al{constructor(e){this.persistence=e,this.xs=new i$(e=>iT(e),iS),this.lastRemoteSnapshotVersion=ny.min(),this.highestTargetId=0,this.Ns=0,this.ks=new an,this.targetCount=0,this.Ms=s8.kn()}forEachTarget(e,t){return this.xs.forEach((e,r)=>t(r)),nC.resolve()}getLastRemoteSnapshotVersion(e){return nC.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nC.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),nC.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),nC.resolve()}Fn(e){this.xs.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Ms=new s8(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,nC.resolve()}updateTargetData(e,t){return this.Fn(t),nC.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,nC.resolve()}removeTargets(e,t,r){let n=0,i=[];return this.xs.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),n++)}),nC.waitFor(i).next(()=>n)}getTargetCount(e){return nC.resolve(this.targetCount)}getTargetData(e,t){let r=this.xs.get(t)||null;return nC.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),nC.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);let n=this.persistence.referenceDelegate,i=[];return n&&t.forEach(t=>{i.push(n.markPotentiallyOrphaned(e,t))}),nC.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),nC.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ks.Es(t);return nC.resolve(r)}containsKey(e,t){return nC.resolve(this.ks.containsKey(t))}}class au{constructor(e,t){this.$s={},this.overlays={},this.Os=new nk(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new al(this),this.indexManager=new s4,this.remoteDocumentCache=new aa(e=>this.referenceDelegate.Ls(e)),this.serializer=new s2(t),this.qs=new at(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ar,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new as(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){r8("MemoryPersistence","Starting transaction:",e);let n=new ac(this.Os.next());return this.referenceDelegate.Us(),r(n).next(e=>this.referenceDelegate.Ks(n).next(()=>e)).toPromise().then(e=>(n.raiseOnCommittedEvent(),e))}Gs(e,t){return nC.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class ac extends nT{constructor(e){super(),this.currentSequenceNumber=e}}class ah{constructor(e){this.persistence=e,this.Qs=new an,this.js=null}static zs(e){return new ah(e)}get Ws(){if(this.js)return this.js;throw nt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),nC.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),nC.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),nC.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nC.forEach(this.Ws,r=>{let n=nE.fromPath(r);return this.Hs(e,n).next(e=>{e||t.removeEntry(n,ny.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return nC.or([()=>nC.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class ad{constructor(e,t,r,n){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=n}static Li(e,t){let r=iY(),n=iY();for(let e of t.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:n=n.add(e.doc.key)}return new ad(e,t.fromCache,r,n)}}class af{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,n){return this.Ki(e,t).next(i=>i||this.Gi(e,t,n,r)).next(r=>r||this.Qi(e,t))}Ki(e,t){if(iR(t))return nC.resolve(null);let r=iP(t);return this.indexManager.getIndexType(e,r).next(n=>0===n?null:(null!==t.limit&&1===n&&(r=iP(t=iM(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,r).next(n=>{let i=iY(...n);return this.Ui.getDocuments(e,i).next(n=>this.indexManager.getMinOffset(e,r).next(r=>{let s=this.ji(t,n);return this.zi(t,s,i,r.readTime)?this.Ki(e,iM(t,null,"F")):this.Wi(e,s,t,r)}))})))}Gi(e,t,r,n){return iR(t)||n.isEqual(ny.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(i=>{let s,a,o=this.ji(t,i);return this.zi(t,o,r,n)?this.Qi(e,t):(r6()<=m.LogLevel.DEBUG&&r8("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),iV(t)),this.Wi(e,o,t,(s=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,new nI(ny.fromTimestamp(1e9===a?new nm(s+1,0):new nm(s,a)),nE.empty(),-1))))})}ji(e,t){let r=new nM(iB(e));return t.forEach((t,n)=>{ij(e,n)&&(r=r.add(n))}),r}zi(e,t,r,n){if(null===e.limit)return!1;if(r.size!==t.size)return!0;let i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}Qi(e,t){return r6()<=m.LogLevel.DEBUG&&r8("QueryEngine","Using full collection scan to execute query:",iV(t)),this.Ui.getDocumentsMatchingQuery(e,t,nI.min())}Wi(e,t,r,n){return this.Ui.getDocumentsMatchingQuery(e,r,n).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class ap{constructor(e,t,r,n){this.persistence=e,this.Hi=t,this.serializer=n,this.Ji=new nx(np),this.Yi=new i$(e=>iT(e),iS),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ae(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}async function ag(e,t){return await e.persistence.runTransaction("Handle user change","readonly",r=>{let n;return e.mutationQueue.getAllMutationBatches(r).next(i=>(n=i,e.tr(t),e.mutationQueue.getAllMutationBatches(r))).next(t=>{let i=[],s=[],a=iY();for(let e of n)for(let t of(i.push(e.batchId),e.mutations))a=a.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))a=a.add(t.key);return e.localDocuments.getDocuments(r,a).next(e=>({er:e,removedBatchIds:i,addedBatchIds:s}))})})}function am(e){return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}async function ay(e,t,r){let n=e.Ji.get(t);try{r||await e.persistence.runTransaction("Release target",r?"readwrite":"readwrite-primary",t=>e.persistence.referenceDelegate.removeTarget(t,n))}catch(e){if(!nA(e))throw e;r8("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}e.Ji=e.Ji.remove(t),e.Yi.delete(n.target)}function av(e,t,r){let n=ny.min(),i=iY();return e.persistence.runTransaction("Execute query","readonly",s=>{var a;let o;return(a=iP(t),void 0!==(o=e.Yi.get(a))?nC.resolve(e.Ji.get(o)):e.Bs.getTargetData(s,a)).next(t=>{if(t)return n=t.lastLimboFreeSnapshotVersion,e.Bs.getMatchingKeysForTargetId(s,t.targetId).next(e=>{i=e})}).next(()=>e.Hi.getDocumentsMatchingQuery(s,t,r?n:ny.min(),r?i:iY())).next(r=>{var n,s,a;let o;return n=e,s=t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2)),a=r,o=n.Xi.get(s)||ny.min(),a.forEach((e,t)=>{t.readTime.compareTo(o)>0&&(o=t.readTime)}),n.Xi.set(s,o),{documents:r,ir:i}})})}class aw{constructor(){this.activeTargetIds=iX}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class ab{constructor(){this.Hr=new aw,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new aw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class a_{Yr(e){}shutdown(){}}class aE{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){for(let e of(r8("ConnectivityMonitor","Network connectivity changed: AVAILABLE"),this.so))e(0)}no(){for(let e of(r8("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE"),this.so))e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let aI=null;function aT(){return null===aI?aI=0x10000000+Math.round(0x80000000*Math.random()):aI++,"0x"+aI.toString(16)}let aS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aC{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}let aA="WebChannelConnection";class ak extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,n,i){let s=aT(),a=this.To(e,t);r8("RestConnection",`Sending RPC '${e}' ${s}:`,a,r);let o={};return this.Eo(o,n,i),this.Ao(e,a,o,r).then(t=>(r8("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw r7("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",r),t})}vo(e,t,r,n,i,s){return this.Io(e,t,r,n,i)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+r4,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,r)=>e[r]=t),r&&r.headers.forEach((t,r)=>e[r]=t)}To(e,t){let r=aS[e];return`${this.mo}/v1/${t}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,n){let i=aT();return new Promise((s,a)=>{let o=new rZ;o.setWithCredentials(!0),o.listenOnce(rW.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case rG.NO_ERROR:let t=o.getResponseJson();r8(aA,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case rG.TIMEOUT:r8(aA,`RPC '${e}' ${i} timed out`),a(new nn(nr.DEADLINE_EXCEEDED,"Request time out"));break;case rG.HTTP_ERROR:let r=o.getStatus();if(r8(aA,`RPC '${e}' ${i} failed with status:`,r,"response text:",o.getResponseText()),r>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=null==e?void 0:e.error;if(t&&t.status&&t.message){let e,r=(e=t.status.toLowerCase().replace(/_/g,"-"),Object.values(nr).indexOf(e)>=0?e:nr.UNKNOWN);a(new nn(r,t.message))}else a(new nn(nr.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new nn(nr.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{r8(aA,`RPC '${e}' ${i} completed.`)}});let l=JSON.stringify(n);r8(aA,`RPC '${e}' ${i} sending request:`,n),o.send(t,"POST",l,r,15)})}Ro(e,t,r){let n=aT(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=rH(),a=rK(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new rX({})),this.Eo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let c=i.join("");r8(aA,`Creating RPC '${e}' stream ${n}: ${c}`,l);let h=s.createWebChannel(c,l),d=!1,f=!1,p=new aC({ro:t=>{f?r8(aA,`Not sending because RPC '${e}' stream ${n} is closed:`,t):(d||(r8(aA,`Opening RPC '${e}' stream ${n} transport.`),h.open(),d=!0),r8(aA,`RPC '${e}' stream ${n} sending:`,t),h.send(t))},oo:()=>h.close()}),g=(e,t,r)=>{e.listen(t,e=>{try{r(e)}catch(e){setTimeout(()=>{throw e},0)}})};return g(h,rJ.EventType.OPEN,()=>{f||r8(aA,`RPC '${e}' stream ${n} transport opened.`)}),g(h,rJ.EventType.CLOSE,()=>{f||(f=!0,r8(aA,`RPC '${e}' stream ${n} transport closed`),p.wo())}),g(h,rJ.EventType.ERROR,t=>{f||(f=!0,r7(aA,`RPC '${e}' stream ${n} transport errored:`,t),p.wo(new nn(nr.UNAVAILABLE,"The operation could not be completed")))}),g(h,rJ.EventType.MESSAGE,t=>{var r;if(!f){let i=t.data[0];i||nt();let s=i.error||(null==(r=i[0])?void 0:r.error);if(s){r8(aA,`RPC '${e}' stream ${n} received error:`,s);let t=s.status,r=function(e){let t=o[e];if(void 0!==t)return sw(t)}(t),i=s.message;void 0===r&&(r=nr.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),f=!0,p.wo(new nn(r,i)),h.close()}else r8(aA,`RPC '${e}' stream ${n} received:`,i),p._o(i)}}),g(a,rQ.STAT_EVENT,t=>{t.stat===rY.PROXY?r8(aA,`RPC '${e}' stream ${n} detected buffering proxy`):t.stat===rY.NOPROXY&&r8(aA,`RPC '${e}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function aR(){return"undefined"!=typeof document?document:null}function aN(e){return new sV(e,!0)}class aD{constructor(e,t,r=1e3,n=1.5,i=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=n,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();let t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),n=Math.max(0,t-r);n>0&&r8("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,n,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class aO{constructor(e,t,r,n,i,s,a,o){this.ii=e,this.$o=r,this.Oo=n,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new aD(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===nr.RESOURCE_EXHAUSTED?(r9(t.toString()),r9("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===nr.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;let e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,r])=>{this.Fo===t&&this.Zo(e,r)},t=>{e(()=>{let e=new nn(nr.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){let r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{r(()=>this.tu(e))}),this.stream.onMessage(e=>{r(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return r8("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(r8("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ax extends aO{constructor(e,t,r,n,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();let t=function(e,t){let r;if("targetChange"in t){var n,i;t.targetChange;let s="NO_CHANGE"===(n=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===n?1:"REMOVE"===n?2:"CURRENT"===n?3:"RESET"===n?4:nt(),a=t.targetChange.targetIds||[],o=(i=t.targetChange.resumeToken,e.useProto3Json?(void 0===i||"string"==typeof i||nt(),nj.fromBase64String(i||"")):(void 0===i||i instanceof Uint8Array||nt(),nj.fromUint8Array(i||new Uint8Array))),l=t.targetChange.cause;r=new sD(s,a,o,l&&new nn(void 0===l.code?nr.UNKNOWN:sw(l.code),l.message||"")||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let i=sG(e,n.document.name),s=sq(n.document.updateTime),a=n.document.createTime?sq(n.document.createTime):ny.min(),o=new it({mapValue:{fields:n.document.fields}}),l=ir.newFoundDocument(i,s,a,o);r=new sR(n.targetIds||[],n.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let i=sG(e,n.document),s=n.readTime?sq(n.readTime):ny.min(),a=ir.newNoDocument(i,s);r=new sR([],n.removedTargetIds||[],a.key,a)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let i=sG(e,n.document);r=new sR([],n.removedTargetIds||[],i,null)}else{if(!("filter"in t))return nt();{t.filter;let e=t.filter;e.targetId;let{count:n=0,unchangedNames:i}=e,s=new sv(n,i);r=new sN(e.targetId,s)}}return r}(this.serializer,e),r=function(e){if(!("targetChange"in e))return ny.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?ny.min():t.readTime?sq(t.readTime):ny.min()}(e);return this.listener.nu(t,r)}su(e){let t,r={};r.database=sQ(this.serializer),r.addTarget=function(e,t){var r,n;let i,s,a,o,l,u,c=t.target;if((i=iC(c)?{documents:{documents:[sW(e,c.path)]}}:{query:(s={structuredQuery:{}},a=c.path,null!==c.collectionGroup?(s.parent=sW(e,a),s.structuredQuery.from=[{collectionId:c.collectionGroup,allDescendants:!0}]):(s.parent=sW(e,a.popLast()),s.structuredQuery.from=[{collectionId:a.lastSegment()}]),(o=function(e){if(0!==e.length)return function e(t){var r;let n;return t instanceof iu?function(e){if("=="===e.op){if(n8(e.value))return{unaryFilter:{field:sJ(e.field),op:"IS_NAN"}};if(n6(e.value))return{unaryFilter:{field:sJ(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(n8(e.value))return{unaryFilter:{field:sJ(e.field),op:"IS_NOT_NAN"}};if(n6(e.value))return{unaryFilter:{field:sJ(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sJ(e.field),op:sF[e.op],value:e.value}}}(t):t instanceof ic?1===(n=(r=t).getFilters().map(t=>e(t))).length?n[0]:{compositeFilter:{op:sU[r.op],filters:n}}:nt()}(ic.create(e,"and"))}(c.filters))&&(s.structuredQuery.where=o),(l=function(e){if(0!==e.length)return e.map(e=>({field:sJ(e.field),direction:sM[e.dir]}))}(c.orderBy))&&(s.structuredQuery.orderBy=l),null!==(u=sj(e,c.limit))&&(s.structuredQuery.limit=u),c.startAt&&(s.structuredQuery.startAt={before:(r=c.startAt).inclusive,values:r.position}),c.endAt&&(s.structuredQuery.endAt={before:!(n=c.endAt).inclusive,values:n.position}),s)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){i.resumeToken=s$(e,t.resumeToken);let r=sj(e,t.expectedCount);null!==r&&(i.expectedCount=r)}else if(t.snapshotVersion.compareTo(ny.min())>0){i.readTime=sB(e,t.snapshotVersion.toTimestamp());let r=sj(e,t.expectedCount);null!==r&&(i.expectedCount=r)}return i}(this.serializer,e);let n=(this.serializer,null==(t=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nt()}}(e.purpose))?null:{"goog-listen-tags":t});n&&(r.labels=n),this.Wo(r)}iu(e){let t={};t.database=sQ(this.serializer),t.removeTarget=e,this.Wo(t)}}class aP extends aO{constructor(e,t,r,n,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){var t,r;if(e.streamToken||nt(),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();let n=(t=e.writeResults,r=e.commitTime,t&&t.length>0?(void 0!==r||nt(),t.map(e=>{let t;return(t=e.updateTime?sq(e.updateTime):sq(r)).isEqual(ny.min())&&(t=sq(r)),new st(t,e.transformResults||[])})):[]),i=sq(e.commitTime);return this.listener.cu(i,n)}return e.writeResults&&0!==e.writeResults.length&&nt(),this.ru=!0,this.listener.au()}hu(){let e={};e.database=sQ(this.serializer),this.Wo(e)}uu(e){let t={streamToken:this.lastStreamToken,writes:e.map(e=>(function(e,t){var r,n;let i;if(t instanceof sl)i={update:sX(e,t.key,t.value)};else if(t instanceof sf)i={delete:sK(e,t.key)};else if(t instanceof su){let r;i={update:sX(e,t.key,t.data),updateMask:(n=t.fieldMask,r=[],n.fields.forEach(e=>r.push(e.canonicalString())),{fieldPaths:r})}}else{if(!(t instanceof sp))return nt();i={verify:sK(e,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(e=>(function(e,t){let r=t.transform;if(r instanceof i2)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(r instanceof i3)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:r.elements}};if(r instanceof i5)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:r.elements}};if(r instanceof i8)return{fieldPath:t.field.canonicalString(),increment:r.gt};throw nt()})(0,e))),t.precondition.isNone||(i.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:sB(e,r.updateTime.toTimestamp())}:void 0!==r.exists?{exists:r.exists}:nt()),i})(this.serializer,e))};this.Wo(t)}}class aL extends class{}{constructor(e,t,r,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=n,this.lu=!1}fu(){if(this.lu)throw new nn(nr.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,i])=>this.connection.Io(e,t,r,n,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===nr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new nn(nr.UNKNOWN,e.toString())})}vo(e,t,r,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.vo(e,t,r,i,s,n)).catch(e=>{throw"FirebaseError"===e.name?(e.code===nr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new nn(nr.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class aM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(r9(t),this.mu=!1):r8("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class aF{constructor(e,t,r,n,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(e=>{r.enqueueAndForget(async()=>{aK(this)&&(r8("RemoteStore","Restarting streams for network reachability change."),await async function(e){e.vu.add(4),await aV(e),e.bu.set("Unknown"),e.vu.delete(4),await aU(e)}(this))})}),this.bu=new aM(r,n)}}async function aU(e){if(aK(e))for(let t of e.Ru)await t(!0)}async function aV(e){for(let t of e.Ru)await t(!1)}function aj(e,t){e.Au.has(t.targetId)||(e.Au.set(t.targetId,t),aH(e)?az(e):a8(e).Ko()&&a$(e,t))}function aB(e,t){let r=a8(e);e.Au.delete(t),r.Ko()&&aq(e,t),0===e.Au.size&&(r.Ko()?r.jo():aK(e)&&e.bu.set("Unknown"))}function a$(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ny.min())>0){let r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}a8(e).su(t)}function aq(e,t){e.Vu.qt(t),a8(e).iu(t)}function az(e){e.Vu=new sx({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),a8(e).start(),e.bu.gu()}function aH(e){return aK(e)&&!a8(e).Uo()&&e.Au.size>0}function aK(e){return 0===e.vu.size}async function aG(e){e.Au.forEach((t,r)=>{a$(e,t)})}async function aW(e,t){e.Vu=void 0,aH(e)?(e.bu.Iu(t),az(e)):e.bu.set("Unknown")}async function aQ(e,t,r){if(e.bu.set("Online"),t instanceof sD&&2===t.state&&t.cause)try{await async function(e,t){let r=t.cause;for(let n of t.targetIds)e.Au.has(n)&&(await e.remoteSyncer.rejectListen(n,r),e.Au.delete(n),e.Vu.removeTarget(n))}(e,t)}catch(r){r8("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await aY(e,r)}else if(t instanceof sR?e.Vu.Ht(t):t instanceof sN?e.Vu.ne(t):e.Vu.Xt(t),!r.isEqual(ny.min()))try{let t,n=await am(e.localStore);r.compareTo(n)>=0&&await ((t=e.Vu.ce(r)).targetChanges.forEach((t,n)=>{if(t.resumeToken.approximateByteSize()>0){let i=e.Au.get(n);i&&e.Au.set(n,i.withResumeToken(t.resumeToken,r))}}),t.targetMismatches.forEach((t,r)=>{let n=e.Au.get(t);if(!n)return;e.Au.set(t,n.withResumeToken(nj.EMPTY_BYTE_STRING,n.snapshotVersion)),aq(e,t);let i=new s1(n.target,t,r,n.sequenceNumber);a$(e,i)}),e.remoteSyncer.applyRemoteEvent(t))}catch(t){r8("RemoteStore","Failed to raise snapshot:",t),await aY(e,t)}}async function aY(e,t,r){if(!nA(t))throw t;e.vu.add(1),await aV(e),e.bu.set("Offline"),r||(r=()=>am(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{r8("RemoteStore","Retrying IndexedDB access"),await r(),e.vu.delete(1),await aU(e)})}function aX(e,t){return t().catch(r=>aY(e,r,t))}async function aJ(e){var t;let r=a9(e),n=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;aK(t=e)&&t.Eu.length<10;)try{let t=await function(e,t){return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}(e.localStore,n);if(null===t){0===e.Eu.length&&r.jo();break}n=t.batchId,function(e,t){e.Eu.push(t);let r=a9(e);r.Ko()&&r.ou&&r.uu(t.mutations)}(e,t)}catch(t){await aY(e,t)}aZ(e)&&a0(e)}function aZ(e){return aK(e)&&!a9(e).Uo()&&e.Eu.length>0}function a0(e){a9(e).start()}async function a1(e){a9(e).hu()}async function a2(e){let t=a9(e);for(let r of e.Eu)t.uu(r.mutations)}async function a3(e,t,r){let n=e.Eu.shift(),i=sm.from(n,t,r);await aX(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await aJ(e)}async function a4(e,t){t&&a9(e).ou&&await async function(e,t){var r;if(function(e){switch(e){default:return nt();case nr.CANCELLED:case nr.UNKNOWN:case nr.DEADLINE_EXCEEDED:case nr.RESOURCE_EXHAUSTED:case nr.INTERNAL:case nr.UNAVAILABLE:case nr.UNAUTHENTICATED:return!1;case nr.INVALID_ARGUMENT:case nr.NOT_FOUND:case nr.ALREADY_EXISTS:case nr.PERMISSION_DENIED:case nr.FAILED_PRECONDITION:case nr.ABORTED:case nr.OUT_OF_RANGE:case nr.UNIMPLEMENTED:case nr.DATA_LOSS:return!0}}(r=t.code)&&r!==nr.ABORTED){let r=e.Eu.shift();a9(e).Qo(),await aX(e,()=>e.remoteSyncer.rejectFailedWrite(r.batchId,t)),await aJ(e)}}(e,t),aZ(e)&&a0(e)}async function a5(e,t){e.asyncQueue.verifyOperationInProgress(),r8("RemoteStore","RemoteStore received new credentials");let r=aK(e);e.vu.add(3),await aV(e),r&&e.bu.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.vu.delete(3),await aU(e)}async function a6(e,t){t?(e.vu.delete(2),await aU(e)):t||(e.vu.add(2),await aV(e),e.bu.set("Unknown"))}function a8(e){var t,r,n;return e.Su||(t=e.datastore,r=e.asyncQueue,n={uo:aG.bind(null,e),ao:aW.bind(null,e),nu:aQ.bind(null,e)},t.fu(),e.Su=new ax(r,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,n),e.Ru.push(async t=>{t?(e.Su.Qo(),aH(e)?az(e):e.bu.set("Unknown")):(await e.Su.stop(),e.Vu=void 0)})),e.Su}function a9(e){var t,r,n;return e.Du||(t=e.datastore,r=e.asyncQueue,n={uo:a1.bind(null,e),ao:a4.bind(null,e),au:a2.bind(null,e),cu:a3.bind(null,e)},t.fu(),e.Du=new aP(r,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,n),e.Ru.push(async t=>{t?(e.Du.Qo(),await aJ(e)):(await e.Du.stop(),e.Eu.length>0&&(r8("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))})),e.Du}class a7{constructor(e,t,r,n,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=i,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,r,n,i){let s=new a7(e,t,Date.now()+r,n,i);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new nn(nr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oe(e,t){if(r9("AsyncQueue",`${t}: ${e}`),nA(e))return new nn(nr.UNAVAILABLE,`${t}: ${e}`);throw e}class ot{constructor(e){this.comparator=e?(t,r)=>e(t,r)||nE.comparator(t.key,r.key):(e,t)=>nE.comparator(e.key,t.key),this.keyedMap=iH(),this.sortedSet=new nx(this.comparator)}static emptySet(e){return new ot(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let r=new ot;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class or{constructor(){this.Cu=new nx(nE.comparator)}track(e){let t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):nt():this.Cu=this.Cu.insert(t,e)}xu(){let e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class on{constructor(e,t,r,n,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,n,i){let s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new on(e,t,ot.emptySet(t),s,r,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iF(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==r[e].type||!t[e].doc.isEqual(r[e].doc))return!1;return!0}}class oi{constructor(){this.Nu=void 0,this.listeners=[]}}class os{constructor(){this.queries=new i$(e=>iU(e),iF),this.onlineState="Unknown",this.ku=new Set}}async function oa(e,t){let r=t.query,n=!1,i=e.queries.get(r);if(i||(n=!0,i=new oi),n)try{i.Nu=await e.onListen(r)}catch(r){let e=oe(r,`Initialization of query '${iV(t.query)}' failed`);return void t.onError(e)}e.queries.set(r,i),i.listeners.push(t),t.Mu(e.onlineState),i.Nu&&t.$u(i.Nu)&&oc(e)}async function oo(e,t){let r=t.query,n=!1,i=e.queries.get(r);if(i){let e=i.listeners.indexOf(t);e>=0&&(i.listeners.splice(e,1),n=0===i.listeners.length)}if(n)return e.queries.delete(r),e.onUnlisten(r)}function ol(e,t){let r=!1;for(let n of t){let t=n.query,i=e.queries.get(t);if(i){for(let e of i.listeners)e.$u(n)&&(r=!0);i.Nu=n}}r&&oc(e)}function ou(e,t,r){let n=e.queries.get(t);if(n)for(let e of n.listeners)e.onError(r);e.queries.delete(t)}function oc(e){e.ku.forEach(e=>{e.next()})}class oh{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){let t=[];for(let r of e.docChanges)3!==r.type&&t.push(r);e=new on(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||"Offline"===t)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;let t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=on.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class od{constructor(e){this.key=e}}class of{constructor(e){this.key=e}}class op{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=iY(),this.mutatedKeys=iY(),this.tc=iB(e),this.ec=new ot(this.tc)}get nc(){return this.Yu}sc(e,t){let r=t?t.ic:new or,n=t?t.ec:this.ec,i=t?t.mutatedKeys:this.mutatedKeys,s=n,a=!1,o="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,l="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((e,t)=>{let u=n.get(e),c=ij(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations),f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(r.track({type:3,doc:c}),f=!0):this.rc(u,c)||(r.track({type:2,doc:c}),f=!0,(o&&this.tc(c,o)>0||l&&0>this.tc(c,l))&&(a=!0)):!u&&c?(r.track({type:0,doc:c}),f=!0):u&&!c&&(r.track({type:1,doc:u}),f=!0,(o||l)&&(a=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){let e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),r.track({type:1,doc:e})}return{ec:s,ic:r,zi:a,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){let n=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;let i=e.ic.xu();i.sort((e,t)=>{var r,n;let i;return r=e.type,n=t.type,(i=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}})(r)-i(n)||this.tc(e.doc,t.doc)}),this.oc(r);let s=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,o=a!==this.Xu;return(this.Xu=a,0!==i.length||o)?{snapshot:new on(this.query,e.ec,n,i,e.mutatedKeys,0===a,o,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new or,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];let e=this.Zu;this.Zu=iY(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});let t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new of(e))}),this.Zu.forEach(r=>{e.has(r)||t.push(new od(r))}),t}hc(e){this.Yu=e.ir,this.Zu=iY();let t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return on.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class og{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class om{constructor(e){this.key=e,this.fc=!1}}class oy{constructor(e,t,r,n,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new i$(e=>iU(e),iF),this._c=new Map,this.mc=new Set,this.gc=new nx(nE.comparator),this.yc=new Map,this.Ic=new an,this.Tc={},this.Ec=new Map,this.Ac=s8.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function ov(e,t){var r,n,i;let s,a,o=((r=e).remoteStore.remoteSyncer.applyRemoteEvent=oE.bind(null,r),r.remoteStore.remoteSyncer.getRemoteKeysForTarget=oL.bind(null,r),r.remoteStore.remoteSyncer.rejectListen=oT.bind(null,r),r.dc.nu=ol.bind(null,r.eventManager),r.dc.Pc=ou.bind(null,r.eventManager),r),l=o.wc.get(t);if(l)s=l.targetId,o.sharedClientState.addLocalQueryTarget(s),a=l.view.lc();else{let e=await (n=o.localStore,i=iP(t),n.persistence.runTransaction("Allocate target","readwrite",e=>{let t;return n.Bs.getTargetData(e,i).next(r=>r?(t=r,nC.resolve(t)):n.Bs.allocateTargetId(e).next(r=>(t=new s1(i,r,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,t).next(()=>t))))}).then(e=>{let t=n.Ji.get(e.targetId);return(null===t||e.snapshotVersion.compareTo(t.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(i,e.targetId)),e})),r=o.sharedClientState.addLocalQueryTarget(e.targetId);s=e.targetId,a=await ow(o,t,s,"current"===r,e.resumeToken),o.isPrimaryClient&&aj(o.remoteStore,e)}return a}async function ow(e,t,r,n,i){e.Rc=(t,r,n)=>(async function(e,t,r,n){let i=t.view.sc(r);i.zi&&(i=await av(e.localStore,t.query,!1).then(({documents:e})=>t.view.sc(e,i)));let s=n&&n.targetChanges.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s);return oD(e,t.targetId,a.cc),a.snapshot})(e,t,r,n);let s=await av(e.localStore,t,!0),a=new op(t,s.ir),o=a.sc(s.documents),l=sk.createSynthesizedTargetChangeForCurrentChange(r,n&&"Offline"!==e.onlineState,i),u=a.applyChanges(o,e.isPrimaryClient,l);oD(e,r,u.cc);let c=new og(t,r,a);return e.wc.set(t,c),e._c.has(r)?e._c.get(r).push(t):e._c.set(r,[t]),u.snapshot}async function ob(e,t){let r=e.wc.get(t),n=e._c.get(r.targetId);n.length>1?(e._c.set(r.targetId,n.filter(e=>!iF(e,t))),e.wc.delete(t)):e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||await ay(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),aB(e.remoteStore,r.targetId),oR(e,r.targetId)}).catch(nS)):(oR(e,r.targetId),await ay(e.localStore,r.targetId,!0))}async function o_(e,t,r){var n,i,s;let a=((n=e).remoteStore.remoteSyncer.applySuccessfulWrite=oS.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=oC.bind(null,n),n);try{let e,n,o,l,u,c=await (i=a.localStore,o=nm.now(),l=t.reduce((e,t)=>e.add(t.key),iY()),i.persistence.runTransaction("Locally write mutations","readwrite",r=>{let s=iq,a=iY();return i.Zi.getEntries(r,l).next(e=>{(s=e).forEach((e,t)=>{t.isValidDocument()||(a=a.add(e))})}).next(()=>i.localDocuments.getOverlayedDocuments(r,s)).next(n=>{e=n;let s=[];for(let r of t){let t=function(e,t){let r=null;for(let n of e.fieldTransforms){let e=t.data.field(n.field),i=i1(n.transform,e||null);null!=i&&(null===r&&(r=it.empty()),r.set(n.field,i))}return r||null}(r,e.get(r.key).overlayedDocument);null!=t&&s.push(new su(r.key,t,function e(t){let r=[];return nD(t.fields,(t,n)=>{let i=new n_([t]);if(n9(n)){let t=e(n.mapValue).fields;if(0===t.length)r.push(i);else for(let e of t)r.push(i.child(e))}else r.push(i)}),new nU(r)}(t.value.mapValue),sr.exists(!0)))}return i.mutationQueue.addMutationBatch(r,o,s,t)}).next(t=>{n=t;let s=t.applyToLocalDocumentSet(e,a);return i.documentOverlayCache.saveOverlays(r,t.batchId,s)})}).then(()=>({batchId:n.batchId,changes:iK(e)})));a.sharedClientState.addPendingMutation(c.batchId),s=c.batchId,(u=a.Tc[a.currentUser.toKey()])||(u=new nx(np)),u=u.insert(s,r),a.Tc[a.currentUser.toKey()]=u,await ox(a,c.changes),await aJ(a.remoteStore)}catch(t){let e=oe(t,"Failed to persist write");r.reject(e)}}async function oE(e,t){var r;try{let n,i,s=await (r=e.localStore,n=t.snapshotVersion,i=r.Ji,r.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{var s,a,o;let l,u,c=r.Zi.newChangeBuffer({trackRemovals:!0});i=r.Ji;let h=[];t.targetChanges.forEach((s,a)=>{var o;let l=i.get(a);if(!l)return;h.push(r.Bs.removeMatchingKeys(e,s.removedDocuments,a).next(()=>r.Bs.addMatchingKeys(e,s.addedDocuments,a)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(nj.EMPTY_BYTE_STRING,ny.min()).withLastLimboFreeSnapshotVersion(ny.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,n)),i=i.insert(a,u),o=u,(0===l.resumeToken.approximateByteSize()||o.snapshotVersion.toMicroseconds()-l.snapshotVersion.toMicroseconds()>=3e8||s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size>0)&&h.push(r.Bs.updateTargetData(e,u))});let d=iq,f=iY();if(t.documentUpdates.forEach(n=>{t.resolvedLimboDocuments.has(n)&&h.push(r.persistence.referenceDelegate.updateLimboDocument(e,n))}),h.push((s=e,a=c,o=t.documentUpdates,l=iY(),u=iY(),o.forEach(e=>l=l.add(e)),a.getEntries(s,l).next(e=>{let t=iq;return o.forEach((r,n)=>{let i=e.get(r);n.isFoundDocument()!==i.isFoundDocument()&&(u=u.add(r)),n.isNoDocument()&&n.version.isEqual(ny.min())?(a.removeEntry(r,n.readTime),t=t.insert(r,n)):!i.isValidDocument()||n.version.compareTo(i.version)>0||0===n.version.compareTo(i.version)&&i.hasPendingWrites?(a.addEntry(n),t=t.insert(r,n)):r8("LocalStore","Ignoring outdated watch update for ",r,". Current version:",i.version," Watch version:",n.version)}),{nr:t,sr:u}})).next(e=>{d=e.nr,f=e.sr})),!n.isEqual(ny.min())){let t=r.Bs.getLastRemoteSnapshotVersion(e).next(t=>r.Bs.setTargetsMetadata(e,e.currentSequenceNumber,n));h.push(t)}return nC.waitFor(h).next(()=>c.apply(e)).next(()=>r.localDocuments.getLocalViewOfDocuments(e,d,f)).next(()=>d)}).then(e=>(r.Ji=i,e)));t.targetChanges.forEach((t,r)=>{let n=e.yc.get(r);n&&(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1||nt(),t.addedDocuments.size>0?n.fc=!0:t.modifiedDocuments.size>0?n.fc||nt():t.removedDocuments.size>0&&(n.fc||nt(),n.fc=!1))}),await ox(e,s,t)}catch(e){await nS(e)}}function oI(e,t,r){var n;if(e.isPrimaryClient&&0===r||!e.isPrimaryClient&&1===r){let r,i=[];e.wc.forEach((e,r)=>{let n=r.view.Mu(t);n.snapshot&&i.push(n.snapshot)}),(n=e.eventManager).onlineState=t,r=!1,n.queries.forEach((e,n)=>{for(let e of n.listeners)e.Mu(t)&&(r=!0)}),r&&oc(n),i.length&&e.dc.nu(i),e.onlineState=t,e.isPrimaryClient&&e.sharedClientState.setOnlineState(t)}}async function oT(e,t,r){e.sharedClientState.updateQueryState(t,"rejected",r);let n=e.yc.get(t),i=n&&n.key;if(i){let r=new nx(nE.comparator);r=r.insert(i,ir.newNoDocument(i,ny.min()));let n=iY().add(i),s=new sA(ny.min(),new Map,new nx(np),r,n);await oE(e,s),e.gc=e.gc.remove(i),e.yc.delete(t),oO(e)}else await ay(e.localStore,t,!1).then(()=>oR(e,t,r)).catch(nS)}async function oS(e,t){var r;let n=t.batch.batchId;try{let i=await (r=e.localStore,r.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let n,i,s,a=t.batch.keys(),o=r.Zi.newChangeBuffer({trackRemovals:!0});return(i=(n=t.batch).keys(),s=nC.resolve(),i.forEach(r=>{s=s.next(()=>o.getEntry(e,r)).next(e=>{let i=t.docVersions.get(r);null!==i||nt(),0>e.version.compareTo(i)&&(n.applyToRemoteDocument(e,t),e.isValidDocument()&&(e.setReadTime(t.commitVersion),o.addEntry(e)))})}),s.next(()=>r.mutationQueue.removeMutationBatch(e,n))).next(()=>o.apply(e)).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=iY();for(let r=0;r<e.mutationResults.length;++r)e.mutationResults[r].transformResults.length>0&&(t=t.add(e.batch.mutations[r].key));return t}(t))).next(()=>r.localDocuments.getDocuments(e,a))}));ok(e,n,null),oA(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await ox(e,i)}catch(e){await nS(e)}}async function oC(e,t,r){var n;try{let i=await (n=e.localStore,n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(null!==t||nt(),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))}));ok(e,t,r),oA(e,t),e.sharedClientState.updateMutationState(t,"rejected",r),await ox(e,i)}catch(e){await nS(e)}}function oA(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function ok(e,t,r){let n=e.Tc[e.currentUser.toKey()];if(n){let i=n.get(t);i&&(r?i.reject(r):i.resolve(),n=n.remove(t)),e.Tc[e.currentUser.toKey()]=n}}function oR(e,t,r=null){for(let n of(e.sharedClientState.removeLocalQueryTarget(t),e._c.get(t)))e.wc.delete(n),r&&e.dc.Pc(n,r);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||oN(e,t)})}function oN(e,t){e.mc.delete(t.path.canonicalString());let r=e.gc.get(t);null!==r&&(aB(e.remoteStore,r),e.gc=e.gc.remove(t),e.yc.delete(r),oO(e))}function oD(e,t,r){for(let n of r)n instanceof od?(e.Ic.addReference(n.key,t),function(e,t){let r=t.key,n=r.path.canonicalString();e.gc.get(r)||e.mc.has(n)||(r8("SyncEngine","New document in limbo: "+r),e.mc.add(n),oO(e))}(e,n)):n instanceof of?(r8("SyncEngine","Document no longer in limbo: "+n.key),e.Ic.removeReference(n.key,t),e.Ic.containsKey(n.key)||oN(e,n.key)):nt()}function oO(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){let t=e.mc.values().next().value;e.mc.delete(t);let r=new nE(nw.fromString(t)),n=e.Ac.next();e.yc.set(n,new om(r)),e.gc=e.gc.insert(r,n),aj(e.remoteStore,new s1(iP(ik(r.path)),n,"TargetPurposeLimboResolution",nk.ct))}}async function ox(e,t,r){let n=[],i=[],s=[];e.wc.isEmpty()||(e.wc.forEach((a,o)=>{s.push(e.Rc(o,t,r).then(t=>{if((t||r)&&e.isPrimaryClient&&e.sharedClientState.updateQueryState(o.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){n.push(t);let e=ad.Li(o.targetId,t);i.push(e)}}))}),await Promise.all(s),e.dc.nu(n),await async function(e,t){try{await e.persistence.runTransaction("notifyLocalViewChanges","readwrite",r=>nC.forEach(t,t=>nC.forEach(t.Fi,n=>e.persistence.referenceDelegate.addReference(r,t.targetId,n)).next(()=>nC.forEach(t.Bi,n=>e.persistence.referenceDelegate.removeReference(r,t.targetId,n)))))}catch(e){if(!nA(e))throw e;r8("LocalStore","Failed to update sequence numbers: "+e)}for(let r of t){let t=r.targetId;if(!r.fromCache){let r=e.Ji.get(t),n=r.snapshotVersion,i=r.withLastLimboFreeSnapshotVersion(n);e.Ji=e.Ji.insert(t,i)}}}(e.localStore,i))}async function oP(e,t){if(!e.currentUser.isEqual(t)){r8("SyncEngine","User change. New user:",t.toKey());let r=await ag(e.localStore,t);e.currentUser=t,e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new nn(nr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await ox(e,r.er)}}function oL(e,t){let r=e.yc.get(t);if(r&&r.fc)return iY().add(r.key);{let r=iY(),n=e._c.get(t);if(!n)return r;for(let t of n){let n=e.wc.get(t);r=r.unionWith(n.view.nc)}return r}}class oM{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=aN(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){var t,r;return t=this.persistence,r=new af,new ap(t,r,e.initialUser,this.serializer)}createPersistence(e){return new au(ah.zs,this.serializer)}createSharedClientState(e){return new ab}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class oF{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>oI(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=oP.bind(null,this.syncEngine),await a6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new os}createDatastore(e){var t;let r=aN(e.databaseInfo.databaseId),n=new ak(e.databaseInfo);return t=e.authCredentials,new aL(t,e.appCheckCredentials,n,r)}createRemoteStore(e){var t,r;return t=this.localStore,r=this.datastore,new aF(t,r,e.asyncQueue,e=>oI(this.syncEngine,e,0),aE.D()?new aE:new a_)}createSyncEngine(e,t){var r,n,i,s,a,o;let l;return r=this.localStore,n=this.remoteStore,i=this.eventManager,s=this.sharedClientState,a=e.initialUser,o=e.maxConcurrentLimboResolutions,l=new oy(r,n,i,s,a,o),t&&(l.vc=!0),l}terminate(){return async function(e){r8("RemoteStore","RemoteStore shutting down."),e.vu.add(5),await aV(e),e.Pu.shutdown(),e.bu.set("Unknown")}(this.remoteStore)}}class oU{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):r9("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class oV{constructor(e,t,r,n){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=n,this.user=r3.UNAUTHENTICATED,this.clientId=nf.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async e=>{r8("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(r,e=>(r8("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new nn(nr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){let t=oe(r,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function oj(e,t){e.asyncQueue.verifyOperationInProgress(),r8("FirestoreClient","Initializing OfflineComponentProvider");let r=await e.getConfiguration();await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async e=>{n.isEqual(e)||(await ag(t.localStore,e),n=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function oB(e,t){e.asyncQueue.verifyOperationInProgress();let r=await o$(e);r8("FirestoreClient","Initializing OnlineComponentProvider");let n=await e.getConfiguration();await t.initialize(r,n),e.setCredentialChangeListener(e=>a5(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,r)=>a5(t.remoteStore,r)),e._onlineComponents=t}async function o$(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){r8("FirestoreClient","Using user provided OfflineComponentProvider");try{await oj(e,e._uninitializedComponentsProvider._offline)}catch(t){if(!("FirebaseError"===t.name?t.code===nr.FAILED_PRECONDITION||t.code===nr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw t;r7("Error using user provided cache. Falling back to memory cache: "+t),await oj(e,new oM)}}else r8("FirestoreClient","Using default OfflineComponentProvider"),await oj(e,new oM);return e._offlineComponents}async function oq(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(r8("FirestoreClient","Using user provided OnlineComponentProvider"),await oB(e,e._uninitializedComponentsProvider._online)):(r8("FirestoreClient","Using default OnlineComponentProvider"),await oB(e,new oF))),e._onlineComponents}function oz(e){return o$(e).then(e=>e.persistence)}function oH(e){return o$(e).then(e=>e.localStore)}function oK(e){return oq(e).then(e=>e.remoteStore)}async function oG(e){let t=await oq(e),r=t.eventManager;return r.onListen=ov.bind(null,t.syncEngine),r.onUnlisten=ob.bind(null,t.syncEngine),r}function oW(e,t,r={}){let n=new ni;return e.asyncQueue.enqueueAndForget(async()=>{var i,s;let a,o;return i=await oG(e),s=e.asyncQueue,a=new oU({next:e=>{s.enqueueAndForget(()=>oo(i,o));let a=e.docs.has(t);!a&&e.fromCache?n.reject(new nn(nr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&e.fromCache&&r&&"server"===r.source?n.reject(new nn(nr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):n.resolve(e)},error:e=>n.reject(e)}),oa(i,o=new oh(ik(t.path),a,{includeMetadataChanges:!0,Ku:!0}))}),n.promise}function oQ(e,t,r={}){let n=new ni;return e.asyncQueue.enqueueAndForget(async()=>{var i,s;let a;return i=await oG(e),s=e.asyncQueue,a=new oh(t,new oU({next:e=>{s.enqueueAndForget(()=>oo(i,a)),e.fromCache&&"server"===r.source?n.reject(new nn(nr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):n.resolve(e)},error:e=>n.reject(e)}),{includeMetadataChanges:!0,Ku:!0}),oa(i,a)}),n.promise}function oY(e){let t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}let oX=new Map;function oJ(e,t,r){if(!r)throw new nn(nr.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function oZ(e){if(!nE.isDocumentKey(e))throw new nn(nr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function o0(e){if(nE.isDocumentKey(e))throw new nn(nr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function o1(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{var t;let r=(t=e).constructor?t.constructor.name:null;return r?`a custom ${r} object`:"an object"}}return"function"==typeof e?"a function":nt()}function o2(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new nn(nr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let r=o1(e);throw new nn(nr.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}class o3{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new nn(nr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null==(t=e.ssl)||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=0x2800000;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new nn(nr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,r,n){if(!0===t&&!0===n)throw new nn(nr.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oY(null!=(r=e.experimentalLongPollingOptions)?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new nn(nr.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new nn(nr.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new nn(nr.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){var t,r;return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,t.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class o4{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new nn(nr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new nn(nr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o3(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new na;switch(e.type){case"firstParty":return new nc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new nn(nr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){let e;return(e=oX.get(this))&&(r8("ComponentProvider","Removing Datastore"),oX.delete(this),e.terminate()),Promise.resolve()}}class o5{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new o8(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new o5(this.firestore,e,this._key)}}class o6{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new o6(this.firestore,e,this._query)}}class o8 extends o6{constructor(e,t,r){super(e,t,ik(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new o5(this.firestore,null,new nE(e))}withConverter(e){return new o8(this.firestore,e,this._path)}}function o9(e,t,...r){if(e=(0,y.getModularInstance)(e),oJ("collection","path",t),e instanceof o4){let n=nw.fromString(t,...r);return o0(n),new o8(e,null,n)}{if(!(e instanceof o5||e instanceof o8))throw new nn(nr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(nw.fromString(t,...r));return o0(n),new o8(e.firestore,null,n)}}function o7(e,t,...r){if(e=(0,y.getModularInstance)(e),1==arguments.length&&(t=nf.A()),oJ("doc","path",t),e instanceof o4){let n=nw.fromString(t,...r);return oZ(n),new o5(e,null,new nE(n))}{if(!(e instanceof o5||e instanceof o8))throw new nn(nr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(nw.fromString(t,...r));return oZ(n),new o5(e.firestore,e instanceof o8?e.converter:null,new nE(n))}}function le(e,t){return e=(0,y.getModularInstance)(e),t=(0,y.getModularInstance)(t),(e instanceof o5||e instanceof o8)&&(t instanceof o5||t instanceof o8)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function lt(e,t){return e=(0,y.getModularInstance)(e),t=(0,y.getModularInstance)(t),e instanceof o6&&t instanceof o6&&e.firestore===t.firestore&&iF(e._query,t._query)&&e.converter===t.converter}class lr{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new aD(this,"async_queue_retry"),this.Xc=()=>{let e=aR();e&&r8("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=aR();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;let t=aR();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});let t=new ni;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!nA(e))throw e;r8("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){let t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{let t;throw this.Wc=e,this.Hc=!1,r9("INTERNAL UNHANDLED ERROR: ",(t=e.message||"",e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t)),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);let n=a7.createAndSchedule(this,e,t,r,e=>this.na(e));return this.zc.push(n),n}Zc(){this.Wc&&nt()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(let t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{for(let t of(this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.zc))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){let t=this.zc.indexOf(e);this.zc.splice(t,1)}}function ln(e){if("object"!=typeof e||null===e)return!1;for(let t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}class li extends o4{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=new lr,this._persistenceKey=(null==n?void 0:n.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||lo(this),this._firestoreClient.terminate()}}function ls(e,t){let r="object"==typeof e?e:(0,p.getApp)(),n=(0,p._getProvider)(r,"firestore").getImmediate({identifier:"string"==typeof e?e:t||"(default)"});if(!n._initialized){let e=(0,y.getDefaultEmulatorHostnameAndPort)("firestore");e&&function(e,t,r,n={}){var i;let s=(e=o2(e,o4))._getSettings(),a=`${t}:${r}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&r7("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),n.mockUserToken){let t,r;if("string"==typeof n.mockUserToken)t=n.mockUserToken,r=r3.MOCK_USER;else{t=(0,y.createMockUserToken)(n.mockUserToken,null==(i=e._app)?void 0:i.options.projectId);let s=n.mockUserToken.sub||n.mockUserToken.user_id;if(!s)throw new nn(nr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new r3(s)}e._authCredentials=new no(new ns(t,r))}}(n,...e)}return n}function la(e){return e._firestoreClient||lo(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function lo(e){var t,r,n,i,s;let a=e._freezeSettings(),o=(i=e._databaseId,s=(null==(t=e._app)?void 0:t.options.appId)||"",new nW(i,s,e._persistenceKey,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,oY(a.experimentalLongPollingOptions),a.useFetchStreams));e._firestoreClient=new oV(e._authCredentials,e._appCheckCredentials,e._queue,o),(null==(r=a.cache)?void 0:r._offlineComponentProvider)&&(null==(n=a.cache)?void 0:n._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function ll(e){var t;return(t=la(e=o2(e,li))).asyncQueue.enqueue(async()=>{let e=await oz(t),r=await oK(t);return e.setNetworkEnabled(!0),r.vu.delete(0),aU(r)})}function lu(e){var t;return(t=la(e=o2(e,li))).asyncQueue.enqueue(async()=>{let e=await oz(t),r=await oK(t);return e.setNetworkEnabled(!1),async function(e){e.vu.add(0),await aV(e),e.bu.set("Offline")}(r)})}class lc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lc(nj.fromBase64String(e))}catch(e){throw new nn(nr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new lc(nj.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class lh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new nn(nr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new n_(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ld{constructor(e){this._methodName=e}}class lf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new nn(nr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new nn(nr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return np(this._lat,e._lat)||np(this._long,e._long)}}let lp=/^__.*__$/;class lg{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new su(e,this.data,this.fieldMask,t,this.fieldTransforms):new sl(e,this.data,t,this.fieldTransforms)}}class lm{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new su(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ly(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class lv{constructor(e,t,r,n,i,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=n,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new lv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;let r=null==(t=this.path)?void 0:t.child(e),n=this.aa({path:r,la:!1});return n.fa(e),n}da(e){var t;let r=null==(t=this.path)?void 0:t.child(e),n=this.aa({path:r,la:!1});return n.ua(),n}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return lP(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(ly(this.ca)&&lp.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class lw{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||aN(e)}ya(e,t,r,n=!1){return new lv({ca:e,methodName:t,ga:r,path:n_.emptyPath(),la:!1,ma:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lb(e){let t=e._freezeSettings(),r=aN(e._databaseId);return new lw(e._databaseId,!!t.ignoreUndefinedProperties,r)}function l_(e,t,r,n,i,s={}){let a,o,l=e.ya(s.merge||s.mergeFields?2:0,t,r,i);lN("Data must be an object, but it was:",l,n);let u=lk(n,l);if(s.merge)a=new nU(l.fieldMask),o=l.fieldTransforms;else if(s.mergeFields){let e=[];for(let n of s.mergeFields){let i=lD(t,n,r);if(!l.contains(i))throw new nn(nr.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);lL(e,i)||e.push(i)}a=new nU(e),o=l.fieldTransforms.filter(e=>a.covers(e.field))}else a=null,o=l.fieldTransforms;return new lg(new it(u),a,o)}class lE extends ld{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lE}}function lI(e,t,r){return new lv({ca:3,ga:t.settings.ga,methodName:e._methodName,la:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class lT extends ld{_toFieldTransform(e){return new se(e.path,new i2)}isEqual(e){return e instanceof lT}}class lS extends ld{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){let t=lI(this,e,!0),r=new i3(this.pa.map(e=>lA(e,t)));return new se(e.path,r)}isEqual(e){return this===e}}class lC extends ld{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){let t=lI(this,e,!0),r=new i5(this.pa.map(e=>lA(e,t)));return new se(e.path,r)}isEqual(e){return this===e}}function lA(e,t){if(lR(e=(0,y.getModularInstance)(e)))return lN("Unsupported field value:",t,e),lk(e,t);if(e instanceof ld)return function(e,t){if(!ly(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);let r=e._toFieldTransform(t);r&&t.fieldTransforms.push(r)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");let r=[],n=0;for(let i of e){let e=lA(i,t.wa(n));null==e&&(e={nullValue:"NULL_VALUE"}),r.push(e),n++}return{arrayValue:{values:r}}}return function(e,t){if(null===(e=(0,y.getModularInstance)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e){var r,n,i;return r=t.serializer,"number"==typeof(i=n=e)&&Number.isInteger(i)&&!nR(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER?iZ(n):iJ(r,n)}if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let r=nm.fromDate(e);return{timestampValue:sB(t.serializer,r)}}if(e instanceof nm){let r=new nm(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:sB(t.serializer,r)}}if(e instanceof lf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof lc)return{bytesValue:s$(t.serializer,e._byteString)};if(e instanceof o5){let r=t.databaseId,n=e.firestore._databaseId;if(!n.isEqual(r))throw t._a(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:sz(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${o1(e)}`)}(e,t)}function lk(e,t){let r={};return nO(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):nD(e,(e,n)=>{let i=lA(n,t.ha(e));null!=i&&(r[e]=i)}),{mapValue:{fields:r}}}function lR(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof nm||e instanceof lf||e instanceof lc||e instanceof o5||e instanceof ld)}function lN(e,t,r){if(!lR(r)||"object"!=typeof r||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){let n=o1(r);throw"an object"===n?t._a(e+" a custom object"):t._a(e+" "+n)}}function lD(e,t,r){if((t=(0,y.getModularInstance)(t))instanceof lh)return t._internalPath;if("string"==typeof t)return lx(e,t);throw lP("Field path arguments must be of type string or ",e,!1,void 0,r)}let lO=RegExp("[~\\*/\\[\\]]");function lx(e,t,r){if(t.search(lO)>=0)throw lP(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new lh(...t.split("."))._internalPath}catch(n){throw lP(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function lP(e,t,r,n,i){let s=n&&!n.isEmpty(),a=void 0!==i,o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${i}`),l+=")"),new nn(nr.INVALID_ARGUMENT,o+e+l)}function lL(e,t){return e.some(e=>e.isEqual(t))}class lM{constructor(e,t,r,n,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new o5(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){let e=new lF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(lU("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class lF extends lM{data(){return super.data()}}function lU(e,t){return"string"==typeof t?lx(e,t):t instanceof lh?t._internalPath:t._delegate._internalPath}function lV(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new nn(nr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lj{}class lB extends lj{}function l$(e,t,...r){let n=[];for(let i of(t instanceof lj&&n.push(t),function(e){let t=e.filter(e=>e instanceof lH).length,r=e.filter(e=>e instanceof lq).length;if(t>1||t>0&&r>0)throw new nn(nr.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(r)),n))e=i._apply(e);return e}class lq extends lB{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new lq(e,t,r)}_apply(e){let t=this._parse(e);return lJ(e._query,t),new o6(e.firestore,e.converter,iL(e._query,t))}_parse(e){let t=lb(e.firestore);return function(e,t,r,n,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new nn(nr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){lX(a,s);let t=[];for(let r of a)t.push(lY(n,e,r));o={arrayValue:{values:t}}}else o=lY(n,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||lX(a,s),o=function(e,t,r,n=!1){return lA(r,e.ya(n?4:3,t))}(r,t,a,"in"===s||"not-in"===s);return iu.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function lz(e,t,r){let n=lU("where",e);return lq._create(n,t,r)}class lH extends lj{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lH(e,t)}_parse(e){let t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:ic.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let r=e;for(let e of t.getFlattenedFilters())lJ(r,e),r=iL(r,e)}(e._query,t),new o6(e.firestore,e.converter,iL(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class lK extends lB{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lK(e,t)}_apply(e){var t;let r,n=function(e,t,r){if(null!==e.startAt)throw new nn(nr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new nn(nr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");let n=new io(t,r);return function(e,t){if(null===iN(e)){let r=iD(e);null!==r&&lZ(e,r,t.field)}}(e,n),n}(e._query,this._field,this._direction);return new o6(e.firestore,e.converter,(t=e._query,r=t.explicitOrderBy.concat([n]),new iA(t.path,t.collectionGroup,r,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))}}function lG(e,t="asc"){let r=lU("orderBy",e);return lK._create(r,t)}class lW extends lB{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new lW(e,t,r)}_apply(e){return new o6(e.firestore,e.converter,iM(e._query,this._limit,this._limitType))}}function lQ(e){return function(e,t){if(t<=0)throw new nn(nr.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}("limit",e),lW._create("limit",e,"F")}function lY(e,t,r){if("string"==typeof(r=(0,y.getModularInstance)(r))){if(""===r)throw new nn(nr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iO(t)&&-1!==r.indexOf("/"))throw new nn(nr.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);let n=t.path.child(nw.fromString(r));if(!nE.isDocumentKey(n))throw new nn(nr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return n3(e,new nE(n))}if(r instanceof o5)return n3(e,r._key);throw new nn(nr.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${o1(r)}.`)}function lX(e,t){if(!Array.isArray(e)||0===e.length)throw new nn(nr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function lJ(e,t){if(t.isInequality()){let r=iD(e),n=t.field;if(null!==r&&!r.isEqual(n))throw new nn(nr.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${n.toString()}'`);let i=iN(e);null!==i&&lZ(e,n,i)}let r=function(e,t){for(let r of e)for(let e of r.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==r)throw r===t.op?new nn(nr.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new nn(nr.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}function lZ(e,t,r){if(!r.isEqual(t))throw new nn(nr.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class l0{convertValue(e,t="none"){switch(nX(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nq(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nz(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return nD(e,(e,n)=>{r[e]=this.convertValue(n,t)}),r}convertGeoPoint(e){return new lf(nq(e.latitude),nq(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=nK(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nG(e));default:return null}}convertTimestamp(e){let t=n$(e);return new nm(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=nw.fromString(e);s0(r)||nt();let n=new nQ(r.get(1),r.get(3)),i=new nE(r.popFirst(5));return n.isEqual(t)||r9(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function l1(e,t,r){return e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t}class l2{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class l3 extends lM{constructor(e,t,r,n,i,s){super(e,t,r,n,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new l4(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(lU("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class l4 extends l3{data(e={}){return super.data(e)}}class l5{constructor(e,t,r,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new l2(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new l4(this._firestore,this._userDataWriter,r.key,r,new l2(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new nn(nr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(r=>{let n=new l4(e._firestore,e._userDataWriter,r.doc.key,r.doc,new l2(e._snapshot.mutatedKeys.has(r.doc.key),e._snapshot.fromCache),e.query.converter);return r.doc,{type:"added",doc:n,oldIndex:-1,newIndex:t++}})}{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let n=new l4(e._firestore,e._userDataWriter,t.doc.key,t.doc,new l2(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,s=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(s=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}(t.type),doc:n,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function l6(e){e=o2(e,o5);let t=o2(e.firestore,li);return oW(la(t),e._key).then(r=>uu(t,e,r))}class l8 extends l0{constructor(e){super(),this.firestore=e}convertBytes(e){return new lc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new o5(this.firestore,null,t)}}function l9(e){var t;let r;e=o2(e,o5);let n=o2(e.firestore,li),i=la(n),s=new l8(n);return(t=e._key,r=new ni,i.asyncQueue.enqueueAndForget(async()=>(async function(e,t,r){try{let n=await e.persistence.runTransaction("read document","readonly",r=>e.localDocuments.getDocument(r,t));n.isFoundDocument()?r.resolve(n):n.isNoDocument()?r.resolve(null):r.reject(new nn(nr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(n){let e=oe(n,`Failed to get document '${t} from cache`);r.reject(e)}})(await oH(i),t,r)),r.promise).then(t=>new l3(n,s,e._key,t,new l2(null!==t&&t.hasLocalMutations,!0),e.converter))}function l7(e){e=o2(e,o5);let t=o2(e.firestore,li);return oW(la(t),e._key,{source:"server"}).then(r=>uu(t,e,r))}function ue(e){e=o2(e,o6);let t=o2(e.firestore,li),r=la(t),n=new l8(t);return lV(e._query),oQ(r,e._query).then(r=>new l5(t,n,e,r))}function ut(e){var t;let r;e=o2(e,o6);let n=o2(e.firestore,li),i=la(n),s=new l8(n);return(t=e._query,r=new ni,i.asyncQueue.enqueueAndForget(async()=>(async function(e,t,r){try{let n=await av(e,t,!0),i=new op(t,n.ir),s=i.sc(n.documents),a=i.applyChanges(s,!1);r.resolve(a.snapshot)}catch(n){let e=oe(n,`Failed to execute query '${t} against cache`);r.reject(e)}})(await oH(i),t,r)),r.promise).then(t=>new l5(n,s,e,t))}function ur(e){e=o2(e,o6);let t=o2(e.firestore,li),r=la(t),n=new l8(t);return oQ(r,e._query,{source:"server"}).then(r=>new l5(t,n,e,r))}function un(e,t,r){e=o2(e,o5);let n=o2(e.firestore,li),i=l1(e.converter,t,r);return ul(n,[l_(lb(n),"setDoc",e._key,i,null!==e.converter,r).toMutation(e._key,sr.none())])}function ui(e,t,r,...n){var i,s,a;let o,l,u;e=o2(e,o5);let c=o2(e.firestore,li),h=lb(c);return ul(c,[("string"==typeof(t=(0,y.getModularInstance)(t))||t instanceof lh?function(e,t,r,n,i,s){let a=e.ya(1,t,r),o=[lD(t,n,r)],l=[i];if(s.length%2!=0)throw new nn(nr.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)o.push(lD(t,s[e])),l.push(s[e+1]);let u=[],c=it.empty();for(let e=o.length-1;e>=0;--e)if(!lL(u,o[e])){let t=o[e],r=l[e];r=(0,y.getModularInstance)(r);let n=a.da(t);if(r instanceof lE)u.push(t);else{let e=lA(r,n);null!=e&&(u.push(t),c.set(t,e))}}return new lm(c,new nU(u),a.fieldTransforms)}(h,"updateDoc",e._key,t,r,n):(i="updateDoc",s=e._key,a=t,lN("Data must be an object, but it was:",o=h.ya(1,i,s),a),l=[],u=it.empty(),nD(a,(e,t)=>{let r=lx(i,e,s);t=(0,y.getModularInstance)(t);let n=o.da(r);if(t instanceof lE)l.push(r);else{let e=lA(t,n);null!=e&&(l.push(r),u.set(r,e))}}),new lm(u,new nU(l),o.fieldTransforms))).toMutation(e._key,sr.exists(!0))])}function us(e){return ul(o2(e.firestore,li),[new sf(e._key,sr.none())])}function ua(e,t){let r=o2(e.firestore,li),n=o7(e),i=l1(e.converter,t);return ul(r,[l_(lb(e.firestore),"addDoc",n._key,i,null!==e.converter,{}).toMutation(n._key,sr.exists(!1))]).then(()=>n)}function uo(e,...t){var r,n,i,s;let a,o,l,u,c;e=(0,y.getModularInstance)(e);let h={includeMetadataChanges:!1},d=0;"object"!=typeof t[0]||ln(t[d])||(h=t[d],d++);let f={includeMetadataChanges:h.includeMetadataChanges};if(ln(t[d])){let e=t[d];t[d]=null==(r=e.next)?void 0:r.bind(e),t[d+1]=null==(n=e.error)?void 0:n.bind(e),t[d+2]=null==(i=e.complete)?void 0:i.bind(e)}if(e instanceof o5)o=o2(e.firestore,li),l=ik(e._key.path),a={next:r=>{t[d]&&t[d](uu(o,e,r))},error:t[d+1],complete:t[d+2]};else{let r=o2(e,o6);o=o2(r.firestore,li),l=r._query;let n=new l8(o);a={next:e=>{t[d]&&t[d](new l5(o,n,r,e))},error:t[d+1],complete:t[d+2]},lV(e._query)}return s=la(o),c=new oh(l,u=new oU(a),f),s.asyncQueue.enqueueAndForget(async()=>oa(await oG(s),c)),()=>{u.Dc(),s.asyncQueue.enqueueAndForget(async()=>oo(await oG(s),c))}}function ul(e,t){var r;let n;return r=la(e),n=new ni,r.asyncQueue.enqueueAndForget(async()=>o_(await oq(r).then(e=>e.syncEngine),t,n)),n.promise}function uu(e,t,r){let n=r.docs.get(t._key),i=new l8(e);return new l3(e,i,t._key,n,new l2(r.hasPendingWrites,r.fromCache),t.converter)}function uc(){return new lT("serverTimestamp")}function uh(...e){return new lS("arrayUnion",e)}function ud(...e){return new lC("arrayRemove",e)}!function(e=!0){r4=p.SDK_VERSION,(0,p._registerComponent)(new g.Component("firestore",(t,{instanceIdentifier:r,options:n})=>{let i=t.getProvider("app").getImmediate(),s=new li(new nl(t.getProvider("auth-internal")),new nd(t.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new nn(nr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nQ(e.options.projectId,t)}(i,r),i);return n=Object.assign({useFetchStreams:e},n),s._setSettings(n),s},"PUBLIC").setMultipleInstances(!0)),(0,p.registerVersion)(r2,"3.13.0",void 0),(0,p.registerVersion)(r2,"3.13.0","esm2017")}(),e.s(["addDoc",()=>ua,"arrayRemove",()=>ud,"arrayUnion",()=>uh,"collection",()=>o9,"deleteDoc",()=>us,"disableNetwork",()=>lu,"doc",()=>o7,"enableNetwork",()=>ll,"getDoc",()=>l6,"getDocFromCache",()=>l9,"getDocFromServer",()=>l7,"getDocs",()=>ue,"getDocsFromCache",()=>ut,"getDocsFromServer",()=>ur,"getFirestore",()=>ls,"limit",()=>lQ,"onSnapshot",()=>uo,"orderBy",()=>lG,"query",()=>l$,"queryEqual",()=>lt,"refEqual",()=>le,"serverTimestamp",()=>uc,"setDoc",()=>un,"updateDoc",()=>ui,"where",()=>lz],59385),e.s([],81516);var uf=y;let up="firebasestorage.googleapis.com";class ug extends uf.FirebaseError{constructor(e,t,r=0){super(um(e),`Firebase Storage: ${t} (${um(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ug.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return um(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function um(e){return"storage/"+e}function uy(e){return new ug(u.INVALID_ARGUMENT,e)}function uv(){return new ug(u.APP_DELETED,"The Firebase app was deleted.")}(r=u||(u={})).UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment";class uw{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=uw.makeFromUrl(e,t)}catch(t){return new uw(e,"")}if(""===r.path)return r;throw new ug(u.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}static makeFromUrl(e,t){let r=null,n="([A-Za-z0-9.\\-_]+)",i=RegExp("^gs://"+n+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}let a=t.replace(/[.]/g,"\\."),o=RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${n}/o(/([^?#]*).*)?$`,"i"),l=t===up?"(?:storage.googleapis.com|storage.cloud.google.com)":t,c=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:o,indices:{bucket:1,path:3},postModify:s},{regex:RegExp(`^https?://${l}/${n}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let t=0;t<c.length;t++){let n=c[t],i=n.regex.exec(e);if(i){let e=i[n.indices.bucket],t=i[n.indices.path];t||(t=""),r=new uw(e,t),n.postModify(r);break}}if(null==r)throw new ug(u.INVALID_URL,"Invalid URL '"+e+"'.");return r}}class ub{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function u_(e,t,r,n){if(n<t)throw uy(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw uy(`Invalid value for '${e}'. Expected ${r} or less.`)}(n=c||(c={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT";class uE{constructor(e,t,r,n,i,s,a,o,l,u,c,h=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=n,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=c,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){let e=(e,t)=>{if(t)return void e(!1,new uI(!1,null,!0));let r=this.connectionFactory_();this.pendingConnection_=r;let n=e=>{let t=e.loaded,r=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,r)};null!==this.progressCallback_&&r.addUploadProgressListener(n),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{var t;let i,s,a;null!==this.progressCallback_&&r.removeUploadProgressListener(n),this.pendingConnection_=null;let o=r.getErrorCode()===c.NO_ERROR,l=r.getStatus();!o||(t=this.additionalRetryCodes_,i=l>=500&&l<600,s=-1!==[408,429].indexOf(l),a=-1!==t.indexOf(l),(i||s||a)&&this.retry)?e(!1,new uI(!1,null,r.getErrorCode()===c.ABORT)):e(!0,new uI(-1!==this.successCodes_.indexOf(l),r))})},t=(e,t)=>{let r=this.resolve_,n=this.reject_,i=t.connection;if(t.wasSuccessCode)try{let e=this.callback_(i,i.getResponse());void 0!==e?r(e):r()}catch(e){n(e)}else if(null!==i){let e=new ug(u.UNKNOWN,"An unknown error occurred, please check the error payload for server response.");e.serverResponse=i.getErrorText(),n(this.errorCallback_?this.errorCallback_(i,e):e)}else n(t.canceled?this.appDelete_?uv():new ug(u.CANCELED,"User canceled the upload/download."):new ug(u.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))};this.canceled_?t(!1,new uI(!1,null,!0)):this.backoffId_=function(e,t,r){let n=1,i=null,s=null,a=!1,o=0,l=!1;function u(...e){l||(l=!0,t.apply(null,e))}function c(t){i=setTimeout(()=>{i=null,e(d,2===o)},t)}function h(){s&&clearTimeout(s)}function d(e,...t){let r;if(l)return void h();if(e||2===o||a){h(),u.call(null,e,...t);return}n<64&&(n*=2),1===o?(o=2,r=0):r=(n+Math.random())*1e3,c(r)}let f=!1;function p(e){f||(f=!0,h(),!l&&(null!==i?(e||(o=2),clearTimeout(i),c(0)):e||(o=1)))}return c(0),s=setTimeout(()=>{a=!0,p(!0)},r),p}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class uI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class uT{constructor(e,t){this._service=e,t instanceof uw?this._location=t:this._location=uw.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new uT(e,t)}get root(){let e=new uw(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){var e;let t;return -1===(t=(e=this._location.path).lastIndexOf("/",e.length-2))?e:e.slice(t+1)}get storage(){return this._service}get parent(){let e=function(e){if(0===e.length)return null;let t=e.lastIndexOf("/");return -1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;let t=new uw(this._location.bucket,e);return new uT(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw new ug(u.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}}function uS(e,t){let r=null==t?void 0:t.storageBucket;return null==r?null:uw.makeFromBucketSpec(r,e)}class uC{constructor(e,t,r,n,i){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=n,this._firebaseVersion=i,this._bucket=null,this._host=up,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,null!=n?this._bucket=uw.makeFromBucketSpec(n,this._host):this._bucket=uS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=uw.makeFromBucketSpec(this._url,e):this._bucket=uS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){u_("time",0,1/0,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){u_("time",0,1/0,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new uT(this,e)}_makeRequest(e,t,r,n,i=!0){if(this._deleted)return new ub(uv());{let s=function(e,t,r,n,i,s,a=!0){let o=function(e){let t=encodeURIComponent,r="?";for(let n in e)e.hasOwnProperty(n)&&(r=r+(t(n)+"=")+t(e[n])+"&");return r.slice(0,-1)}(e.urlParams),l=e.url+o,u=Object.assign({},e.headers);return t&&(u["X-Firebase-GMPID"]=t),null!==r&&r.length>0&&(u.Authorization="Firebase "+r),u["X-Firebase-Storage-Version"]="webjs/"+(null!=s?s:"AppManager"),null!==n&&(u["X-Firebase-AppCheck"]=n),new uE(l,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a)}(e,this._appId,r,n,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){let[r,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,n).getPromise()}}let uA="@firebase/storage",uk="0.11.2",uR="storage";(0,p._registerComponent)(new g.Component(uR,function(e,{instanceIdentifier:t}){return new uC(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t,p.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,p.registerVersion)(uA,uk,""),(0,p.registerVersion)(uA,uk,"esm2017");let uN=(0,h.initializeApp)({apiKey:"AIzaSyCK7AV4BHrj0o_sPhstug4ph59adWv1eb0",authDomain:"file-transfer-app-9f7bd.firebaseapp.com",projectId:"file-transfer-app-9f7bd",storageBucket:"file-transfer-app-9f7bd.firebasestorage.app",messagingSenderId:"31409683737",appId:"1:31409683737:web:4b48323ff521d3d4619988",measurementId:"G-SDRWCQRRTW"}),uD=(0,d.getAuth)(uN),uO=new d.GoogleAuthProvider,ux=ls(uN);!function(e=(0,p.getApp)(),t){e=(0,uf.getModularInstance)(e);let r=(0,p._getProvider)(e,uR).getImmediate({identifier:void 0}),n=(0,uf.getDefaultEmulatorHostnameAndPort)("storage");n&&function(e,t,r,n={}){!function(e,t,r,n={}){e.host=`${t}:${r}`,e._protocol="http";let{mockUserToken:i}=n;i&&(e._overrideAuthToken="string"==typeof i?i:(0,uf.createMockUserToken)(i,e.app.options.projectId))}(e,t,r,n)}(r,...n)}(uN),e.s(["auth",()=>uD,"db",()=>ux,"provider",()=>uO],38770)},77079,(e,t,r)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function y(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case s:case o:case a:case h:case d:case g:return e;default:switch(e=e&&e.$$typeof){case u:case c:case p:case f:case l:return e;default:return t}}case i:return t}}}r.ContextConsumer=l,r.ContextProvider=u,r.Element=n,r.ForwardRef=c,r.Fragment=s,r.Lazy=p,r.Memo=f,r.Portal=i,r.Profiler=o,r.StrictMode=a,r.Suspense=h,r.SuspenseList=d,r.isContextConsumer=function(e){return y(e)===l},r.isContextProvider=function(e){return y(e)===u},r.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},r.isForwardRef=function(e){return y(e)===c},r.isFragment=function(e){return y(e)===s},r.isLazy=function(e){return y(e)===p},r.isMemo=function(e){return y(e)===f},r.isPortal=function(e){return y(e)===i},r.isProfiler=function(e){return y(e)===o},r.isStrictMode=function(e){return y(e)===a},r.isSuspense=function(e){return y(e)===h},r.isSuspenseList=function(e){return y(e)===d},r.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===o||e===a||e===h||e===d||"object"==typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===f||e.$$typeof===u||e.$$typeof===l||e.$$typeof===c||e.$$typeof===m||void 0!==e.getModuleId)||!1},r.typeOf=y},67875,(e,t,r)=>{"use strict";t.exports=e.r(77079)},89300,(e,t,r)=>{t.exports=function(e,t,r,n){var i=r?r.call(n,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(t),l=0;l<s.length;l++){var u=s[l];if(!o(u))return!1;var c=e[u],h=t[u];if(!1===(i=r?r.call(n,c,h,u):void 0)||void 0===i&&c!==h)return!1}return!0}},87897,39524,e=>{"use strict";function t(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}e.s(["default",()=>t],39524);var r=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,n=t(function(e){return r.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&91>e.charCodeAt(2)});e.s(["default",()=>n],87897)},40563,(e,t,r)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,s=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,h=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,g=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,w=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function E(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case h:case d:case a:case l:case o:case p:return e;default:switch(e=e&&e.$$typeof){case c:case f:case y:case m:case u:return e;default:return t}}case s:return t}}}function I(e){return E(e)===d}r.AsyncMode=h,r.ConcurrentMode=d,r.ContextConsumer=c,r.ContextProvider=u,r.Element=i,r.ForwardRef=f,r.Fragment=a,r.Lazy=y,r.Memo=m,r.Portal=s,r.Profiler=l,r.StrictMode=o,r.Suspense=p,r.isAsyncMode=function(e){return I(e)||E(e)===h},r.isConcurrentMode=I,r.isContextConsumer=function(e){return E(e)===c},r.isContextProvider=function(e){return E(e)===u},r.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},r.isForwardRef=function(e){return E(e)===f},r.isFragment=function(e){return E(e)===a},r.isLazy=function(e){return E(e)===y},r.isMemo=function(e){return E(e)===m},r.isPortal=function(e){return E(e)===s},r.isProfiler=function(e){return E(e)===l},r.isStrictMode=function(e){return E(e)===o},r.isSuspense=function(e){return E(e)===p},r.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===d||e===l||e===o||e===p||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===m||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===w||e.$$typeof===b||e.$$typeof===_||e.$$typeof===v)},r.typeOf=E},49957,(e,t,r)=>{"use strict";t.exports=e.r(40563)},34980,(e,t,r)=>{"use strict";var n=e.r(49957),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return n.isMemo(e)?a:o[e.$$typeof]||i}o[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[n.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;t.exports=function e(t,r,n){if("string"!=typeof r){if(p){var i=f(r);i&&i!==p&&e(t,i,n)}var a=c(r);h&&(a=a.concat(h(r)));for(var o=l(t),g=l(r),m=0;m<a.length;++m){var y=a[m];if(!s[y]&&!(n&&n[y])&&!(g&&g[y])&&!(o&&o[y])){var v=d(r,y);try{u(t,y,v)}catch(e){}}}}return t}},60814,e=>{"use strict";var t,r,n=e.i(50461),i=e.i(67875),s=e.i(91788),a=e.i(89300);let o=function(e){function t(e,t,n){var i=t.trim().split(p);t=i;var s=i.length,a=e.length;switch(a){case 0:case 1:var o=0;for(e=0===a?"":e[0]+" ";o<s;++o)t[o]=r(e,t[o],n).trim();break;default:var l=o=0;for(t=[];o<s;++o)for(var u=0;u<a;++u)t[l++]=r(e[u]+" ",i[o],n).trim()}return t}function r(e,t,r){var n=t.charCodeAt(0);switch(33>n&&(n=(t=t.trim()).charCodeAt(0)),n){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<+r&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function n(e,t,r,s){var a=e+";",o=2*t+3*r+4*s;if(944===o){e=a.indexOf(":",9)+1;var l=a.substring(e,a.length-1).trim();return l=a.substring(0,e).trim()+l+";",1===R||2===R&&i(l,1)?"-webkit-"+l+l:l}if(0===R||2===R&&!i(a,1))return a;switch(o){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(S,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(l=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+l+a;case 1005:return d.test(a)?a.replace(h,":-webkit-")+a.replace(h,":-moz-")+a:a;case 1e3:switch(t=(l=a.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=a.replace(w,"tb");break;case 232:l=a.replace(w,"tb-rl");break;case 220:l=a.replace(w,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+l+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,o=(l=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:a=a.replace(l,"-webkit-"+l)+";"+a;break;case 207:case 102:a=a.replace(l,"-webkit-"+(102<o?"inline-":"")+"box")+";"+a.replace(l,"-webkit-"+l)+";"+a.replace(l,"-ms-"+l+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return l=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+l+"-ms-flex-"+l+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(E,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(E,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===T.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?n(e.replace("stretch","fill-available"),t,r,s).replace(":fill-available",":stretch"):a.replace(l,"-webkit-"+l)+a.replace(l,"-moz-"+l.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===r+s&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(f,"$1-webkit-$2")+a}return a}function i(e,t){var r=e.indexOf(1===t?":":"{"),n=e.substring(0,3!==t?r:10);return r=e.substring(r+1,e.length-1),x(2!==t?n:n.replace(I,"$1"),r,t)}function s(e,t){var r=n(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return r!==t+";"?r.replace(_," or ($1)").substring(4):"("+t+")"}function a(e,t,r,n,i,s,a,o,u,c){for(var h,d=0,f=t;d<O;++d)switch(h=D[d].call(l,e,f,r,n,i,s,a,o,u,c)){case void 0:case!1:case!0:case null:break;default:f=h}if(f!==t)return f}function o(e){return void 0!==(e=e.prefix)&&(x=null,e?"function"!=typeof e?R=1:(R=2,x=e):R=0),o}function l(e,r){var o=e;if(33>o.charCodeAt(0)&&(o=o.trim()),o=[o],0<O){var l=a(-1,r,o,o,A,C,0,0,0,0);void 0!==l&&"string"==typeof l&&(r=l)}var h=function e(r,o,l,h,d){for(var f,p,g,w,_,E=0,I=0,T=0,S=0,D=0,x=0,L=g=f=0,M=0,F=0,U=0,V=0,j=l.length,B=j-1,$="",q="",z="",H="";M<j;){if(p=l.charCodeAt(M),M===B&&0!==I+S+T+E&&(0!==I&&(p=47===I?10:47),S=T=E=0,j++,B++),0===I+S+T+E){if(M===B&&(0<F&&($=$.replace(c,"")),0<$.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:$+=l.charAt(M)}p=59}switch(p){case 123:for(f=($=$.trim()).charCodeAt(0),g=1,V=++M;M<j;){switch(p=l.charCodeAt(M)){case 123:g++;break;case 125:g--;break;case 47:switch(p=l.charCodeAt(M+1)){case 42:case 47:e:{for(L=M+1;L<B;++L)switch(l.charCodeAt(L)){case 47:if(42===p&&42===l.charCodeAt(L-1)&&M+2!==L){M=L+1;break e}break;case 10:if(47===p){M=L+1;break e}}M=L}}break;case 91:p++;case 40:p++;case 34:case 39:for(;M++<B&&l.charCodeAt(M)!==p;);}if(0===g)break;M++}if(g=l.substring(V,M),0===f&&(f=($=$.replace(u,"").trim()).charCodeAt(0)),64===f){switch(0<F&&($=$.replace(c,"")),p=$.charCodeAt(1)){case 100:case 109:case 115:case 45:F=o;break;default:F=N}if(V=(g=e(o,F,g,p,d+1)).length,0<O&&(_=a(3,g,F=t(N,$,U),o,A,C,V,p,d,h),$=F.join(""),void 0!==_&&0===(V=(g=_.trim()).length)&&(p=0,g="")),0<V)switch(p){case 115:$=$.replace(b,s);case 100:case 109:case 45:g=$+"{"+g+"}";break;case 107:g=($=$.replace(m,"$1 $2"))+"{"+g+"}",g=1===R||2===R&&i("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=$+g,112===h&&(q+=g,g="")}else g=""}else g=e(o,t(o,$,U),g,h,d+1);z+=g,g=U=F=L=f=0,$="",p=l.charCodeAt(++M);break;case 125:case 59:if(1<(V=($=(0<F?$.replace(c,""):$).trim()).length))switch(0===L&&(45===(f=$.charCodeAt(0))||96<f&&123>f)&&(V=($=$.replace(" ",":")).length),0<O&&void 0!==(_=a(1,$,o,r,A,C,q.length,h,d,h))&&0===(V=($=_.trim()).length)&&($="\0\0"),f=$.charCodeAt(0),p=$.charCodeAt(1),f){case 0:break;case 64:if(105===p||99===p){H+=$+l.charAt(M);break}default:58!==$.charCodeAt(V-1)&&(q+=n($,f,p,$.charCodeAt(2)))}U=F=L=f=0,$="",p=l.charCodeAt(++M)}}switch(p){case 13:case 10:47===I?I=0:0===1+f&&107!==h&&0<$.length&&(F=1,$+="\0"),0<O*P&&a(0,$,o,r,A,C,q.length,h,d,h),C=1,A++;break;case 59:case 125:if(0===I+S+T+E){C++;break}default:switch(C++,w=l.charAt(M),p){case 9:case 32:if(0===S+E+I)switch(D){case 44:case 58:case 9:case 32:w="";break;default:32!==p&&(w=" ")}break;case 0:w="\\0";break;case 12:w="\\f";break;case 11:w="\\v";break;case 38:0===S+I+E&&(F=U=1,w="\f"+w);break;case 108:if(0===S+I+E+k&&0<L)switch(M-L){case 2:112===D&&58===l.charCodeAt(M-3)&&(k=D);case 8:111===x&&(k=x)}break;case 58:0===S+I+E&&(L=M);break;case 44:0===I+T+S+E&&(F=1,w+="\r");break;case 34:case 39:0===I&&(S=S===p?0:0===S?p:S);break;case 91:0===S+I+T&&E++;break;case 93:0===S+I+T&&E--;break;case 41:0===S+I+E&&T--;break;case 40:0===S+I+E&&(0===f&&(2*D+3*x==533||(f=1)),T++);break;case 64:0===I+T+S+E+L+g&&(g=1);break;case 42:case 47:if(!(0<S+E+T))switch(I){case 0:switch(2*p+3*l.charCodeAt(M+1)){case 235:I=47;break;case 220:V=M,I=42}break;case 42:47===p&&42===D&&V+2!==M&&(33===l.charCodeAt(V+2)&&(q+=l.substring(V,M+1)),w="",I=0)}}0===I&&($+=w)}x=D,D=p,M++}if(0<(V=q.length)){if(F=o,0<O&&void 0!==(_=a(2,q,F,r,A,C,V,h,d,h))&&0===(q=_).length)return H+q+z;if(q=F.join(",")+"{"+q+"}",0!=R*k){switch(2!==R||i(q,2)||(k=0),k){case 111:q=q.replace(v,":-moz-$1")+q;break;case 112:q=q.replace(y,"::-webkit-input-$1")+q.replace(y,"::-moz-$1")+q.replace(y,":-ms-input-$1")+q}k=0}}return H+q+z}(N,o,r,0,0);return 0<O&&void 0!==(l=a(-2,h,o,o,A,C,h.length,0,0,0))&&(h=l),k=0,C=A=1,h}var u=/^\0+/g,c=/[\0\r\f]/g,h=/: */g,d=/zoo|gra/,f=/([,: ])(transform)/g,p=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,v=/:(read-only)/g,w=/[svh]\w+-[tblr]{2}/,b=/\(\s*(.*)\s*\)/g,_=/([\s\S]*?);/g,E=/-self|flex-/g,I=/[^]*?(:[rp][el]a[\w-]+)[^]*/,T=/stretch|:\s*\w+\-(?:conte|avail)/,S=/([^-])(image-set\()/,C=1,A=1,k=0,R=1,N=[],D=[],O=0,x=null,P=0;return l.use=function e(t){switch(t){case void 0:case null:O=D.length=0;break;default:if("function"==typeof t)D[O++]=t;else if("object"==typeof t)for(var r=0,n=t.length;r<n;++r)e(t[r]);else P=0|!!t}return e},l.set=o,void 0!==e&&o(e),l},l={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var u=e.i(87897),c=e.i(34980);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var d=function(e,t){for(var r=[e[0]],n=0,i=t.length;n<i;n+=1)r.push(t[n],e[n+1]);return r},f=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,i.typeOf)(e)},p=Object.freeze([]),g=Object.freeze({});function m(e){return"function"==typeof e}function y(e){return e.displayName||e.name||"Component"}function v(e){return e&&"string"==typeof e.styledComponentId}var w=void 0!==n.default&&void 0!==n.default.env&&(n.default.env.REACT_APP_SC_ATTR||n.default.env.SC_ATTR)||"data-styled",b="undefined"!=typeof window&&"HTMLElement"in window,_=!!("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:void 0!==n.default&&void 0!==n.default.env&&(void 0!==n.default.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==n.default.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==n.default.env.REACT_APP_SC_DISABLE_SPEEDY&&n.default.env.REACT_APP_SC_DISABLE_SPEEDY:void 0!==n.default.env.SC_DISABLE_SPEEDY&&""!==n.default.env.SC_DISABLE_SPEEDY&&"false"!==n.default.env.SC_DISABLE_SPEEDY&&n.default.env.SC_DISABLE_SPEEDY));function E(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(r.length>0?" Args: "+r.join(", "):""))}var I=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,r=0;r<e;r++)t+=this.groupSizes[r];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,n=r.length,i=n;e>=i;)(i<<=1)<0&&E(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(r),this.length=i;for(var s=n;s<i;s++)this.groupSizes[s]=0}for(var a=this.indexOfGroup(e+1),o=0,l=t.length;o<l;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[e]++,a++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),n=r+t;this.groupSizes[e]=0;for(var i=r;i<n;i++)this.tag.deleteRule(r)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var r=this.groupSizes[e],n=this.indexOfGroup(e),i=n+r,s=n;s<i;s++)t+=this.tag.getRule(s)+"/*!sc*/\n";return t},e}(),T=new Map,S=new Map,C=1,A=function(e){if(T.has(e))return T.get(e);for(;S.has(C);)C++;var t=C++;return T.set(e,t),S.set(t,e),t},k=function(e,t){t>=C&&(C=t+1),T.set(e,t),S.set(t,e)},R="style["+w+'][data-styled-version="5.3.11"]',N=RegExp("^"+w+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),D=function(e,t,r){for(var n,i=r.split(","),s=0,a=i.length;s<a;s++)(n=i[s])&&e.registerName(t,n)},O=function(e,t){for(var r=(t.textContent||"").split("/*!sc*/\n"),n=[],i=0,s=r.length;i<s;i++){var a=r[i].trim();if(a){var o=a.match(N);if(o){var l=0|parseInt(o[1],10),u=o[2];0!==l&&(k(u,l),D(e,u,o[3]),e.getTag().insertRules(l,n)),n.length=0}else n.push(a)}}},x=function(){return"undefined"!=typeof __webpack_nonce__?__webpack_nonce__:null},P=function(e){var t=document.head,r=e||t,n=document.createElement("style"),i=function(e){for(var t=e.childNodes,r=t.length;r>=0;r--){var n=t[r];if(n&&1===n.nodeType&&n.hasAttribute(w))return n}}(r),s=void 0!==i?i.nextSibling:null;n.setAttribute(w,"active"),n.setAttribute("data-styled-version","5.3.11");var a=x();return a&&n.setAttribute("nonce",a),r.insertBefore(n,s),n},L=function(){function e(e){var t=this.element=P(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,r=0,n=t.length;r<n;r++){var i=t[r];if(i.ownerNode===e)return i}E(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),M=function(){function e(e){var t=this.element=P(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t),n=this.nodes[e];return this.element.insertBefore(r,n||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),F=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),U=b,V={isServer:!b,useCSSOMInjection:!_},j=function(){function e(e,t,r){void 0===e&&(e=g),void 0===t&&(t={}),this.options=h({},V,{},e),this.gs=t,this.names=new Map(r),this.server=!!e.isServer,!this.server&&b&&U&&(U=!1,function(e){for(var t=document.querySelectorAll(R),r=0,n=t.length;r<n;r++){var i=t[r];i&&"active"!==i.getAttribute(w)&&(O(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return A(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,r){return void 0===r&&(r=!0),new e(h({},this.options,{},t),this.gs,r&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){var e,t,r,n;return this.tag||(this.tag=(t=(e=this.options).isServer,r=e.useCSSOMInjection,n=e.target,new I(t?new F(n):r?new L(n):new M(n))))},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(A(e),this.names.has(e))this.names.get(e).add(t);else{var r=new Set;r.add(t),this.names.set(e,r)}},t.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(A(e),r)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(A(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),r=t.length,n="",i=0;i<r;i++){var s,a=(s=i,S.get(s));if(void 0!==a){var o=e.names.get(a),l=t.getGroup(i);if(o&&l&&o.size){var u=w+".g"+i+'[id="'+a+'"]',c="";void 0!==o&&o.forEach(function(e){e.length>0&&(c+=e+",")}),n+=""+l+u+'{content:"'+c+'"}/*!sc*/\n'}}}return n}(this)},e}(),B=/(a)(d)/gi,$=function(e){return String.fromCharCode(e+(e>25?39:97))};function q(e){var t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=$(t%52)+r;return($(t%52)+r).replace(B,"$1-$2")}var z=function(e,t){for(var r=t.length;r;)e=33*e^t.charCodeAt(--r);return e},H=function(e){return z(5381,e)};function K(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(m(r)&&!v(r))return!1}return!0}var G=H("5.3.11"),W=function(){function e(e,t,r){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===r||r.isStatic)&&K(e),this.componentId=t,this.baseHash=z(G,t),this.baseStyle=r,j.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,r){var n=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,r)),this.isStatic&&!r.hash)if(this.staticRulesId&&t.hasNameForId(n,this.staticRulesId))i.push(this.staticRulesId);else{var s=eh(this.rules,e,t,r).join(""),a=q(z(this.baseHash,s)>>>0);if(!t.hasNameForId(n,a)){var o=r(s,"."+a,void 0,n);t.insertRules(n,a,o)}i.push(a),this.staticRulesId=a}else{for(var l=this.rules.length,u=z(this.baseHash,r.hash),c="",h=0;h<l;h++){var d=this.rules[h];if("string"==typeof d)c+=d;else if(d){var f=eh(d,e,t,r),p=Array.isArray(f)?f.join(""):f;u=z(u,p+h),c+=p}}if(c){var g=q(u>>>0);if(!t.hasNameForId(n,g)){var m=r(c,"."+g,void 0,n);t.insertRules(n,g,m)}i.push(g)}}return i.join(" ")},e}(),Q=/^\s*\/\/.*$/gm,Y=[":","[",".","#"];function X(e){var t,r,n,i,s=void 0===e?g:e,a=s.options,l=void 0===a?g:a,u=s.plugins,c=void 0===u?p:u,h=new o(l),d=[],f=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(r,n,i,s,a,o,l,u,c,h){switch(r){case 1:if(0===c&&64===n.charCodeAt(0))return e(n+";"),"";break;case 2:if(0===u)return n+"/*|*/";break;case 3:switch(u){case 102:case 112:return e(i[0]+n),"";default:return n+(0===h?"/*|*/":"")}case -2:n.split("/*|*/}").forEach(t)}}}(function(e){d.push(e)}),m=function(e,n,s){return 0===n&&-1!==Y.indexOf(s[r.length])||s.match(i)?e:"."+t};function y(e,s,a,o){void 0===o&&(o="&");var l=e.replace(Q,""),u=s&&a?a+" "+s+" { "+l+" }":l;return t=o,n=RegExp("\\"+(r=s)+"\\b","g"),i=RegExp("(\\"+r+"\\b){2,}"),h(a||!s?"":s,u)}return h.use([].concat(c,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(r)>0&&(i[0]=i[0].replace(n,m))},f,function(e){if(-2===e){var t=d;return d=[],t}}])),y.hash=c.length?c.reduce(function(e,t){return t.name||E(15),z(e,t.name)},5381).toString():"",y}var J=s.default.createContext(),Z=(J.Consumer,s.default.createContext()),ee=(Z.Consumer,new j),et=X();function er(){return(0,s.useContext)(J)||ee}function en(e){var t=(0,s.useState)(e.stylisPlugins),r=t[0],n=t[1],i=er(),o=(0,s.useMemo)(function(){var t=i;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t},[e.disableCSSOMInjection,e.sheet,e.target]),l=(0,s.useMemo)(function(){return X({options:{prefix:!e.disableVendorPrefixes},plugins:r})},[e.disableVendorPrefixes,r]);return(0,s.useEffect)(function(){(0,a.default)(r,e.stylisPlugins)||n(e.stylisPlugins)},[e.stylisPlugins]),s.default.createElement(J.Provider,{value:o},s.default.createElement(Z.Provider,{value:l},e.children))}var ei=function(){function e(e,t){var r=this;this.inject=function(e,t){void 0===t&&(t=et);var n=r.name+t.hash;e.hasNameForId(r.id,n)||e.insertRules(r.id,n,t(r.rules,n,"@keyframes"))},this.toString=function(){return E(12,String(r.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=et),this.name+e.hash},e}(),es=/([A-Z])/,ea=/([A-Z])/g,eo=/^ms-/,el=function(e){return"-"+e.toLowerCase()};function eu(e){return es.test(e)?e.replace(ea,el).replace(eo,"-ms-"):e}var ec=function(e){return null==e||!1===e||""===e};function eh(e,t,r,n){if(Array.isArray(e)){for(var i,s=[],a=0,o=e.length;a<o;a+=1)""!==(i=eh(e[a],t,r,n))&&(Array.isArray(i)?s.push.apply(s,i):s.push(i));return s}return ec(e)?"":v(e)?"."+e.styledComponentId:m(e)?"function"!=typeof e||e.prototype&&e.prototype.isReactComponent||!t?e:eh(e(t),t,r,n):e instanceof ei?r?(e.inject(r,n),e.getName(n)):e:f(e)?function e(t,r){var n,i=[];for(var s in t)t.hasOwnProperty(s)&&!ec(t[s])&&(Array.isArray(t[s])&&t[s].isCss||m(t[s])?i.push(eu(s)+":",t[s],";"):f(t[s])?i.push.apply(i,e(t[s],s)):i.push(eu(s)+": "+(null==(n=t[s])||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||s in l||s.startsWith("--")?String(n).trim():n+"px")+";"));return r?[r+" {"].concat(i,["}"]):i}(e):e.toString()}var ed=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function ef(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return m(e)||f(e)?ed(eh(d(p,[e].concat(r)))):0===r.length&&1===e.length&&"string"==typeof e[0]?e:ed(eh(d(e,r)))}var ep=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,eg=/(^-|-$)/g;function em(e){return e.replace(ep,"-").replace(eg,"")}var ey=function(e){return q(H(e)>>>0)};function ev(e){return"string"==typeof e}var ew=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},eb=s.default.createContext();eb.Consumer;var e_={},eE=function(e){return function e(t,r,n){if(void 0===n&&(n=g),!(0,i.isValidElementType)(r))return E(1,String(r));var s=function(){return t(r,n,ef.apply(void 0,arguments))};return s.withConfig=function(i){return e(t,r,h({},n,{},i))},s.attrs=function(i){return e(t,r,h({},n,{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},s}(function e(t,r,n){var i=v(t),a=!ev(t),o=r.attrs,l=void 0===o?p:o,d=r.componentId,f=void 0===d?(T=r.displayName,S=r.parentComponentId,e_[C="string"!=typeof T?"sc":em(T)]=(e_[C]||0)+1,A=C+"-"+ey("5.3.11"+C+e_[C]),S?S+"-"+A:A):d,w=r.displayName,b=void 0===w?ev(t)?"styled."+t:"Styled("+y(t)+")":w,_=r.displayName&&r.componentId?em(r.displayName)+"-"+r.componentId:r.componentId||f,E=i&&t.attrs?Array.prototype.concat(t.attrs,l).filter(Boolean):l,I=r.shouldForwardProp;i&&t.shouldForwardProp&&(I=r.shouldForwardProp?function(e,n,i){return t.shouldForwardProp(e,n,i)&&r.shouldForwardProp(e,n,i)}:t.shouldForwardProp);var T,S,C,A,k,R=new W(n,_,i?t.componentStyle:void 0),N=R.isStatic&&0===l.length,D=function(e,t){return function(e,t,r,n){var i,a,o,l,c,d,f,p=e.attrs,y=e.componentStyle,v=e.defaultProps,w=e.foldedComponentIds,b=e.shouldForwardProp,_=e.styledComponentId,E=e.target,I=(i=(0,s.useContext)(eb),void 0===(a=v)&&(a=g),o=t.theme!==a.theme&&t.theme||i||a.theme||g,void 0===o&&(o=g),l=h({},t,{theme:o}),c={},p.forEach(function(e){var t,r,n,i=e;for(t in m(i)&&(i=i(l)),i)l[t]=c[t]="className"===t?(r=c[t],n=i[t],r&&n?r+" "+n:r||n):i[t]}),[l,c]),T=I[0],S=I[1],C=(d=er(),f=(0,s.useContext)(Z)||et,n?y.generateAndInjectStyles(g,d,f):y.generateAndInjectStyles(T,d,f)),A=S.$as||t.$as||S.as||t.as||E,k=ev(A),R=S!==t?h({},t,{},S):t,N={};for(var D in R)"$"!==D[0]&&"as"!==D&&("forwardedAs"===D?N.as=R[D]:(b?b(D,u.default,A):!k||(0,u.default)(D))&&(N[D]=R[D]));return t.style&&S.style!==t.style&&(N.style=h({},t.style,{},S.style)),N.className=Array.prototype.concat(w,_,C!==_?C:null,t.className,S.className).filter(Boolean).join(" "),N.ref=r,(0,s.createElement)(A,N)}(k,e,t,N)};return D.displayName=b,(k=s.default.forwardRef(D)).attrs=E,k.componentStyle=R,k.displayName=b,k.shouldForwardProp=I,k.foldedComponentIds=i?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):p,k.styledComponentId=_,k.target=i?t.target:t,k.withComponent=function(t){var i=r.componentId,s=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)t.indexOf(r=s[n])>=0||(i[r]=e[r]);return i}(r,["componentId"]),a=i&&i+"-"+(ev(t)?t:em(y(t)));return e(t,h({},s,{attrs:E,componentId:a}),n)},Object.defineProperty(k,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(var s=0;s<n.length;s++){var a=n[s];if(ew(a))for(var o in a)"__proto__"!==o&&"constructor"!==o&&"prototype"!==o&&function(t,r,n){var i=t[n];ew(r)&&ew(i)?e(i,r):t[n]=r}(t,a[o],o)}return t}({},t.defaultProps,e):e}}),Object.defineProperty(k,"toString",{value:function(){return"."+k.styledComponentId}}),a&&(0,c.default)(k,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),k},e)};function eI(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=ef.apply(void 0,[e].concat(r)).join("");return new ei(ey(i),i)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){eE[e]=eE(e)}),(t=(function(e,t){this.rules=e,this.componentId=t,this.isStatic=K(e),j.registerId(this.componentId+1)}).prototype).createStyles=function(e,t,r,n){var i=n(eh(this.rules,t,r,n).join(""),""),s=this.componentId+e;r.insertRules(s,s,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,r,n){e>2&&j.registerId(this.componentId+e),this.removeStyles(e,r),this.createStyles(e,t,r,n)},(r=(function(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var r=x();return"<style "+[r&&'nonce="'+r+'"',w+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?E(2):e._emitSheetCSS()},this.getStyleElement=function(){if(e.sealed)return E(2);var t,r=((t={})[w]="",t["data-styled-version"]="5.3.11",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),n=x();return n&&(r.nonce=n),[s.default.createElement("style",h({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new j({isServer:!0}),this.sealed=!1}).prototype).collectStyles=function(e){return this.sealed?E(2):s.default.createElement(en,{sheet:this.instance},e)},r.interleaveWithNodeStream=function(e){return E(3)},e.s(["default",0,eE,"keyframes",()=>eI],60814)},3828,(e,t,r)=>{t.exports=e.r(26990)},83921,e=>{"use strict";var t=e.i(91398),r=e.i(91788);let n=(0,r.createContext)();e.s(["DarkModeContext",0,n,"DarkModeProvider",0,({children:e})=>{let[i,s]=(0,r.useState)(()=>"true"===localStorage.getItem("darkMode"));return(0,r.useEffect)(()=>{localStorage.setItem("darkMode",i)},[i]),(0,t.jsx)(n.Provider,{value:{darkMode:i,toggleDarkMode:()=>{s(e=>!e)}},children:e})}])}]);