"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[467],{6467:function(n,e,r){r.r(e),r.d(e,{default:function(){return V}});var t=r(7568),o=r(828),i=r(7297),a=r(7582),l=r(5893),s=r(7294),c=r(3349),u=r(1708),d=r(66),h=r(2485),f=r(9417),x=r(3946),p=r(1403),v=r(7976),g=r(2761),Z=r(1163),k=r(6677),b=r(7896),j=r(6100);function m(){var n=(0,i.Z)(["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  padding: 15px;\n  word-break: break-word;\n\n  :hover {\n    background-color: #e9eaeb;\n  }\n"]);return m=function(){return n},n}function y(){var n=(0,i.Z)(["\n  margin: 5px;\n  margin-right: 15px;\n"]);return y=function(){return n},n}var w=function(n){var e,r,t=n.id,i=n.users,a=(0,Z.useRouter)(),s=(0,o.Z)((0,c.F_)(u.I8),1)[0],d=s?(0,b.Z)(i,s):null,h=d?(0,j.IO)((0,j.hJ)(u.db,"users"),(0,j.ar)("email","==",d)):null,f=(0,o.Z)((0,k.Kx)(h),1)[0],x=null===f||void 0===f||null===(e=f.docs)||void 0===e||null===(r=e[0])||void 0===r?void 0:r.data();return(0,l.jsxs)(C,{onClick:function(){t&&a.push("/chat/".concat(t))},children:[x?(0,l.jsx)(M,{src:x.photoURL}):(0,l.jsx)(M,{children:d?d[0]:"?"}),(0,l.jsx)("p",{children:null!==d&&void 0!==d?d:"Loading..."})]})},C=d.ZP.div(m()),M=(0,d.ZP)(h.Z)(y()),S=r(3999),P=r(3419),_=r(5819),E=r(657),B=r(7645),U=r(6514),A=r(1425),D=r(6692),F=r(9653),I=r(5861),J=r(5931);function L(){var n=(0,i.Z)(["\n  flex: 0.45;\n  border-right: 1px solid ",";\n  height: 100vh;\n  min-width: 300px;\n  max-width: 350px;\n  overflow-y: scroll;\n  display: flex;\n  flex-direction: column;\n  background-color: ",";\n  color: ",";\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n"]);return L=function(){return n},n}function R(){var n=(0,i.Z)(["\n  cursor: pointer;\n\n  :hover {\n    opacity: 0.8;\n  }\n"]);return R=function(){return n},n}function T(){var n=(0,i.Z)(["\n  width: 100%;\n  &&& {\n    border-top: 1px solid whitesmoke;\n    border-bottom: 1px solid whitesmoke;\n  }\n"]);return T=function(){return n},n}function W(){var n=(0,i.Z)(["\n  display: flex;\n  align-items: center;\n  padding: 5px;\n  border-radius: 2px;\n  padding: 20px;\n  background-color: ",";\n"]);return W=function(){return n},n}function N(){var n=(0,i.Z)(["\n  outline-width: 0;\n  border: none;\n  flex: 1;\n  background-color: ",";\n  color: ",";\n  \n  ::placeholder {\n    color: ",";\n  }\n"]);return N=function(){return n},n}function O(){var n=(0,i.Z)(["\n  display: flex;\n  position: sticky;\n  top: 0;\n  background-color: ",";\n  z-index: 1;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px;\n  height: 80px;\n  border-bottom: 1px solid ",";\n"]);return O=function(){return n},n}function z(){var n=(0,i.Z)([""]);return z=function(){return n},n}function K(){var n=(0,i.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 10px;\n  \n  &:hover {\n    background-color: ",";\n  }\n"]);return K=function(){return n},n}function G(){var n=(0,i.Z)(["\n  visibility: hidden;\n  \n  ",":hover & {\n    visibility: visible;\n  }\n"]);return G=function(){return n},n}var V=function(){var n=(0,o.Z)((0,c.F_)(u.I8),1)[0],e=(0,s.useState)(null),r=e[0],i=e[1],d=(0,s.useState)(null),h=d[0],Z=d[1],b=(0,s.useState)(null),m=b[0],y=b[1],C=(0,s.useState)(null),M=C[0],L=C[1],R=(0,s.useState)(""),T=R[0],W=R[1],N=(0,s.useState)(!1),O=N[0],z=N[1],K=(0,s.useState)(!1),G=K[0],V=K[1],tn=(0,s.useContext)(J.v)||{darkMode:!1,toggleDarkMode:function(){}},on=tn.darkMode,an=tn.toggleDarkMode,ln=n?(0,j.IO)((0,j.hJ)(u.db,"chats"),(0,j.ar)("users","array-contains",n.email)):null,sn=(0,o.Z)((0,k.Kx)(ln),3),cn=sn[0],un=sn[1],dn=sn[2];s.useEffect((function(){dn&&console.error("Collection error:",dn)}),[dn]);var hn=function(){var e=(0,t.Z)((function(){var e,r,t;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:if(!n)return console.error("No user logged in"),[2];if(console.log("Current user:",n.email),!(e=prompt("Please enter an email address for the user you wish to chat with")))return console.log("User cancelled prompt"),[2];if(console.log("Input email:",e),!S.G(e))return alert("Please enter a valid email address"),[2];if(e===n.email)return alert("You cannot chat with yourself"),[2];if(i=e,cn&&cn.docs.find((function(n){return n.data().users.includes(i)})))return alert("Chat already exists with this user"),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),console.log("Attempting to create chat with:",{users:[n.email,e],deletedBy:[]}),[4,(0,j.ET)((0,j.hJ)(u.db,"chats"),{users:[n.email,e],deletedBy:[],createdAt:new Date})];case 2:return r=o.sent(),console.log("Chat created successfully with ID:",r.id),[3,4];case 3:return t=o.sent(),console.error("Error creating chat:",t),console.error("Error code:",t.code),console.error("Error message:",t.message),alert("Failed to create chat: ".concat(t.message)),[3,4];case 4:return[2]}var i}))}));return function(){return e.apply(this,arguments)}}(),fn=function(){i(null),y(null),L(null)},xn=function(){Z(null)},pn=function(){z(!1)},vn=function(){V(!1)},gn=function(){var e=(0,t.Z)((function(){var e,r;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:if(!m||!n)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),e=(0,j.JU)(u.db,"chats",m),[4,(0,j.r7)(e,{deletedBy:(0,j.vr)(n.email)})];case 2:return t.sent(),fn(),alert("Chat deleted"),[3,4];case 3:return r=t.sent(),console.error("Error deleting chat:",r),alert("Failed to delete chat"),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),Zn=function(){var e=(0,t.Z)((function(){var e,r,t,o;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:if(!M||!n)return[2];e=M.find((function(e){return e!==n.email})),i.label=1;case 1:return i.trys.push([1,4,,5]),r=(0,j.JU)(u.db,"users",n.uid),[4,(0,j.r7)(r,{blockedUsers:(0,j.vr)(e)})];case 2:return i.sent(),t=(0,j.JU)(u.db,"chats",m),[4,(0,j.r7)(t,{deletedBy:(0,j.vr)(n.email)})];case 3:return i.sent(),fn(),alert("".concat(e," has been blocked")),[3,5];case 4:return o=i.sent(),console.error("Error blocking user:",o),alert("Failed to block user"),[3,5];case 5:return[2]}}))}));return function(){return e.apply(this,arguments)}}();if(!n)return(0,l.jsx)(Y,{darkMode:on,children:"Loading..."});var kn=null===cn||void 0===cn?void 0:cn.docs.filter((function(e){return!(e.data().deletedBy||[]).includes(n.email)})).filter((function(e){if(!T.trim())return!0;var r=(e.data().users||[]).find((function(e){return e!==n.email}));return null===r||void 0===r?void 0:r.toLowerCase().includes(T.toLowerCase())}));return(0,l.jsxs)(Y,{darkMode:on,children:[(0,l.jsxs)($,{darkMode:on,children:[(0,l.jsx)(q,{onClick:function(){return u.I8.signOut()},src:n.photoURL}),(0,l.jsxs)(nn,{children:[(0,l.jsx)(x.Z,{children:(0,l.jsx)(p.Z,{})}),(0,l.jsx)(x.Z,{onClick:function(n){Z(n.currentTarget)},children:(0,l.jsx)(v.Z,{})})]})]}),(0,l.jsxs)(Q,{darkMode:on,children:[(0,l.jsx)(g.Z,{}),(0,l.jsx)(X,{darkMode:on,placeholder:"Search in chats",type:"text",value:T,onChange:function(n){return W(n.target.value)}})]}),(0,l.jsx)(H,{onClick:hn,disabled:un,children:"Start a new chat"}),null===kn||void 0===kn?void 0:kn.map((function(n){return(0,l.jsxs)(en,{darkMode:on,children:[(0,l.jsx)(w,{id:n.id,users:n.data().users}),(0,l.jsx)(rn,{onClick:function(e){return r=e,t=n.id,o=n.data().users,i(r.currentTarget),y(t),void L(o);var r,t,o},children:(0,l.jsx)(v.Z,{fontSize:"small"})})]},n.id)})),(0,l.jsxs)(P.Z,{anchorEl:h,open:Boolean(h),onClose:xn,children:[(0,l.jsx)(_.Z,{onClick:function(){z(!0),xn()},children:"Settings"}),(0,l.jsx)(_.Z,{onClick:function(){V(!0),xn()},children:"About"})]}),(0,l.jsxs)(P.Z,{anchorEl:r,open:Boolean(r),onClose:fn,children:[(0,l.jsx)(_.Z,{onClick:Zn,children:"Block User"}),(0,l.jsx)(_.Z,{onClick:gn,children:"Delete Chat"})]}),(0,l.jsxs)(E.Z,{open:O,onClose:pn,maxWidth:"sm",fullWidth:!0,children:[(0,l.jsx)(B.Z,{children:"Settings"}),(0,l.jsx)(U.Z,{children:(0,l.jsx)(D.Z,{control:(0,l.jsx)(F.Z,{checked:on,onChange:an,color:"primary"}),label:"Dark Mode"})}),(0,l.jsx)(A.Z,{children:(0,l.jsx)(f.Z,{onClick:pn,children:"Close"})})]}),(0,l.jsxs)(E.Z,{open:G,onClose:vn,maxWidth:"sm",fullWidth:!0,children:[(0,l.jsx)(B.Z,{children:"About"}),(0,l.jsxs)(U.Z,{children:[(0,l.jsx)(I.Z,{variant:"h6",gutterBottom:!0,children:"Chat Application"}),(0,l.jsx)(I.Z,{variant:"body1",paragraph:!0,children:"Version: 1.0.0"}),(0,l.jsx)(I.Z,{variant:"body2",paragraph:!0,children:"A real-time messaging application built with React and Firebase. Connect with friends and family through instant messaging."}),(0,l.jsx)(I.Z,{variant:"body2",paragraph:!0,children:(0,l.jsx)("strong",{children:"Features:"})}),(0,l.jsx)(I.Z,{variant:"body2",component:"div",children:(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:"Real-time messaging"}),(0,l.jsx)("li",{children:"User authentication"}),(0,l.jsx)("li",{children:"Search chats"}),(0,l.jsx)("li",{children:"Block users"}),(0,l.jsx)("li",{children:"Delete conversations"}),(0,l.jsx)("li",{children:"Dark mode support"})]})}),(0,l.jsx)(I.Z,{variant:"body2",color:"textSecondary",style:{marginTop:20},children:"\xa9 2024 Chat App. All rights reserved."})]}),(0,l.jsx)(A.Z,{children:(0,l.jsx)(f.Z,{onClick:vn,children:"Close"})})]})]})},Y=d.ZP.div(L(),(function(n){return n.darkMode?"#333":"whitesmoke"}),(function(n){return n.darkMode?"#1e1e1e":"white"}),(function(n){return n.darkMode?"#e0e0e0":"black"})),q=(0,d.ZP)(h.Z)(R()),H=(0,d.ZP)(f.Z)(T()),Q=d.ZP.div(W(),(function(n){return n.darkMode?"#2a2a2a":"white"})),X=d.ZP.input(N(),(function(n){return n.darkMode?"#2a2a2a":"white"}),(function(n){return n.darkMode?"#e0e0e0":"black"}),(function(n){return n.darkMode?"#888":"#999"})),$=d.ZP.div(O(),(function(n){return n.darkMode?"#1e1e1e":"white"}),(function(n){return n.darkMode?"#333":"whitesmoke"})),nn=d.ZP.div(z()),en=d.ZP.div(K(),(function(n){return n.darkMode?"#2a2a2a":"#f5f5f5"})),rn=(0,d.ZP)(x.Z)(G(),en)},7896:function(n,e){e.Z=function(n,e){return null===n||void 0===n?void 0:n.filter((function(n){return n!==(null===e||void 0===e?void 0:e.email)}))[0]}}}]);