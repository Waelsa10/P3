"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[467],{1403:function(n,r,t){var e=t(4836);r.Z=void 0;var i=e(t(4938)),o=t(5893);r.Z=(0,i.default)((0,o.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"}),"Chat")},2761:function(n,r,t){var e=t(4836);r.Z=void 0;var i=e(t(4938)),o=t(5893);r.Z=(0,i.default)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},3999:function(n,r){var t=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;r.G=function(n){if(!n)return!1;if(n.length>254)return!1;if(!t.test(n))return!1;var r=n.split("@");return!(r[0].length>64)&&!r[1].split(".").some((function(n){return n.length>63}))}},6467:function(n,r,t){t.r(r),t.d(r,{default:function(){return H}});var e=t(7568),i=t(603),o=t(7297),u=t(7582),a=t(5893),s=(t(7294),t(3349)),c=t(3653),l=t(66),d=t(9800),h=t(9417),f=t(3946),v=t(1403),p=t(7976),x=t(2761),Z=t(1163),m=t(6677),b=t(7896),g=t(6100);function w(){var n=(0,o.Z)(["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  padding: 15px;\n  word-break: break-word;\n\n  :hover {\n    background-color: #e9eaeb;\n  }\n"]);return w=function(){return n},n}function j(){var n=(0,o.Z)(["\n  margin: 5px;\n  margin-right: 15px;\n"]);return j=function(){return n},n}var k=function(n){var r,t,e=n.id,o=n.users,u=(0,Z.useRouter)(),l=(0,i.Z)((0,s.F_)(c.I8),1)[0],d=l?(0,b.Z)(o,l):null,h=d?(0,g.IO)((0,g.hJ)(c.db,"users"),(0,g.ar)("email","==",d)):null,f=(0,i.Z)((0,m.Kx)(h),1)[0],v=null===f||void 0===f||null===(r=f.docs)||void 0===r||null===(t=r[0])||void 0===t?void 0:t.data();return(0,a.jsxs)(y,{onClick:function(){e&&u.push("/chat/".concat(e))},children:[v?(0,a.jsx)(z,{src:v.photoURL}):(0,a.jsx)(z,{children:d?d[0]:"?"}),(0,a.jsx)("p",{children:null!==d&&void 0!==d?d:"Loading..."})]})},y=l.ZP.div(w()),z=(0,l.ZP)(d.Z)(j()),P=t(3999);function _(){var n=(0,o.Z)(["\n  flex: 0.45;\n  border-right: 1px solid whitesmoke;\n  height: 100vh;\n  min-width: 300px;\n  max-width: 350px;\n  overflow-y: scroll;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n\n  -ms-overflow-style: none; /* IE and Edge */\n  scrollbar-width: none; /* Firefox */\n"]);return _=function(){return n},n}function C(){var n=(0,o.Z)(["\n  cursor: pointer;\n\n  :hover {\n    opacity: 0.8;\n  }\n"]);return C=function(){return n},n}function A(){var n=(0,o.Z)(["\n  width: 100%;\n  &&& {\n    border-top: 1px solid whitesmoke;\n    border-bottom: 1px solid whitesmoke;\n  }\n"]);return A=function(){return n},n}function I(){var n=(0,o.Z)(["\n  display: flex;\n  align-items: center;\n  padding: 5px;\n  border-radius: 2px;\n  padding: 20px;\n"]);return I=function(){return n},n}function L(){var n=(0,o.Z)(["\n  outline-width: 0;\n  border: none;\n  flex: 1;\n"]);return L=function(){return n},n}function E(){var n=(0,o.Z)(["\n  display: flex;\n  position: sticky;\n  top: 0;\n  background-color: white;\n  z-index: 1;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px;\n  height: 80px;\n  border-bottom: 1px solid whitesmoke;\n"]);return E=function(){return n},n}function S(){var n=(0,o.Z)([""]);return S=function(){return n},n}var H=function(){var n=(0,i.Z)((0,s.F_)(c.I8),1)[0],r=n?(0,g.IO)((0,g.hJ)(c.db,"chats"),(0,g.ar)("users","array-contains",n.email)):null,t=(0,i.Z)((0,m.Kx)(r),1)[0],o=function(){var r=(0,e.Z)((function(){var r;return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return n&&(r=prompt("Please enter an email address for the user you wish to chat with"))?!P.G(r)||l(r)||r===n.email?[3,2]:[4,(0,g.ET)((0,g.hJ)(c.db,"chats"),{users:[n.email,r]})]:[2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}));return function(){return r.apply(this,arguments)}}(),l=function(n){return!!(null===t||void 0===t?void 0:t.docs.find((function(r){return r.data().users.includes(n)})))};return n?(0,a.jsxs)(F,{children:[(0,a.jsxs)($,{children:[(0,a.jsx)(J,{onClick:function(){return c.I8.signOut()},src:n.photoURL}),(0,a.jsxs)(G,{children:[(0,a.jsx)(f.Z,{children:(0,a.jsx)(v.Z,{})}),(0,a.jsx)(f.Z,{children:(0,a.jsx)(p.Z,{})})]})]}),(0,a.jsxs)(O,{children:[(0,a.jsx)(x.Z,{}),(0,a.jsx)(R,{placeholder:"Search in chats",type:"text"})]}),(0,a.jsx)(M,{onClick:o,children:"Start a new chat"}),null===t||void 0===t?void 0:t.docs.map((function(n){return(0,a.jsx)(k,{id:n.id,users:n.data().users},n.id)}))]}):(0,a.jsx)(F,{children:"Loading..."})},F=l.ZP.div(_()),J=(0,l.ZP)(d.Z)(C()),M=(0,l.ZP)(h.Z)(A()),O=l.ZP.div(I()),R=l.ZP.input(L()),$=l.ZP.div(E()),G=l.ZP.div(S())},7896:function(n,r){r.Z=function(n,r){return null===n||void 0===n?void 0:n.filter((function(n){return n!==(null===r||void 0===r?void 0:r.email)}))[0]}}}]);