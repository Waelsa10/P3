(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[934],{495:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat/[id]",function(){return t(7986)}])},638:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(6856).Z;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n){var t=a.default,o=(null==n?void 0:n.suspense)?{}:{loading:function(e){e.error,e.isLoading;return e.pastDelay,null}};r(e,Promise)?o.loader=function(){return e}:"function"===typeof e?o.loader=e:"object"===typeof e&&(o=u({},o,e));if((o=u({},o,n)).suspense)throw new Error("Invalid suspense option usage in next/dynamic. Read more: https://nextjs.org/docs/messages/invalid-dynamic-suspense");o.suspense&&(delete o.ssr,delete o.loading);o.loadableGenerated&&delete(o=u({},o,o.loadableGenerated)).loadableGenerated;if("boolean"===typeof o.ssr&&!o.suspense){if(!o.ssr)return delete o.ssr,i(t,o);delete o.ssr}return t(o)},n.noSSR=i;var u=t(6495).Z,o=t(2648).Z,a=(o(t(7294)),o(t(4302)));function i(e,n){return delete n.webpack,delete n.modules,e(n)}("function"===typeof n.default||"object"===typeof n.default&&null!==n.default)&&"undefined"===typeof n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),e.exports=n.default)},6319:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LoadableContext=void 0;var r=(0,t(2648).Z)(t(7294)).default.createContext(null);n.LoadableContext=r},4302:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(9658).Z,u=t(7222).Z;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t(6495).Z,a=(0,t(2648).Z)(t(7294)),i=t(6319),s=t(1688).useSyncExternalStore,l=[],d=[],c=!1;function f(e){var n=e(),t={loading:!0,loaded:null,error:null};return t.promise=n.then((function(e){return t.loading=!1,t.loaded=e,e})).catch((function(e){throw t.loading=!1,t.error=e,e})),t}var p=function(){function e(n,t){r(this,e),this._loadFn=n,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return u(e,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var e=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var n=this._res,t=this._opts;n.loading&&("number"===typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){e._update({pastDelay:!0})}),t.delay)),"number"===typeof t.timeout&&(this._timeout=setTimeout((function(){e._update({timedOut:!0})}),t.timeout))),this._res.promise.then((function(){e._update({}),e._clearTimeouts()})).catch((function(n){e._update({}),e._clearTimeouts()})),this._update({})}},{key:"_update",value:function(e){this._state=o({},this._state,{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},e),this._callbacks.forEach((function(e){return e()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return this._state}},{key:"subscribe",value:function(e){var n=this;return this._callbacks.add(e),function(){n._callbacks.delete(e)}}}]),e}();function h(e){return function(e,n){var t=function(){if(!l){var n=new p(e,u);l={getCurrentValue:n.getCurrentValue.bind(n),subscribe:n.subscribe.bind(n),retry:n.retry.bind(n),promise:n.promise.bind(n)}}return l.promise()},r=function(){t();var e=a.default.useContext(i.LoadableContext);e&&Array.isArray(u.modules)&&u.modules.forEach((function(n){e(n)}))},u=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null,suspense:!1},n);u.suspense&&(u.lazy=a.default.lazy(u.loader));var l=null;if(!c){var f=u.webpack?u.webpack():u.modules;f&&d.push((function(e){var n=!0,r=!1,u=void 0;try{for(var o,a=f[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var i=o.value;if(-1!==e.indexOf(i))return t()}}catch(s){r=!0,u=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw u}}}))}var h=u.suspense?function(e,n){return r(),a.default.createElement(u.lazy,o({},e,{ref:n}))}:function(e,n){r();var t=s(l.subscribe,l.getCurrentValue,l.getCurrentValue);return a.default.useImperativeHandle(n,(function(){return{retry:l.retry}}),[]),a.default.useMemo((function(){return t.loading||t.error?a.default.createElement(u.loading,{isLoading:t.loading,pastDelay:t.pastDelay,timedOut:t.timedOut,error:t.error,retry:l.retry}):t.loaded?a.default.createElement((n=t.loaded)&&n.__esModule?n.default:n,e):null;var n}),[e,t])};return h.preload=function(){return t()},h.displayName="LoadableComponent",a.default.forwardRef(h)}(f,e)}function v(e,n){for(var t=[];e.length;){var r=e.pop();t.push(r(n))}return Promise.all(t).then((function(){if(e.length)return v(e,n)}))}h.preloadAll=function(){return new Promise((function(e,n){v(l).then(e,n)}))},h.preloadReady=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(n){var t=function(){return c=!0,n()};v(d,e).then(t,t)}))},window.__NEXT_PRELOADREADY=h.preloadReady;var y=h;n.default=y},7986:function(e,n,t){"use strict";t.r(n);var r=t(7568),u=t(1799),o=t(7297),a=t(7582),i=t(5893),s=t(7294),l=t(3653),d=t(66),c=t(5152),f=t.n(c),p=t(9008),h=t.n(p),v=t(1163),y=t(6100);function b(){var e=(0,o.Z)(["\n  display: flex;\n  box-shadow: 1px 1px 4px -1px rgba(0, 0, 0, 0.75);\n"]);return b=function(){return e},e}function _(){var e=(0,o.Z)(["\n  flex: 1;\n  overflow: scroll;\n  height: 100vh;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n  -ms-overflow-style: none; /* IE and Edge */\n  scrollbar-width: none; /* Firefox */\n"]);return _=function(){return e},e}function m(){var e=(0,o.Z)(["\n  text-align: center;\n  padding: 20px;\n  margin: 20px;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.12);\n\n  > button {\n    margin-top: 10px;\n    padding: 8px 16px;\n    background: #25D366;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n  }\n"]);return m=function(){return e},e}function x(){var e=(0,o.Z)(["\n  text-align: center;\n  padding: 20px;\n  margin: 20px;\n  background-color: #fff3cd;\n  color: #856404;\n  border: 1px solid #ffeeba;\n  border-radius: 4px;\n"]);return x=function(){return e},e}var g=f()((function(){return Promise.all([t.e(633),t.e(66),t.e(467)]).then(t.bind(t,6467))}),{loadableGenerated:{webpack:function(){return[6467]}},ssr:!1}),w=f()((function(){return Promise.all([t.e(885),t.e(633),t.e(823)]).then(t.bind(t,9823))}),{loadableGenerated:{webpack:function(){return[9823]}},ssr:!1});n.default=function(){var e=(0,s.useState)(!0),n=e[0],t=e[1],o=(0,s.useState)(null),d=o[0],c=o[1],f=(0,v.useRouter)(),p=f.query.id,b=(0,s.useState)(null),_=b[0],m=b[1],x=(0,s.useState)(!0),S=x[0],O=x[1];return(0,s.useEffect)((function(){var e=function(){return t(!0)},n=function(){return t(!1)};return window.addEventListener("online",e),window.addEventListener("offline",n),t(navigator.onLine),function(){window.removeEventListener("online",e),window.removeEventListener("offline",n)}}),[]),(0,s.useEffect)((function(){if(p&&n){var e=!0,t=function(){var n=(0,r.Z)((function(){var n,t,r;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,3,4]),c(null),n=(0,y.JU)(l.db,"chats",p),[4,(0,y.QT)(n)];case 1:if(!(t=o.sent()).exists())throw new Error("Chat not found");return e&&m((0,u.Z)({id:t.id},t.data())),[3,4];case 2:return r=o.sent(),console.error("Error fetching chat:",r),e&&(c(r.message),"not-found"===r.code&&f.replace("/")),[3,4];case 3:return e&&O(!1),[7];case 4:return[2]}}))}));return function(){return n.apply(this,arguments)}}();return t(),function(){e=!1}}}),[p,f,n]),n?d?(0,i.jsx)(E,{children:(0,i.jsxs)(k,{children:[(0,i.jsx)("h3",{children:"Error loading chat"}),(0,i.jsx)("p",{children:d}),(0,i.jsx)("button",{onClick:function(){return f.push("/")},children:"Return to Home"})]})}):S?(0,i.jsx)("div",{children:"Loading..."}):(0,i.jsxs)(E,{children:[(0,i.jsx)(h(),{children:(0,i.jsx)("title",{children:"Chat"})}),(0,i.jsx)(g,{}),(0,i.jsx)(j,{children:(0,i.jsx)(w,{chat:_,messages:null})})]}):(0,i.jsx)(E,{children:(0,i.jsx)(P,{children:"You are currently offline. Please check your internet connection."})})};var E=d.ZP.div(b()),j=d.ZP.div(_()),k=d.ZP.div(m()),P=d.ZP.div(x())},5152:function(e,n,t){e.exports=t(638)},3250:function(e,n,t){"use strict";var r=t(7294);var u="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n},o=r.useState,a=r.useEffect,i=r.useLayoutEffect,s=r.useDebugValue;function l(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!u(e,t)}catch(r){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,n){return n()}:function(e,n){var t=n(),r=o({inst:{value:t,getSnapshot:n}}),u=r[0].inst,d=r[1];return i((function(){u.value=t,u.getSnapshot=n,l(u)&&d({inst:u})}),[e,t,n]),a((function(){return l(u)&&d({inst:u}),e((function(){l(u)&&d({inst:u})}))}),[e]),s(t),t};n.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},1688:function(e,n,t){"use strict";e.exports=t(3250)}},function(e){e.O(0,[774,888,179],(function(){return n=495,e(e.s=n);var n}));var n=e.O();_N_E=n}]);