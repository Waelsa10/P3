(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405,467],{1403:function(n,r,t){"use strict";var e=t(4836);r.Z=void 0;var i=e(t(4938)),u=t(5893);r.Z=(0,i.default)((0,u.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"}),"Chat")},2761:function(n,r,t){"use strict";var e=t(4836);r.Z=void 0;var i=e(t(4938)),u=t(5893);r.Z=(0,i.default)((0,u.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},3999:function(n,r){"use strict";var t=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;r.G=function(n){if(!n)return!1;if(n.length>254)return!1;if(!t.test(n))return!1;var r=n.split("@");return!(r[0].length>64)&&!r[1].split(".").some((function(n){return n.length>63}))}},5557:function(n,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(3678)}])},6467:function(n,r,t){"use strict";t.r(r),t.d(r,{default:function(){return O}});var e=t(7568),i=t(603),u=t(7297),o=t(7582),s=t(5893),c=(t(7294),t(3349)),a=t(3653),d=t(66),l=t(9800),f=t(9417),h=t(3946),v=t(1403),p=t(7976),x=t(2761),Z=t(1163),m=t(6677),w=t(7896),j=t(6100);function b(){var n=(0,u.Z)(["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  padding: 15px;\n  word-break: break-word;\n\n  :hover {\n    background-color: #e9eaeb;\n  }\n"]);return b=function(){return n},n}function g(){var n=(0,u.Z)(["\n  margin: 5px;\n  margin-right: 15px;\n"]);return g=function(){return n},n}var _=function(n){var r,t,e=n.id,u=n.users,o=(0,Z.useRouter)(),d=(0,i.Z)((0,c.F_)(a.I8),1)[0],l=d?(0,w.Z)(u,d):null,f=l?(0,j.IO)((0,j.hJ)(a.db,"users"),(0,j.ar)("email","==",l)):null,h=(0,i.Z)((0,m.Kx)(f),1)[0],v=null===h||void 0===h||null===(r=h.docs)||void 0===r||null===(t=r[0])||void 0===t?void 0:t.data();return(0,s.jsxs)(k,{onClick:function(){e&&o.push("/chat/".concat(e))},children:[v?(0,s.jsx)(y,{src:v.photoURL}):(0,s.jsx)(y,{children:l?l[0]:"?"}),(0,s.jsx)("p",{children:null!==l&&void 0!==l?l:"Loading..."})]})},k=d.ZP.div(b()),y=(0,d.ZP)(l.Z)(g()),P=t(3999);function z(){var n=(0,u.Z)(["\n  flex: 0.45;\n  border-right: 1px solid whitesmoke;\n  height: 100vh;\n  min-width: 300px;\n  max-width: 350px;\n  overflow-y: scroll;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n\n  -ms-overflow-style: none; /* IE and Edge */\n  scrollbar-width: none; /* Firefox */\n"]);return z=function(){return n},n}function C(){var n=(0,u.Z)(["\n  cursor: pointer;\n\n  :hover {\n    opacity: 0.8;\n  }\n"]);return C=function(){return n},n}function E(){var n=(0,u.Z)(["\n  width: 100%;\n  &&& {\n    border-top: 1px solid whitesmoke;\n    border-bottom: 1px solid whitesmoke;\n  }\n"]);return E=function(){return n},n}function A(){var n=(0,u.Z)(["\n  display: flex;\n  align-items: center;\n  padding: 5px;\n  border-radius: 2px;\n  padding: 20px;\n"]);return A=function(){return n},n}function I(){var n=(0,u.Z)(["\n  outline-width: 0;\n  border: none;\n  flex: 1;\n"]);return I=function(){return n},n}function L(){var n=(0,u.Z)(["\n  display: flex;\n  position: sticky;\n  top: 0;\n  background-color: white;\n  z-index: 1;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px;\n  height: 80px;\n  border-bottom: 1px solid whitesmoke;\n"]);return L=function(){return n},n}function N(){var n=(0,u.Z)([""]);return N=function(){return n},n}var O=function(){var n=(0,i.Z)((0,c.F_)(a.I8),1)[0],r=n?(0,j.IO)((0,j.hJ)(a.db,"chats"),(0,j.ar)("users","array-contains",n.email)):null,t=(0,i.Z)((0,m.Kx)(r),1)[0],u=function(){var r=(0,e.Z)((function(){var r;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return n&&(r=prompt("Please enter an email address for the user you wish to chat with"))?!P.G(r)||d(r)||r===n.email?[3,2]:[4,(0,j.ET)((0,j.hJ)(a.db,"chats"),{users:[n.email,r]})]:[2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}));return function(){return r.apply(this,arguments)}}(),d=function(n){return!!(null===t||void 0===t?void 0:t.docs.find((function(r){return r.data().users.includes(n)})))};return n?(0,s.jsxs)(S,{children:[(0,s.jsxs)(R,{children:[(0,s.jsx)(H,{onClick:function(){return a.I8.signOut()},src:n.photoURL}),(0,s.jsxs)(T,{children:[(0,s.jsx)(h.Z,{children:(0,s.jsx)(v.Z,{})}),(0,s.jsx)(h.Z,{children:(0,s.jsx)(p.Z,{})})]})]}),(0,s.jsxs)(J,{children:[(0,s.jsx)(x.Z,{}),(0,s.jsx)(M,{placeholder:"Search in chats",type:"text"})]}),(0,s.jsx)(F,{onClick:u,children:"Start a new chat"}),null===t||void 0===t?void 0:t.docs.map((function(n){return(0,s.jsx)(_,{id:n.id,users:n.data().users},n.id)}))]}):(0,s.jsx)(S,{children:"Loading..."})},S=d.ZP.div(z()),H=(0,d.ZP)(l.Z)(C()),F=(0,d.ZP)(f.Z)(E()),J=d.ZP.div(A()),M=d.ZP.input(I()),R=d.ZP.div(L()),T=d.ZP.div(N())},3678:function(n,r,t){"use strict";t.r(r),t.d(r,{default:function(){return d}});var e=t(7297),i=t(5893),u=t(9008),o=t.n(u),s=t(66),c=t(6467);function a(){var n=(0,e.Z)([""]);return a=function(){return n},n}function d(){return(0,i.jsxs)(l,{children:[(0,i.jsx)(o(),{children:(0,i.jsx)("title",{children:"Your Chats"})}),(0,i.jsx)(c.default,{})]})}var l=s.ZP.div(a())},7896:function(n,r){"use strict";r.Z=function(n,r){return null===n||void 0===n?void 0:n.filter((function(n){return n!==(null===r||void 0===r?void 0:r.email)}))[0]}}},function(n){n.O(0,[1,774,888,179],(function(){return r=5557,n(n.s=r);var r}));var r=n.O();_N_E=r}]);